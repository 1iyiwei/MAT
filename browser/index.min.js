var FloMat=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=117)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8);function o(e,t){let n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function i(e,t){return Math.sqrt(o(e,t))}function u(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function s(e){return e[0]*e[0]+e[1]*e[1]}function l(e,t,n){return e[0]*(t[1]*n[2]-t[2]*n[1])-e[1]*(t[0]*n[2]-t[2]*n[0])+e[2]*(t[0]*n[1]-t[1]*n[0])}function c(e,t){function n(t){return[e[0]+t[0],e[1]+t[1]]}return void 0===t?n:n(t)}t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t){return e[0]*t[1]-e[1]*t[0]},t.ccw=function(e,t,n){return r.orient2d(e,t,n)},t.segSegIntersection=function(e,t){let[n,o]=e,[i,u]=t,[s,l]=n,[c,a]=o,[f,d]=i,[p,g]=u,h=r.expansionDiff(r.expansionProduct(r.twoDiff(c,s),r.twoDiff(g,d)),r.expansionProduct(r.twoDiff(a,l),r.twoDiff(p,f))),_=r.expansionDiff(r.expansionProduct(r.twoDiff(l,d),r.twoDiff(p,f)),r.expansionProduct(r.twoDiff(s,f),r.twoDiff(g,d))),v=r.expansionDiff(r.expansionProduct(r.twoDiff(l,d),r.twoDiff(c,s)),r.expansionProduct(r.twoDiff(s,f),r.twoDiff(a,l)));if(0!==h[h.length-1]){if(r.sign(_)*r.sign(h)>=0&&r.compare(r.abs(h),r.abs(_))>=0&&r.sign(v)*r.sign(h)>=0&&r.compare(r.abs(h),r.abs(v))>=0){r.estimate(_),r.estimate(h);return[r.estimate(r.twoSum(r.estimate(r.expansionProduct(r.twoDiff(c,s),_))/r.estimate(h),s)),r.estimate(r.twoSum(r.estimate(r.expansionProduct(r.twoDiff(a,l),_))/r.estimate(h),l))]}}else _[_.length-1]},t.doesSegSegIntersect=function(e,t){return!(r.orient2d(e[0],e[1],t[0])*r.orient2d(e[0],e[1],t[1])>0)&&!(r.orient2d(t[0],t[1],e[0])*r.orient2d(t[0],t[1],e[1])>0)},t.squaredDistanceBetween=o,t.scale=function(e,t){return[e[0]*t,e[1]*t]},t.reverse=function(e){return[-e[0],-e[1]]},t.toUnitVector=function(e){let t=1/u(e);return[e[0]*t,e[1]*t]},t.toLength=function(e,t){let n=t/u(e);return[e[0]*n,e[1]*n]},t.fromTo=function(e,t){return[t[0]-e[0],t[1]-e[1]]},t.interpolate=function(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]},t.mean=function(e){let t=e[0],n=e[1];return[(t[0]+n[0])/2,(t[1]+n[1])/2]},t.distanceBetween=i,t.len=u,t.lengthSquared=s,t.manhattanDistanceBetween=function(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])},t.manhattanLength=function(e){return Math.abs(e[0])+Math.abs(e[1])},t.distanceBetweenPointAndLine=function(e,t){let[n,r]=e,[[o,i],[u,s]]=t,l=s-i,c=u-o,a=l*n-c*r+u*i-s*o,f=Math.sqrt(c*c+l*l);return Math.abs(a/f)},t.squaredDistanceBetweenPointAndLineSegment=function(e,t){const n=o;let r=t[0],i=t[1],u=n(r,i);if(0==u)return n(e,r);let s=((e[0]-r[0])*(i[0]-r[0])+(e[1]-r[1])*(i[1]-r[1]))/u;return s=Math.max(0,Math.min(1,s)),n(e,[r[0]+s*(i[0]-r[0]),r[1]+s*(i[1]-r[1])])},t.circumCenter=function(e){let t=e[0],n=e[1],r=e[2];const o=s;let i=.5*l([o(t),t[1],1],[o(n),n[1],1],[o(r),r[1],1]),u=.5*l([t[0],o(t),1],[n[0],o(n),1],[r[0],o(r),1]),c=l([t[0],t[1],1],[n[0],n[1],1],[r[0],r[1],1]);return[i/c,u/c]},t.inCenter=function(e){const t=i;let n=e[0],r=e[1],o=e[2],u=t(r,o),s=t(n,o),l=t(n,r),c=u+s+l;return[(u*n[0]+s*r[0]+l*o[0])/c,(u*n[1]+s*r[1]+l*o[1])/c]},t.centroid=function(e){if(3===e.length){let t=e[0],n=e[1],r=e[2];return[(t[0]+n[0]+r[0])/3,(t[1]+n[1]+r[1])/3]}let t=0;for(let n=0;n<e.length;n++){let r=e[n],o=n===e.length-1?e[0]:e[n+1];t+=r[0]*o[1]-o[0]*r[1]}t/=2;let n=[0,0];for(let t=0;t<e.length;t++){let r=e[t],o=t===e.length-1?e[0]:e[t+1];n[0]=n[0]+(r[0]+o[0])*(r[0]*o[1]-o[0]*r[1]),n[1]=n[1]+(r[1]+o[1])*(r[0]*o[1]-o[0]*r[1])}return[n[0]/(6*t),n[1]/(6*t)]},t.det3=l,t.translate=c;let a=(f=c,function(e,t){let n=f(e),r=e=>e.map(n);return void 0===t?r:r(t)});var f;t.translatePs=a;let d=function(e){return function(t,n,r){let o=e(t,n),i=e=>e.map(o);return void 0===r?i:i(r)}}(p);function p(e,t,n){a([1,2]);function r(n){return[n[0]*t-n[1]*e,n[0]*e+n[1]*t]}return void 0===n?r:r(n)}t.rotatePs=d,t.rotate=p,t.equal=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t.reverseRotate=function(e,t,n){return[+n[0]*t+n[1]*e,-n[0]*e+n[1]*t]},t.rotate90Degrees=function(e){return[-e[1],e[0]]},t.rotateNeg90Degrees=function(e){return[e[1],-e[0]]},t.getClosestTo=function(e,t){let n=void 0,r=Number.POSITIVE_INFINITY;for(let i=0;i<t.length;i++){let u=t[i],s=o(e,u);s<r&&(n=u,r=s)}return n},t.getObjClosestTo=function(e,t,n){let r=void 0,i=Number.POSITIVE_INFINITY;for(let u=0;u<t.length;u++){let s=t[u],l=o(e,n(s));l<i&&(r=s,i=l)}return r},t.translateThenRotatePs=function(e,t,n,r){const o=c(e);return r.map(e=>p(t,n,o(e)))},t.rotateThenTranslatePs=function(e,t,n,r){return r.map(r=>c(n,p(e,t,r)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(0);t.rotate=o.rotatePs,t.translate=o.translatePs;const i=n(7),u=n(72),s=n(135),l=n(20);t.getX=l.getX;const c=n(14);t.getY=c.getY;const a=n(42);t.getDx=a.getDx;const f=n(43);t.getDy=f.getDy;const d=n(73);t.getDdx=d.getDdx;const p=n(74);t.getDdy=p.getDdy;const g=n(138);t.getDxyAt1=g.getDxyAt1;const h=n(139);t.getDdxyAt1=h.getDdxyAt1;const _=n(75);t.getDxyAt0=_.getDxyAt0;const v=n(76);t.getDdxyAt0=v.getDdxyAt0;const b=n(77);t.getDddxy=b.getDddxy;const m=n(78);t.evaluateX=m.evaluateX;const P=n(79);t.evaluateY=P.evaluateY;const x=n(9);t.evaluate=x.evaluate;const M=n(44);t.evaluateDx=M.evaluateDx;const w=n(80);t.evaluateDdx=w.evaluateDdx;const O=n(45);t.evaluateDy=O.evaluateDy;const y=n(81);t.evaluateDdy=y.evaluateDdy;const C=n(82);t.tangent=C.tangent;const S=n(83);t.normal=S.normal;const I=n(140);t.from0ToT=I.from0ToT;const T=n(141);t.fromTTo1=T.fromTTo1;const N=n(26);t.fromTo=N.fromTo,t.fromToPrecise=N.fromToPrecise;const B=n(84);t.coincident=B.coincident;const j=n(85);t.lineIntersection=j.lineIntersection;const D=n(142);t.bezier3Intersection=D.bezier3Intersection;const E=n(149);t.bezier3IntersectionSylvester=E.bezier3IntersectionSylvester;const A=n(150);t.tsAtX=A.tsAtX;const F=n(151);t.tsAtY=F.tsAtY;const L=n(152);t.BezDebug=L.BezDebug;const z=n(51);t.κ=z.κ;const R=n(163);t.quadToPolyline=R.quadToPolyline;const Y=n(90);t.isQuadObtuse=Y.isQuadObtuse;const H=n(21);t.splitAt=H.splitAt,t.splitAtPrecise=H.splitAtPrecise;const q=n(46);t.closestPointOnBezier=q.closestPointOnBezier;const V=n(165);t.hausdorffDistance=V.hausdorffDistance,t.hausdorffDistanceCandidates=V.hausdorffDistanceCandidates;const X=n(30);t.lengthUpperBound=X.lengthUpperBound;const G=n(166);t.lengthSquaredUpperBound=G.lengthSquaredUpperBound;const Q=n(91);t.splitByMaxCurveLength=Q.splitByMaxCurveLength;const k=n(167);t.getCurvatureExtrema=k.getCurvatureExtrema;const U=n(168);t.getInflections=U.getInflections;const $=n(93);t.flatness=$.flatness;const K=n(169);t.splitByMaxCurvature=K.splitByMaxCurvature;const W=n(170);t.splitByCurvatureAndLength=W.splitByCurvatureAndLength;const Z=n(94);t.isPointOnBezierExtension=Z.isPointOnBezierExtension;const J=n(172);t.areBeziersInSameKFamily=J.areBeziersInSameKFamily;const ee=n(173);t.getInterfaceCcw=ee.getInterfaceCcw;const te=n(95);t.isLine=te.isLine,t.isHorizontalLine=te.isHorizontalLine,t.isVerticalLine=te.isVerticalLine;const ne=n(174);t.isSelfOverlapping=ne.isSelfOverlapping;const re=n(86);t.getTangentPolyFromPoint=re.getTangentPolyFromPoint;const oe=n(96);t.getBounds=oe.getBounds;const ie=n(175);t.getBoundingBoxTight=ie.getBoundingBoxTight;const ue=n(97);t.getBoundingBox=ue.getBoundingBox;let se=i.memoize(s.grahamScan);t.getBoundingHull=se,t.fromLine=function(e){let[[t,n],[r,o]]=e,i=(r-t)/3,u=(o-n)/3;return[[t,n],[t+i,n+u],[t+2*i,n+2*u],[r,o]]};let le=z.κ;function ce(e,t){const n=M.evaluateDx(e),r=O.evaluateDy(e),o=w.evaluateDdx(e),i=y.evaluateDdy(e);function u(e){let t=n(e),u=r(e),s=o(e);return(t*i(e)-u*s)/(t*t+u*u)}return void 0===t?u:u(t)}function ae(e,t){let n=[,,pe,de,fe];function r(t){return n[t.length](e,t)}return void 0===t?r:r(t)}function fe(e,t){if(e[0]===e[1])return 0;let[[n,r],[o,i],[s,l],[c,a]]=t;if(n===o&&o===s&&s===c&&r===i&&i===l&&l===a)return 0;const f=ge(t);return u.gaussQuadrature(f,e)}function de(e,t){if(e[0]===e[1])return 0;let[[n,r],[o,i],[s,l]]=t;if(n===o&&o===s&&r===i&&i===l)return 0;const c=ge(t);return u.gaussQuadrature(c,e)}function pe(e,t){let[n,r]=e;if(n===r)return 0;let[[i,u],[s,l]]=t;if(i===s&&u===l)return 0;let c=[i+n*(s-i),u+n*(l-u)],a=[i+r*(s-i),u+r*(l-u)];return o.distanceBetween(c,a)}function ge(e,t){const n=M.evaluateDx(e),r=O.evaluateDy(e);function o(e){let t=n(e),o=r(e);return Math.sqrt(t*t+o*o)}return void 0===t?o:o(t)}function he(e){let[[t,n],[r,o],[i,u]]=e;return[[t,n],[1/3*t+2/3*r,1/3*n+2/3*o],[2/3*r+1/3*i,2/3*o+1/3*u],[i,u]]}function _e(e){let[[t,n],[r,o]]=e,i=(r-t)/3,u=(o-n)/3;return[[t,n],[t+1*i,n+1*u],[t+2*i,n+2*u],[r,o]]}function ve(e){return 2===e.length?_e(e):3===e.length?he(e):4===e.length?e:void 0}t.curvature=le,t.dκMod=function(e,t){let[[n,r],[o,i],[u,s],[l,c]]=e;function a(e){let t=e*e,a=1-e,f=2*e-3*t,d=(3*e-1)*a,p=a*a,g=3*(t*l+f*u-d*o-p*n),h=3*(t*c+f*s-d*i-p*r),_=6*(e*c-(3*e-1)*s+(3*e-2)*i+a*r),v=6*(e*l-(3*e-1)*u+(3*e-2)*o+a*n),b=Math.sqrt(g*g+h*h);return 4*(g*(c-3*s+3*i-r)-h*(l-3*u+3*o-n))*Math.pow(b,3)-(g*_-v*h)*(2*_*h+2*v*g)*b}return void 0===t?a:a(t)},t.totalCurvature=function(e,t){function n(t){return u.gaussQuadrature(ce(e),t)}return C.tangent(e),void 0===t?n:n(t)},t.totalAbsoluteCurvature=function(e,t){function n(t=[0,1]){return u.gaussQuadrature(t=>Math.abs(ce(e)(t)),t)}return void 0===t?n:n(t)},t.length=ae,t.getTAtLength=function(e,t){let n=ve(e);const o=e=>ae([0,e],n);function i(e){return r.brent(t=>o(t)-e,-.1,1.1)}return void 0===t?i:i(t)},t.ds=ge,t.bezierFromBezierPiece=function(e,t){if(0===t[0]&&1===t[1])return e;if(t[0]===t[1]){let n=x.evaluate(e)(t[0]);return[n,n,n,n]}return 0===t[0]?I.from0ToT(e,t[1]):1===t[1]?T.fromTTo1(e,t[0]):I.from0ToT(T.fromTTo1(e,t[0]),(t[1]-t[0])/(1-t[0]))},t.toString=function(e){let[[t,n],[r,o],[i,u],[s,l]]=e;return`[[${t},${n}],[${r},${o}],[${i},${u}],[${s},${l}]]`},t.scale=function(e,t){return e.map(e=>[e[0]*t,e[1]*t])},t.toQuadratic=function(e){let[[t,n],[r,o],[i,u],[s,l]]=e;return[[.95*t+.15*r+-.15*i+.05*s,.95*n+.15*o+-.15*u+.05*l],[-.25*t+.75*r+.75*i+-.25*s,-.25*n+.75*o+.75*u+-.25*l],[.05*t+-.15*r+.15*i+.95*s,.05*n+-.15*o+.15*u+.95*l]]},t.evaluateHybridQuadratic=function(e,t,n){let r=e[0],o=x.evaluate(e[1],n),i=e[2];return x.evaluate([r,o,i],t)},t.clone=function(e){let[[t,n],[r,o],[i,u],[s,l]]=e;return[[t,n],[r,o],[i,u],[s,l]]},t.quadraticToCubic=he,t.linearToCubic=_e,t.toCubic=ve,t.reverse=function(e){return e.slice().reverse()},t.equal=function(e,t){let[[n,r],[o,i],[u,s],[l,c]]=e,[[a,f],[d,p],[g,h],[_,v]]=t;return n===a&&o===d&&u===g&&l===_&&r===f&&i===p&&s===h&&c===v}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(7),i=n(1),u=n(13),s=n(10);class l{constructor(e,t){this.curve=e,this.t=t,this.p_=void 0}get p(){return void 0===this.p_?this.p_=i.evaluate(this.curve.ps,this.t):this.p_}static getOsculatingCircle(e,t){if(l.isSharpCorner(t))return new s.Circle(t.p,0);let n=l.calcOsculatingCircleRadius(t);n<0&&(n=Number.POSITIVE_INFINITY),n=Math.min(n,e);let r=t.curve.ps,o=t.t,u=i.normal(r,o),c=i.evaluate(r,o),a=[c[0]+u[0]*n,c[1]+u[1]*n];return new s.Circle(a,n)}static calcOrder(e,t){if(!l.isCorner(t))return 0;if(!l.isDullCorner(t))return 0;let n=l.getCorner(t),o=r.rotateNeg90Degrees(n.tangents[0]),i=r.toUnitVector(r.fromTo(t.p,e.center));return-r.dot(o,i)}}t.PointOnShape=l,l.calcOsculatingCircleRadius=o.memoize(function(e){let t=e.curve.ps,n=e.t;return 1/-i.κ(t,n)}),l.compare=function(e,t){if(void 0===e||void 0===t)return;let n;return 0!==(n=e.curve.idx-t.curve.idx)?n:n=e.t-t.t},l.compareInclOrder=function(e,t,n,r){let o=l.compare(e,t);if(void 0!==o)return 0!==o?o:o=n-r},l.isCorner=function(e){return 0===e.t||1===e.t},l.getCorner=function(e){return u.Curve.getCornerAtEnd(1===e.t?e.curve:e.curve.prev)},l.isSharpCorner=o.memoize(function(e){if(!l.isCorner(e))return!1;return l.getCorner(e).isSharp}),l.isDullCorner=o.memoize(function(e){if(!l.isCorner(e))return!1;return l.getCorner(e).isDull}),l.isQuiteSharpCorner=o.memoize(function(e){if(!l.isCorner(e))return!1;return l.getCorner(e).isQuiteSharp}),l.isQuiteDullCorner=o.memoize(function(e){if(!l.isCorner(e))return!1;return l.getCorner(e).isQuiteDull}),l.toHumanString=function(e){return e.p[0]+", "+e.p[1]+" | bz: "+e.curve.idx+" | t: "+e.t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(24);t.equal=r.equal,t.add=r.add,t.subtract=r.subtract,t.multiplyByConst=r.multiplyByConst,t.negate=r.negate,t.differentiate=r.differentiate,t.multiply=r.multiply,t.degree=r.degree,t.evaluate=r.evaluate,t.evaluateAt0=r.evaluateAt0,t.signChanges=r.signChanges,t.invert=r.invert,t.changeVariables=r.changeVariables,t.reflectAboutYAxis=r.reflectAboutYAxis,t.sturmChain=r.sturmChain,t.clip=r.clip,t.clip0=r.clip0,t.deflate=r.deflate,t.maxCoefficient=r.maxCoefficient,t.toCasStr=r.toCasStr;const o=n(59);t.quadraticRoots=o.quadraticRoots,t.numRootsWithin=o.numRootsWithin,t.brent=o.brent,t.bisection=o.bisection;const i=n(60);t.rootMagnitudeUpperBound_fujiwara=i.rootMagnitudeUpperBound_fujiwara,t.positiveRootUpperBound_LMQ=i.positiveRootUpperBound_LMQ,t.positiveRootLowerBound_LMQ=i.positiveRootLowerBound_LMQ,t.negativeRootUpperBound_LMQ=i.negativeRootUpperBound_LMQ,t.negativeRootLowerBound_LMQ=i.negativeRootLowerBound_LMQ,t.rootMagnitudeUpperBound_rouche=i.rootMagnitudeUpperBound_rouche;const u=n(118);t.allRoots=u.allRoots;const s=n(119);t.flatRoots=s.flatRoots,t.flatRootsArr=s.flatRootsArr,t.flatCoefficients=s.flatCoefficients,t.flatCoefficientsArr=s.flatCoefficientsArr,t.predictiveRandom=s.predictiveRandom;const l=n(120);t.hornerErrorBound=l.hornerErrorBound;const c=n(61);t.fromRoots=c.fromRoots},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),o=n(48),i=n(154),u=n(49),s=n(155),l=n(156),c=n(157),a=n(158),f=n(159),d=n(88),p=n(50),g=n(160),h=n(87);let _={circle:r.circle,crossHair:o.crossHair,dot:i.dot,line:u.line,rect:s.rect,beziers:f.beziers,bezier:p.bezier,bezierPiece:g.bezierPiece,quadBezier:h.quadBezier,cubicBezier:d.cubicBezier,polygon:l.polygon,loop:c.loop,polyline:a.polyline};t.drawFs=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DEFAULT_CLASS="red thin10 nofill "},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(15),o=n(98),i=n(176),u=n(12);class s{constructor(e,t,n,r,o,i,u){this.cp=e,this.isHoleClosing=t,this.isIntersection=n,this.prev=r,this.next=o,this.prevOnCircle=i,this.nextOnCircle=u}get matCurveToNextVertex(){return u.getCurveToNext(this)}getChildren(){let e=[],t=this.next,n=t;do{e.push(n),n=n.nextOnCircle}while(n.nextOnCircle!==t);return e}get vertexChildren(){if(this.isTerminating())return[];let e=this,t=[],n=e;for(;n!==e.prevOnCircle;)n.isTerminating()||t.push(n.next),n=n.nextOnCircle;return t}getAllOnLoop(){let e=this,t=[e],n=this.next;for(;n!==e;)t.push(n),n=n.next;return t}static insert(e,t,n,r,i){let u,l,c=new s(r,e,t);return"undefined"!=typeof _debug_&&_debug_.generated.elems.cpNode.push(new o.CpNodeForDebugging(_debug_.generated,c)),i?l=(u=i).next:(u=c,l=c),l.prev=c,u.next=c,c.prev=u,c.next=l,n.insert(c),c}getCpNodesOnCircle(e=!1){let t=this,n=t,r=[];do{e?e=!1:r.push(n),n=n.nextOnCircle}while(n!==t);return r}static isOnSameCircle(e,t){return e.getCpNodesOnCircle(!0).indexOf(t)>=0}isTerminating(){return this===this.next.prevOnCircle}isFullyTerminating(){return this.prevOnCircle.getCpNodesOnCircle(!0).every(e=>e.isTerminating())}getFirstExit(){let e=this,t=e;for(;t.next===t.prevOnCircle;)if((t=t.next)===e)return;return t}isSharp(){return 0===this.cp.circle.radius}isOneProng(){if(0===this.cp.circle.radius)return!0;let e=this.nextOnCircle,t=this.cp.pointOnShape.p,n=e.cp.pointOnShape.p;return t[0]===n[0]&&t[1]===n[1]}getProngCount(){let e=this,t=e,n=0;do{n++,t=t.nextOnCircle}while(t!==e);return n}getRealProngCount(){return this.isOneProng()?1:this.getProngCount()}}t.CpNode=s,s.comparator=(e,t)=>r.ContactPoint.compare(e.cp,t.cp),s.remove=i.removeCpNode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="function"==typeof WeakMap;t.memoize=function(e){if(!r)return e;let t=new WeakMap;return function(n){let r=t.get(n);return void 0!==r?r:(r=e(n),t.set(n,r),r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(16);t.compress=r.compress;const o=n(121);t.compare=o.compare;const i=n(122);t.abs=i.abs;const u=n(63);t.estimate=u.estimate;const s=n(34);t.expansionDiff=s.expansionDiff;const l=n(17);t.fastExpansionSum=l.fastExpansionSum;const c=n(123);t.fastTwoDiff=c.fastTwoDiff;const a=n(35);t.fastTwoSum=a.fastTwoSum;const f=n(38);t.growExpansion=f.growExpansion;const d=n(64);t.isAdjacent=d.isAdjacent;const p=n(65);t.isOverlapping=p.isOverlapping,t.isNonOverlapping=p.isNonOverlapping,t.isNonOverlappingAll=p.isNonOverlappingAll;const g=n(62);t.merge=g.merge;const h=n(36);t.negativeOf=h.negativeOf;const _=n(124);t.orient2d=_.orient2d;const v=n(41);t.scaleExpansion=v.scaleExpansion;const b=n(68);t.split=b.split;const m=n(69);t.twoDiff=m.twoDiff;const P=n(29);t.twoProduct=P.twoProduct;const x=n(18);t.twoSum=x.twoSum;const M=n(125);t.reduceSignificand=M.reduceSignificand;const w=n(70);t.expansionProduct=w.expansionProduct;const O=n(39);t.parseDouble=O.parseDouble,t.parseDoubleDetailed=O.parseDoubleDetailed;const y=n(126);t.isBitAligned=y.isBitAligned;const C=n(127);t.msbExponent=C.msbExponent;const S=n(128);t.lsbExponent=S.lsbExponent;const I=n(37);t.sign=I.sign;const T=n(129);t.bitLength=T.bitLength;const N=n(130);t.calculate=N.calculate;const B=n(131);t.calculateSum=B.calculateSum;const j=n(25);t.exponent=j.exponent;const D=n(66);t.significand=D.significand;const E=n(132);t.binaryStringToDouble=E.binaryStringToDouble;const A=n(67);t.doubleToBinaryString=A.doubleToBinaryString;const F=n(40);t.doubleToOctets=F.doubleToOctets;const L=n(71);t.octetsToDouble=L.octetsToDouble;const z=n(19);t.getHighestSetBit=z.getHighestSetBit,t.getLowestSetBit=z.getLowestSetBit;const R=n(133);t.isValid=R.isValid},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluate=function(e,t){const n=e.length;return void 0===t?r:r(t);function r(t){if(0===t)return e[0];if(1===t)return e[n-1];let r=1-t;if(4===e.length){let[[n,o],[i,u],[s,l],[c,a]]=e;return[n*Math.pow(r,3)+3*i*Math.pow(r,2)*t+3*s*r*Math.pow(t,2)+c*Math.pow(t,3),o*Math.pow(r,3)+3*u*Math.pow(r,2)*t+3*l*r*Math.pow(t,2)+a*Math.pow(t,3)]}if(3===e.length){let[[n,o],[i,u],[s,l]]=e;return[n*Math.pow(r,2)+2*i*r*t+s*Math.pow(t,2),o*Math.pow(r,2)+2*u*r*t+l*Math.pow(t,2)]}if(2===e.length){let[[n,o],[i,u]]=e;return[n*r+i*t,o*r+u*t]}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);class o{constructor(e,t){this.center=e,this.radius=t}static scale(e,t){return new o(e.center,e.radius*t)}static engulfsCircle(e,t){if(e.radius<=t.radius)return!1;let n=r.squaredDistanceBetween(e.center,t.center),o=e.radius-t.radius;return o*o>n}static toString(e){return"c: "+e.center+" r: "+e.radius}}t.Circle=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.XMLNS="http://www.w3.org/2000/svg"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(31);t.getCurveToNext=function(e){return r.getCurveBetween(e,e.next)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),o=n(0),i=n(134),u=n(1);t.Curve=class{constructor(e,t,n,r,o){this.loop=e,this.ps=t,this.prev=n,this.next=r,this.idx=o}static getCornerAtEnd(e){return c(e)}};const s=.0698;function l(e,t){let n,r,l=u.getInterfaceCcw(e,t),c=l<0,a=l>0,f=e[e.length-2],d=e[e.length-1],p=[d[0]-f[0],d[1]-f[1]],g=t[0],h=t[1],_=[h[0]-g[0],h[1]-g[1]],v=[o.toUnitVector(p),o.toUnitVector(_)],b=o.cross(v[0],v[1]);return o.dot(p,_)>0?(n=b<-s,r=b>+s):(n=c,r=a),new i.Corner(v,b,c,a,n,r)}t.getCorner=l;let c=r.memoize(function(e){return l(e.ps,e.next.ps)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getY=function(e){if(4===e.length){let[[,t],[,n],[,r],[,o]]=e;return[o-3*r+3*n-t,3*r-6*n+3*t,3*n-3*t,t]}if(3===e.length){let[[,t],[,n],[,r]]=e;return[r-2*n+t,2*n-2*t,t]}if(2===e.length){let[[,t],[,n]]=e;return[n-t,t]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.ContactPoint=class{constructor(e,t,n,r){this.pointOnShape=e,this.circle=t,this.order=n,this.order2=r}static compare(e,t){let n=r.PointOnShape.compare(e.pointOnShape,t.pointOnShape);if(void 0!==n)return 0!==n?n:0!==(n=e.order-t.order)?n:e.order2-t.order2}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compress=function(e){let t=e.slice(),n=t.length;if(1===t.length)return t;let r=t[t.length-1],o=n;for(let e=n-2;e>=0;--e){let n=r,i=t[e],u=i-((r=n+i)-n);u&&(t[--o]=r,r=u)}let i=0;for(let e=o;e<n;++e){let n=t[e],o=r-((r=n+r)-n);o&&(t[i++]=o)}return t[i++]=r,t.length=i,0===t.length?[0]:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(62),o=n(35),i=n(18),u=n(16);t.fastExpansionSum=function(e,t){let n=r.merge(e,t);if(1===n.length)return n;let s,l=n.length,c=new Array(l);[c[0],s]=o.fastTwoSum(n[1],n[0]);for(let e=2;e<l;e++)[c[e-1],s]=i.twoSum(s,n[e]);return c[l-1]=s,u.compress(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoSum=function(e,t){let n=e+t,r=n-e;return[e-(n-r)+(t-r),n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(66);function o(e){return Math.log2(e&-e)}function i(e){return e>=128?7:e>=64?6:e>=32?5:e>=16?4:e>=8?3:e>=4?2:e>=2?1:e>=1?0:NaN}t.getLowestSetBit=function(e){if(0===e||!Number.isFinite(e))return NaN;let t=r.significand(e),n=t.length;for(let e=n-1;e>=0;e--){if(0===t[e])continue;let r=o(t[e]);if(Number.isFinite(r))return 8*(n-e-1)+r}return NaN},t.getHighestSetBit=function(e){if(0===e||!Number.isFinite(e))return NaN;let t=r.significand(e),n=t.length;for(let e=0;e<n;e++){let r=i(t[e]);if(Number.isFinite(r))return 8*(n-e-1)+r}return NaN}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getX=function(e){if(4===e.length){let[[t],[n],[r],[o]]=e;return[o-3*r+3*n-t,3*r-6*n+3*t,3*n-3*t,t]}if(3===e.length){let[[t],[n],[r]]=e;return[r-2*n+t,2*n-2*t,t]}if(2===e.length){let[[t],[n]]=e;return[n-t,t]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8);t.splitAt=function(e,t){return 2===e.length?function(e,t){let[[n,r],[o,i]]=e,u=1-t,s=[u*n+t*o,u*r+t*i];return[[[n,r],s],[s,[o,i]]]}(e,t):3===e.length?function(e,t){let[[n,r],[o,i],[u,s]]=e,l=1-t,c=[n*Math.pow(l,2)+2*o*l*t+u*Math.pow(t,2),r*Math.pow(l,2)+2*i*l*t+s*Math.pow(t,2)];return[[[n,r],[n*l+o*t,r*l+i*t],c],[c,[o*l+u*t,i*l+s*t],[u,s]]]}(e,t):4===e.length?function(e,t){let[[n,r],[o,i],[u,s],[l,c]]=e,a=1-t,f=[l*Math.pow(t,3)+3*u*a*Math.pow(t,2)+3*o*Math.pow(a,2)*t+n*Math.pow(a,3),c*Math.pow(t,3)+3*s*a*Math.pow(t,2)+3*i*Math.pow(a,2)*t+r*Math.pow(a,3)],d=[[n,r],[o*t+n*a,i*t+r*a],[u*Math.pow(t,2)+2*o*a*t+n*Math.pow(a,2),s*Math.pow(t,2)+2*i*a*t+r*Math.pow(a,2)],f],p=[f,[l*Math.pow(t,2)+2*u*t*a+o*Math.pow(a,2),c*Math.pow(t,2)+2*s*t*a+i*Math.pow(a,2)],[l*t+u*a,c*t+s*a],[l,c]];return[d,p]}(e,t):[]},t.splitAtPrecise=function(e,t){return 2===e.length?function(e,t){let[[n,o],[i,u]]=e,s=1-t,l=[r.estimate(r.fastExpansionSum(r.twoProduct(s,n),r.twoProduct(t,i))),r.estimate(r.fastExpansionSum(r.twoProduct(s,o),r.twoProduct(t,u)))];return[[[n,o],l],[l,[i,u]]]}(e,t):3===e.length?function(e,t){let[[n,o],[i,u],[s,l]]=e,c=1-t,a=r.twoProduct(t,t),f=r.twoProduct(c,c),d=r.twoProduct(c,t),p=[r.estimate(r.calculateSum([r.scaleExpansion(f,n),r.scaleExpansion(d,2*i),r.scaleExpansion(a,s)])),r.estimate(r.calculateSum([r.scaleExpansion(f,o),r.scaleExpansion(d,2*u),r.scaleExpansion(a,l)]))],g=[[n,o],[r.estimate(r.fastExpansionSum(r.twoProduct(n,c),r.twoProduct(i,t))),r.estimate(r.fastExpansionSum(r.twoProduct(o,c),r.twoProduct(u,t)))],p],h=[p,[r.estimate(r.fastExpansionSum(r.twoProduct(i,c),r.twoProduct(s,t))),r.estimate(r.fastExpansionSum(r.twoProduct(u,c),r.twoProduct(l,t)))],[s,l]];return[g,h]}(e,t):4===e.length?function(e,t){let[[n,o],[i,u],[s,l],[c,a]]=e,f=1-t,d=r.twoProduct(f,f),p=r.scaleExpansion(d,f),g=r.twoProduct(t,t),h=r.scaleExpansion(g,t),_=r.twoProduct(f,t),v=r.scaleExpansion(g,f),b=r.scaleExpansion(d,t),m=[r.estimate(r.calculateSum([r.scaleExpansion(h,c),r.scaleExpansion(v,3*s),r.scaleExpansion(b,3*i),r.scaleExpansion(p,n)])),r.estimate(r.calculateSum([r.scaleExpansion(h,a),r.scaleExpansion(v,3*l),r.scaleExpansion(b,3*u),r.scaleExpansion(p,o)]))],P=[[n,o],[r.estimate(r.fastExpansionSum(r.twoProduct(i,t),r.twoProduct(n,f))),r.estimate(r.fastExpansionSum(r.twoProduct(u,t),r.twoProduct(o,f)))],[r.estimate(r.calculateSum([r.scaleExpansion(g,s),r.scaleExpansion(_,2*i),r.scaleExpansion(d,n)])),r.estimate(r.calculateSum([r.scaleExpansion(g,l),r.scaleExpansion(_,2*u),r.scaleExpansion(d,o)]))],m],x=[m,[r.estimate(r.calculateSum([r.scaleExpansion(g,c),r.scaleExpansion(_,2*s),r.scaleExpansion(d,i)])),r.estimate(r.calculateSum([r.scaleExpansion(g,a),r.scaleExpansion(_,2*l),r.scaleExpansion(d,u)]))],[r.estimate(r.fastExpansionSum(r.twoProduct(c,t),r.twoProduct(s,f))),r.estimate(r.fastExpansionSum(r.twoProduct(a,t),r.twoProduct(l,f)))],[c,a]];return[P,x]}(e,t):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(2),i=n(7),u=Number.POSITIVE_INFINITY;let s=i.memoize(function(e){let t=[[{bezier:void 0,t:void 0,val:u},{bezier:void 0,t:void 0,val:u}],[{bezier:void 0,t:void 0,val:-u},{bezier:void 0,t:void 0,val:-u}]];return e.curves.forEach(function(e){let n=e.ps,o=r.getBounds(n);for(let n=0;n<2;n++)for(let r=0;r<2;r++){let i=o.box[n][r],u=0===n?-1:1,s=t[n][r].val;(u*i>u*s||i===s&&o.ts[n][r]>t[n][r].t)&&(t[n][r]={bezier:e,t:o.ts[n][r],val:i})}}),{minX:new o.PointOnShape(t[0][0].bezier,t[0][0].t),minY:new o.PointOnShape(t[0][1].bezier,t[0][1].t),maxX:new o.PointOnShape(t[1][0].bezier,t[1][0].t),maxY:new o.PointOnShape(t[1][1].bezier,t[1][1].t)}});t.getLoopBounds=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Mat=class{constructor(e,t){this.cpNode=e,this.cpTrees=t}}},function(e,t,n){"use strict";function r(e,t){let n=e.length-1,r=t.length-1,o=n-r,i=0,u=0;o>0?u=-o:o<0&&(i=+o);let l=Math.max(n,r),c=[];for(let n=0;n<l+1;n++){let r=e[n+i],o=t[n+u];c.push((r||0)-(o||0))}return s(c)}function o(e){let t=[],n=e.length-1;for(let r=0;r<n;r++)t.push((n-r)*e[r]);return t}function i(e,t){let n=e.length-1,r=t.length-1,o=n+r,i=new Array(o+1).fill(0);for(let u=0;u<n+1;u++)for(let s=0;s<r+1;s++)i[o-(u+s)]+=e[n-u]*t[r-s];return s(i)}function u(e,t){if(0===e)return[];let n=t.length-1,r=[];for(let o=0;o<n+1;o++)r.push(e*t[o]);return s(r)}function s(e){return 0!==e[0]?e:s(e.slice(1))}function l(e){let t=0;for(let n=0;n<e.length;n++){let r=Math.abs(e[n]);r>t&&(t=r)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.equal=function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.add=function(e,t){let n=e.length-1,r=t.length-1,o=n-r,i=0,u=0;o>0?u=-o:o<0&&(i=+o);let l=Math.max(n,r),c=[];for(let n=0;n<l+1;n++){let r=e[n+i],o=t[n+u];c.push((r||0)+(o||0))}return s(c)},t.subtract=r,t.negate=function(e){return u(-1,e)},t.differentiate=o,t.multiply=i,t.multiplyByConst=u,t.degree=function(e){return e.length-1},t.evaluate=function(e,t){function n(t){if(0===e.length)return 0;let n=e[0];for(let r=1;r<e.length;r++)n=e[r]+n*t;return n}return void 0===t?n:n(t)},t.evaluateAt0=function(e){return e[e.length-1]},t.signChanges=function(e){let t=e.length-1,n=0,r=Math.sign(e[0]);for(let o=1;o<t+1;o++){let t=Math.sign(e[o]);t!==r&&0!==t&&(n++,r=t)}return n},t.deflate=function(e,t){let n=e.length-1,r=[e[0]];for(let o=1;o<n;o++)r.push(e[o]+t*r[o-1]);return r},t.invert=function(e){return e.slice().reverse()},t.changeVariables=function(e,t,n){let r=e.length-1,o=[];for(let e=0;e<r+1;e++)o.push(new Array(r+1).fill(0));o[0][0]=1;for(let e=1;e<=r;e++){o[0][e]=n*o[0][e-1];for(let r=1;r<=e;r++)o[r][e]=n*o[r][e-1]+t*o[r-1][e-1]}let i=new Array(r+1).fill(0);for(let t=0;t<=r;t++){i[r-t]=0;for(let n=t;n<=r;n++){let u=o[t][n]*e[r-n];i[r-t]+=u}}return i},t.reflectAboutYAxis=function(e){let t=e.length-1,n=e.slice();for(let e=0;e<t+1;e++)e%2&&(n[e]=-n[e]);return n},t.sturmChain=function(e){function t(e,t){e.length,t.length;let n=e[1]/e[0]-t[1]/t[0];return r(i(u(e[0]/t[0],t),[1,n]),e)}let n=[];n.push(e),n.push(o(e));let s=1;for(;n[s].length-1>0;){let e=t(n[s-1],n[s]);for(;n[s].length-e.length<1;)e.shift();n.push(e),s++}return n},t.clip=function e(t,n){n=void 0===n?Number.EPSILON:n;let r=l(t);if(0===r)return[];if(Math.abs(t[0])>n*r)return t;let o=t.slice(1);for(;Math.abs(o[0])<n*r;)o=o.slice(1);return e(o,n)},t.clip0=s,t.maxCoefficient=l,t.toCasStr=function(e){let t=e.length-1,n="";for(let r=0;r<t+1;r++){let o=e[r].toString();n+=r===t?o:r===t-1?"x*"+o+" + ":"x^"+(t-r).toString()+"*"+o+" + "}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(39);t.exponent=function(e){return r.parseDouble(e).exponent}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9),o=n(21);t.fromTo=function(e){return function(t,n){let i,u=t>n;if(t>n&&([t,n]=[n,t]),0===t&&1===n)i=e;else if(0===t)i=o.splitAt(e,n)[0];else if(1===n)i=o.splitAt(e,t)[1];else if(t===n){let n=r.evaluate(e,t);if(2===e.length)return[n,n];if(3===e.length)return[n,n,n];if(4===e.length)return[n,n,n,n]}else i=o.splitAt(o.splitAt(e,t)[1],(n-t)/(1-t))[0];return u?i.slice().reverse():i}},t.fromToPrecise=function(e){return function(t,n){let i,u=t>n;if(t>n&&([t,n]=[n,t]),0===t&&1===n)i=e;else if(0===t)i=o.splitAtPrecise(e,n)[0];else if(1===n)i=o.splitAtPrecise(e,t)[1];else if(t===n){let n=r.evaluate(e,t);if(2===e.length)return[n,n];if(3===e.length)return[n,n,n];if(4===e.length)return[n,n,n,n]}else i=o.splitAtPrecise(o.splitAtPrecise(e,t)[1],(n-t)/(1-t))[0];return u?i.slice().reverse():i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(2),i=n(103),u=n(199);t.getClosestBoundaryPoint=function(e,t,n,s){e=i.cullBezierPieces(e,t);let l,c=Number.POSITIVE_INFINITY;for(let i=0;i<e.length;i++){let a=e[i],f=u.closestPointOnCurve(a.curve,t,a.ts,n,s);if(void 0===f)continue;let d=r.distanceBetween(f.p,t),p=a.curve,g=f.t;d<c&&(0===g&&(g=1,p=a.curve.prev),l={pos:new o.PointOnShape(p,g),d:d},c=d)}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(3);const r=n(13);class o{constructor(e=[]){this.beziers=e,this.curves=[];let t,n=this;if(0===e.length)return;let o,i=null;for(let u=0;u<e.length;u++)o=new r.Curve(n,e[u],i,null,u),n.curves.push(o),i&&(i.next=o),i=o,0===u&&(t=o);t.prev=o,o.next=t,this.head=t}}t.Loop=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(68);t.twoProduct=function(e,t){let n=e*t,[o,i]=r.split(e),[u,s]=r.split(t);return[i*s-(n-o*u-i*u-o*s),n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.lengthUpperBound=function(e){let t=0;for(let n=0;n<e.length-1;n++)t+=r.distanceBetween(e[n],e[n+1]);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(99),i=n(177),u=.01,s=1e-4;t.getCurveBetween=function(e,t){let n,l=e.cp.circle.center,c=i.getEdgeDirection(e),a=t.cp.circle.center,f=i.getEdgeDirection(t.prevOnCircle),d=o.lineLineIntersection(c,f),p=r.fromTo(l,a);if(d){let e=r.fromTo(l,d),t=r.fromTo(a,d);n=r.dot(e,p)<0||r.dot(t,p)>0}else n=!0;if(!n)return[l,d,a];let g=r.rotate90Degrees(p),h=r.fromTo(c[0],c[1]),_=r.fromTo(f[0],f[1]),v=Math.abs(r.cross(p,h))/9,b=Math.abs(r.cross(p,_))/9;if(v>u||b>u)return[l,a];if(v>s||b>s){let e=r.interpolate(l,a,1/3),t=r.interpolate(l,a,2/3),n=[e,r.translate(g,e)],i=[t,r.translate(g,t)];return[l,o.lineLineIntersection(c,n),o.lineLineIntersection(f,i),a]}return[l,a]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),o=n(22);let i=r.memoize(function(e){let t,n,r,i,u=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;for(let a of e){let e=o.getLoopBounds(a);e.minX.p[0]<u&&(t=e.minX,u=e.minX.p[0]),e.maxX.p[0]>s&&(n=e.maxX,s=e.maxX.p[0]),e.minY.p[1]<l&&(r=e.minY,l=e.minY.p[1]),e.maxY.p[1]>c&&(i=e.maxY,c=e.maxY.p[1])}return{minX:t,minY:r,maxX:n,maxY:i}});t.getShapeBounds=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6),o=n(15);t.getNeighbouringPoints=function(e,t,n,i){let u=e.findBounds(new r.CpNode(new o.ContactPoint(t,void 0,n,i),!1,!1));return u[0]||u[1]?u[0]&&u[1]?[u[0].data,u[1].data]:[e.max(e.root),e.min(e.root)]:[void 0,void 0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),o=n(36);t.expansionDiff=function(e,t){let n=o.negativeOf(t);return r.fastExpansionSum(e,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fastTwoSum=function(e,t){let n=e+t;return[t-(n-e),n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.negativeOf=function(e){let t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=-e[r];return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sign=function(e){return 0===e.length?0:Math.sign(e[e.length-1])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(18),o=n(16);t.growExpansion=function(e,t){let n=e.length,i=t,u=new Array(n+1);for(let t=0;t<n;t++)[u[t],i]=r.twoSum(i,e[t]);return u[n]=i,o.compress(u)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(67),o=n(40);t.parseDouble=function(e){let t=o.doubleToOctets(e),n=t[0],r=t[1],i=n>>7,u=((127&n)<<4)+((240&r)>>4),s=0===u?0:16,l=0===u?u-1022:u-1023,c=t.slice(1);return c[0]=(15&r)+s,{sign:i,exponent:l,significand:c}},t.parseDoubleDetailed=function(e){let t=r.doubleToBinaryString(e),[,n,o,i]=t.match(/^(.)(.{11})(.{52})$/),u=0===parseInt(o,2)?"0":"1";return{full:n+o+u+i,sign:n,exponent:o,hidden:u,significand:i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doubleToOctets=function(e){var t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e,!1),Array.from(new Uint8Array(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(29),o=n(18),i=n(35),u=n(16);t.scaleExpansion=function(e,t){let n,s,l=e.length,c=new Array(2*l);[c[0],n]=r.twoProduct(e[0],t);for(let u=1;u<l;u++){let[l,a]=r.twoProduct(e[u],t);[c[2*u-1],s]=o.twoSum(n,l),[c[2*u],n]=i.fastTwoSum(a,s)}return c[2*l-1]=n,u.compress(c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDx=function(e){if(4===e.length){let[[t],[n],[r],[o]]=e;return[3*o-9*r+9*n-3*t,6*r-12*n+6*t,3*n-3*t]}if(3===e.length){let[[t],[n],[r]]=e;return[2*r-4*n+2*t,2*n-2*t]}if(2===e.length){let[[t],[n]]=e;return[n-t]}return[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDy=function(e){if(4===e.length){let[[,t],[,n],[,r],[,o]]=e;return[3*o-9*r+9*n-3*t,6*r-12*n+6*t,3*n-3*t]}if(3===e.length){let[[,t],[,n],[,r]]=e;return[2*r-4*n+2*t,2*n-2*t]}if(2===e.length){let[[,t],[,n]]=e;return[n-t]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(42);t.evaluateDx=function(e,t){const n=o.getDx(e),i=r.evaluate(n);return void 0===t?i:i(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(43);t.evaluateDy=function(e,t){const n=o.getDy(e),i=r.evaluate(n);return void 0===t?i:i(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(86),o=n(9),i=n(0),u=n(3);t.closestPointOnBezier=function(e,t){let n=r.getTangentPolyFromPoint(e,t),s=u.allRoots(n,0,1);s.push(0),s.push(1);let l=o.evaluate(e),c=s.map(e=>({p:l(e),t:e})),a=Number.POSITIVE_INFINITY,f=void 0;return c.forEach(e=>{let n=i.squaredDistanceBetween(e.p,t);n<a&&(a=n,f=e)}),f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(11);t.circle=function(e,t,n=r.DEFAULT_CLASS,i){let u=t.center,s=t.radius,l=document.createElementNS(o.XMLNS,"circle");return l.setAttributeNS(null,"cx",u[0].toString()),l.setAttributeNS(null,"cy",u[1].toString()),l.setAttributeNS(null,"r",s.toString()),l.setAttributeNS(null,"class",n),e.appendChild(l),i&&setTimeout(()=>l.remove(),i),[l]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(47),i=n(49);t.crossHair=function(e,t,n=r.DEFAULT_CLASS,u=3,s){let l={center:t,radius:u},c=o.circle(e,l,n),a=[[t[0]-u,t[1]],[t[0]+u,t[1]]],f=[[t[0],t[1]-u],[t[0],t[1]+u]],d=i.line(e,a,n),p=i.line(e,f,n);return s&&setTimeout(()=>{c.forEach(e=>e.remove()),d.forEach(e=>e.remove()),p.forEach(e=>e.remove())},s),[...c,...d,...p]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(11);t.line=function(e,t,n=r.DEFAULT_CLASS,i){let u=document.createElementNS(o.XMLNS,"line");return u.setAttributeNS(null,"x1",t[0][0].toString()),u.setAttributeNS(null,"y1",t[0][1].toString()),u.setAttributeNS(null,"x2",t[1][0].toString()),u.setAttributeNS(null,"y2",t[1][1].toString()),u.setAttributeNS(null,"class",n),e.appendChild(u),i&&setTimeout(()=>u.remove(),i),[u]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(49),i=n(87),u=n(88);t.bezier=function(e,t,n=r.DEFAULT_CLASS,s){return 2===t.length?o.line(e,t,n,s):3===t.length?i.quadBezier(e,t,n,s):4===t.length?u.cubicBezier(e,t,n,s):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(44),o=n(45),i=n(80),u=n(81),s=n(8),l=n(75),c=n(76),a=n(77);t.κ=function(e,t){let n=r.evaluateDx(e),s=o.evaluateDy(e),l=i.evaluateDdx(e),c=u.evaluateDdy(e);function a(e){let t=n(e),r=s(e),o=l(e);return(t*c(e)-r*o)/Math.sqrt(Math.pow(t*t+r*r,3))}return void 0===t?a:a(t)},t.compareCurvaturesAtInterface=function(e,t){let[n,r]=l.getDxyAt0(e),[o,i]=c.getDdxyAt0(e),[u,f]=l.getDxyAt0(t),[d,p]=c.getDdxyAt0(t),g=s.expansionDiff(s.twoProduct(n,i),s.twoProduct(r,o)),h=s.expansionDiff(s.twoProduct(u,p),s.twoProduct(f,d)),_=s.sign(g),v=s.sign(h);if(_!==v)return _-v;let b=s.fastExpansionSum(s.twoProduct(u,u),s.twoProduct(f,f)),m=s.fastExpansionSum(s.twoProduct(n,n),s.twoProduct(r,r)),P=s.expansionProduct(b,b),x=s.expansionProduct(P,b),M=s.expansionProduct(m,m),w=s.expansionProduct(M,m);if(0!==_||0!==v){let e=s.expansionProduct(g,g),t=s.expansionProduct(h,h),n=s.expansionProduct(e,x),r=s.expansionProduct(t,w),o=s.sign(s.expansionDiff(n,r));if(0!==o)return _>0?o:-o}let[O,y]=a.getDddxy(e),[C,S]=a.getDddxy(t),I=s.expansionDiff(s.twoProduct(n,y),s.twoProduct(r,O)),T=s.fastExpansionSum(s.twoProduct(n,o),s.twoProduct(r,i)),N=s.expansionDiff(s.twoProduct(u,S),s.twoProduct(f,C)),B=s.fastExpansionSum(s.twoProduct(u,d),s.twoProduct(f,p)),j=s.expansionDiff(s.expansionProduct(m,I),s.scaleExpansion(s.expansionProduct(g,T),3)),D=s.expansionDiff(s.expansionProduct(b,N),s.scaleExpansion(s.expansionProduct(h,B),3)),E=s.sign(j),A=s.sign(D);if(_!==v)return E-A;if(0===E&&0===A)return 0;let F=s.expansionProduct(j,j),L=s.expansionProduct(P,x),z=s.expansionProduct(D,D),R=s.expansionProduct(M,w),Y=s.expansionProduct(F,L),H=s.expansionProduct(z,R),q=s.sign(s.expansionDiff(Y,H));return E>0?q:-q}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BezierPiece=class{constructor(e,t){this.curve=e,this.ts=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(52),o=n(2),i=n(15);function u(e,t,n,o){let i=t;do{let t=(i=i.next)===n?o:1;e.push(new r.BezierPiece(i,[0,t]))}while(i!==n)}t.getBoundaryPieceBeziers=function(e){let t=e[0],n=e[1],s=[],l=!0;do{if(!l){l=!0,t=t.prevOnCircle;continue}l=!1;let e=t.cp.pointOnShape,n=t.next.cp.pointOnShape;n.curve===e.curve&&o.PointOnShape.isQuiteSharpCorner(e)&&o.PointOnShape.isQuiteSharpCorner(n)||(n.curve===e.curve&&i.ContactPoint.compare(t.next.cp,t.cp)>0?s.push(new r.BezierPiece(e.curve,[e.t,n.t])):(s.push(new r.BezierPiece(e.curve,[e.t,1])),t.cp.pointOnShape.curve.loop===t.next.cp.pointOnShape.curve.loop&&u(s,e.curve,n.curve,n.t))),t=t.next}while(t!==n);return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(33),i=.9986295347545738;t.isAnotherCpCloseby=function(e,t,n,u,s,l,c){const a=1e-4*l;let f=e.get(t.curve.loop),d=o.getNeighbouringPoints(f,t,u,s);if(!d[0])return!1;for(let e of d){let o=e.cp.pointOnShape,u=t.p,s=o.p;if(r.distanceBetween(u,s)>a)continue;let l=r.toUnitVector(r.fromTo(e.cp.pointOnShape.p,e.cp.circle.center)),c=r.toUnitVector(r.fromTo(u,n.center));if(r.dot(l,c)>i)return!0}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(107),o=n(6);t.createNewCpTree=function(e){let t=new Map;return e.getAllOnLoop().forEach(function(e){let n=e.cp.pointOnShape.curve.loop,i=t.get(n);i||(i=new r.default(o.CpNode.comparator,[],!0),t.set(n,i));i.insert(e)}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLeaves=function(e){let t=[];return e.getAllOnLoop().forEach(function(e){e.isTerminating()&&t.push(e)}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.traverseEdges=function(e,t){let n=e.getCpNodesOnCircle();for(;n.length;){let e=n.pop();t(e),e.isTerminating()||n.push(...e.getChildren())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(0),i=n(12),u=1;t.getBranches=function(e,t=u){for(;!e.isFullyTerminating();)e=e.next;let n=[],s=[e.prevOnCircle],l=[];for(;s.length;){let e=s.pop();l.push(e);let u=e.getChildren();if(e.isFullyTerminating()){l.length>1&&n.push(l),l=[];continue}if(1===u.length){s.push(u[0]);continue}if(0===(u=u.filter(e=>!e.isTerminating())).length){n.push(l),l=[];continue}if(u.length>1){n.push(l),l=[],s.push(...u);continue}let c=r.tangent(i.getCurveToNext(e.next.prevOnCircle),0),a=r.tangent(i.getCurveToNext(u[0]),0),f=o.cross(c,a);Math.abs(Math.asin(f)*(180/Math.PI))>t&&(n.push(l),l=[]),s.push(u[0])}return l.length&&n.push(l),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(24);t.quadraticRoots=function(e){let t,n,[r,o,i]=e,u=o*o-4*r*i;return u<0?[]:0===u?[-o/(2*r)]:(u=Math.sqrt(u),o>=0?(t=(-o-u)/(2*r),n=2*i/(-o-u)):(t=2*i/(-o+u),n=(-o+u)/(2*r)),t<n?[t,n]:[n,t])},t.numRootsWithin=function(e,t,n){let o=r.sturmChain(e),i=(r.evaluate(e),o.map(e=>r.evaluate(e)(t))),u=o.map(e=>r.evaluate(e)(n));return r.signChanges(i)-r.signChanges(u)},t.bisection=function(e,t,n){if(t===n)return t;n<t&&([t,n]=[n,t]);let r=e(t),o=e(n);if(0===r)return t;if(0===o)return n;if(r*o>0)throw new Error("Root not bracketed");for(;;){let o=t+(n-t)/2,i=e(o);if(0===i)return o;r*i<0?n=o:t=o;let u=2*Number.EPSILON*Math.abs(n);if(Math.abs(t-n)<=u)return n}},t.brent=function(e,t,n){if(t===n)return t;let r,o=e(t),i=e(n);if(o*i>0)throw new Error("Root not bracketed");if(Math.abs(o)<Math.abs(i)){r=t,t=n,n=r;let e=o;o=i,i=e}r=t;let u,s=!0;for(;;){let l,c=2*Number.EPSILON*Math.abs(n),a=e(r);if(o!==a&&i!==a){let e=o-a,u=o-i,s=i-a;l=((t*i*s-n*o*e)*a+r*o*u*i)/(u*e*s)}else l=n-i*((n-t)/(i-o));let f=(3*t+n)/4,d=Math.abs(n-r),p=Math.abs(l-n),g=Math.abs(r-u);!(l>f&&l<n||l<f&&l>n)||s&&(p>=d/2||d<c)||!s&&(p>=g/2||g<c)?(l=(t+n)/2,s=!0):s=!1;let h=e(l);if(u=r,r=n,o*h<0?n=l:t=l,Math.abs(o)<Math.abs(i)){let e=t;t=n,n=e}if(0===i)return n;if(0===h)return l;if(Math.abs(t-n)<=c)return n;o=e(t),i=e(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(24);t.rootMagnitudeUpperBound_rouche=function(e){var t;return e.length,1+1/e[0]*(t=e.slice(1),Math.max(...t.map(e=>Math.abs(e))))},t.rootMagnitudeUpperBound_fujiwara=function(e){let t=e.length-1,n=e[0],r=[];for(let o=1;o<t;o++){let t=Math.pow(Math.abs(e[o]/n),1/o);r.push(t)}return r.push(Math.pow(Math.abs(e[t]/2*n),1/t)),2*Math.max.apply(void 0,r)};const o=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152];function i(e){let t=e.length-1;if(t<1)return 0;e[0]<0&&(e=r.negate(e));let n=[];for(let e=0;e<t;e++)n.push(1);let i=0;for(let r=0;r<=t;r++){if(e[r]>=0)continue;let t=Number.POSITIVE_INFINITY,u=!1;for(let i=0;i<r;i++){if(e[i]<=0)continue;let s,l=n[i];s=l>20?Math.pow(2,l):o[l];let c=Math.pow(-e[r]/(e[i]/s),1/(r-i));n[i]++,t>c&&(t=c),u=!0}u&&i<t&&(i=t)}return i}function u(e){let t=i(r.invert(e));return 0===t?0:1/t}t.positiveRootUpperBound_LMQ=i,t.positiveRootLowerBound_LMQ=u,t.negativeRootUpperBound_LMQ=function(e){return-u(r.reflectAboutYAxis(e))},t.negativeRootLowerBound_LMQ=function(e){return-i(r.reflectAboutYAxis(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(24);t.fromRoots=function(e){let t=[1];for(let n=0;n<e.length;n++)t=r.multiply(t,[1,-e[n]]);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.merge=function(e,t){let n=e.length,r=t.length,o=0,i=0,u=[];for(;o<n&&i<r;)0!==e[o]?0!==t[i]?Math.abs(e[o])<=Math.abs(t[i])?(u.push(e[o]),o++):(u.push(t[i]),i++):i++:o++;for(;o<n;)u.push(e[o]),o++;for(;i<r;)u.push(t[i]),i++;return 0===u.length?[0]:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.estimate=function(e){let t=e[0];for(let n=1;n<e.length;n++)t+=e[n];return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(65);t.isAdjacent=function(e,t){return r.isOverlapping(e,t)||r.isOverlapping(e,2*t)||r.isOverlapping(2*e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(19),o=n(25);function i(e,t){return!u(e,t)}function u(e,t){if(0===e||0===t)return!0;Math.abs(t)>Math.abs(e)&&([e,t]=[t,e]);let n=r.getLowestSetBit(e),i=r.getHighestSetBit(t);return n+(o.exponent(e)-o.exponent(t))>i}t.isOverlapping=i,t.isNonOverlapping=u,t.isNonOverlappingAll=function(e){for(let t=1;t<e.length;t++)if(i(e[t-1],e[t]))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(39);t.significand=function(e){return r.parseDouble(e).significand}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(40);function o(e){let t=e.toString(2);for(;t.length<8;t="0"+t);return t}t.doubleToBinaryString=function(e){return r.doubleToOctets(e).map(o).join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=Math.pow(2,27)+1;t.split=function(e){let t=r*e,n=t-(t-e);return[n,e-n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.twoDiff=function(e,t){let n=e-t,r=e-n;return[e-(n+r)+(r-t),n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(17),o=n(41),i=n(16);t.expansionProduct=function(e,t){let n=[0];for(let i=0;i<e.length;i++)n=r.fastExpansionSum(n,o.scaleExpansion(t,e[i]));return i.compress(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.octetsToDouble=function(e){var t=new ArrayBuffer(8);return new Uint8Array(t).set(e),new DataView(t).getFloat64(0,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gaussQuadrature=function(e,t,n=16){if(t[0]===t[1])return 0;let{weights:o,abscissas:i}=r[n],[u,s]=t,l=0,c=(s-u)/2,a=(s+u)/2;for(let t=0;t<=n-1;t++)l+=o[t]*e(c*i[t]+a);return c*l};const r={2:{weights:[1,1],abscissas:[-.5773502691896257,.5773502691896257]},4:{weights:[.6521451548625461,.6521451548625461,.3478548451374538,.3478548451374538],abscissas:[-.3399810435848563,.3399810435848563,-.8611363115940526,.8611363115940526]},8:{weights:[.362683783378362,.362683783378362,.3137066458778873,.3137066458778873,.2223810344533745,.2223810344533745,.1012285362903763,.1012285362903763],abscissas:[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363]},16:{abscissas:[-.9894009349916499,-.9445750230732326,-.8656312023878318,-.755404408355003,-.6178762444026438,-.45801677765722737,-.2816035507792589,-.09501250983763744,.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],weights:[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685,.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDdx=function(e){if(4===e.length){let[[t],[n],[r],[o]]=e;return[6*o-18*r+18*n-6*t,6*r-12*n+6*t]}if(3===e.length){let[[t],[n],[r]]=e;return[2*r-4*n+2*t]}if(2===e.length)return[0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDdy=function(e){if(4===e.length){let[[,t],[,n],[,r],[,o]]=e;return[6*o-18*r+18*n-6*t,6*r-12*n+6*t]}if(3===e.length){let[[,t],[,n],[,r]]=e;return[2*r-4*n+2*t]}if(2===e.length)return[0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDxyAt0=function(e){if(4===e.length){let[[t,n],[r,o]]=e;return[3*r-3*t,3*o-3*n]}if(3===e.length){let[[t,n],[r,o]]=e;return[2*r-2*t,2*o-2*n]}if(2===e.length){let[[t,n],[r,o]]=e;return[r-t,o-n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDdxyAt0=function(e){if(4===e.length){let[[t,n],[r,o],[i,u]]=e;return[6*i-12*r+6*t,6*u-12*o+6*n]}if(3===e.length){let[[t,n],[r,o],[i,u]]=e;return[2*i-4*r+2*t,2*u-4*o+2*n]}if(2===e.length)return[0,0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDddxy=function(e){if(4===e.length){let[[t,n],[r,o],[i,u],[s,l]]=e;return[6*s-18*i+18*r-6*t,6*l-18*u+18*o-6*n]}if(3===e.length||2===e.length)return[0,0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(20);t.evaluateX=function(e,t){const n=o.getX(e),i=r.evaluate(n),u=e.length;function s(t){return 0===t?e[0][0]:1===t?e[u-1][0]:i(t)}return void 0===t?s:s(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(14);t.evaluateY=function(e,t){const n=o.getY(e),i=r.evaluate(n),u=e.length;function s(t){return 0===t?e[0][1]:1===t?e[u-1][1]:i(t)}return void 0===t?s:s(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(73),o=n(3);t.evaluateDdx=function(e,t){const n=r.getDdx(e),i=o.evaluate(n);return void 0===t?i:i(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(74),o=n(3);t.evaluateDdy=function(e,t){const n=r.getDdy(e),i=o.evaluate(n);return void 0===t?i:i(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(44),o=n(45);t.tangent=function(e,t){const n=r.evaluateDx(e),i=o.evaluateDy(e);function u(e){let t=n(e),r=i(e),o=Math.sqrt(t*t+r*r);return[t/o,r/o]}return void 0===t?u:u(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(82);t.normal=function(e,t){const n=r.tangent(e);function o(e){let t=n(e);return[t[1],-t[0]]}return void 0===t?o:o(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(9),i=n(85),u=n(83);function s(e,t,n){let s=o.evaluate(e)(n),l=u.normal(e)(n),c=r.translate(s,l),a=i.lineIntersection(t,[s,c]),f=void 0,d=void 0,p=Number.POSITIVE_INFINITY;for(let e of a){let n=o.evaluate(t)(e),i=r.distanceBetween(n,s);i<p&&(f=e,d=n,p=i)}return{t:f,p:d,d:p}}t.coincident=function(e,t,n=1e-6){let r=[.01,.99].map(n=>s(e,t,n)),o=[.01,.99].map(n=>s(t,e,n)),i=.01,u=.99,l=.01,c=.99;r[0].d<=n&&(i=r[0].t),r[1].d<=n&&(u=r[1].t),o[0].d<=n&&(l=o[0].t),o[1].d<=n&&(c=o[1].t),l>c&&([l,c]=[c,l]),i>u&&([i,u]=[u,i]);let a=c-l;if(a<.1&&u-i<.1)return;for(let r=0;r<10;r++){let o=l+a*(r/10),{d:i}=s(e,t,o);if(i>n)return}return{p:[l,c],q:[i,u]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(0),i=n(14);t.lineIntersection=function(e,t){let[[n,u],[s,l]]=t,[c,a]=[s-n,l-u];if(0===c&&0===a)return[];e=o.translatePs([-n,-u],e);let f=Math.sqrt(c*c+a*a),d=a/f,p=c/f;return e=o.rotatePs(-d,p,e),r.allRoots(i.getY(e),0,1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTangentPolyFromPoint=function(e,t){return 4===e.length?function(e,t){let[[n,r],[o,i],[u,s],[l,c]]=e,[a,f]=t,d=n-a,p=o-a,g=u-a,h=l-a,_=r-f,v=i-f,b=s-f,m=c-f,P=d*d,x=6*d*p,M=6*d*g,w=2*d*h,O=9*p*p,y=18*p*g,C=6*p*h,S=9*g*g,I=6*g*h,T=_*_,N=6*_*v,B=6*_*b,j=2*_*m,D=9*v*v,E=18*v*b,A=6*v*m,F=9*b*b,L=6*b*m;return[6*(h*h-I+C-w+S-y+M+O-x+P+(m*m-L+A-j+F-E+B+D-N+T)),5*(I-2*C+3*w-2*S+3*y-4*M-4*O+5*x-6*P+(L-2*A+3*j-2*F+3*E-4*B-4*D+5*N-6*T)),4*(C-3*w+S-3*y+6*M+6*O-10*x+15*P+(A-3*j+F-3*E+6*B+6*D-10*N+15*T)),3*(w+y-4*M-4*O+10*x-20*P+(j+E-4*B-4*D+10*N-20*T)),2*(M+O-5*x+15*P+(B+D-5*N+15*T)),x-6*P+(N-6*T)]}(e,t):3===e.length?function(e,t){let[[n,r],[o,i],[u,s]]=e,[l,c]=t,a=n-l,f=o-l,d=u-l,p=r-c,g=i-c,h=s-c,_=1*a*a,v=1*a*f,b=1*a*d,m=1*f*f,P=1*f*d,x=1*p*p,M=1*p*g,w=1*p*h,O=1*g*g,y=1*g*h;return[4*(1*h*h+2*w-4*y+4*O-4*M+x+1*d*d+2*b-4*P+4*m-4*v+_),12*(y-w-2*O+3*M-x+P-b-2*m+3*v-_),4*(w+2*O-6*M+3*x+b+2*m-6*v+3*_),4*(M-x+v-_)]}(e,t):2===e.length?function(e,t){let[[n,r],[o,i]]=e,[u,s]=t,l=n-u,c=o-u,a=r-s,f=i-s,d=1*l*l,p=1*l*c,g=1*a*a,h=1*a*f;return[2*(1*f*f-2*h+g+1*c*c-2*p+d),2*(h-g+p-d)]}(e,t):void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(11);t.quadBezier=function(e,t,n=r.DEFAULT_CLASS,i){let[[u,s],[l,c],[a,f]]=t,d=document.createElementNS(o.XMLNS,"path");return d.setAttributeNS(null,"d",`M${u} ${s} Q${l} ${c} ${a} ${f}`),n&&d.setAttributeNS(null,"class",n),e.appendChild(d),i&&setTimeout(()=>d.remove(),i),[d]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(11),i=n(48);t.cubicBezier=function(e,t,n=r.DEFAULT_CLASS,u){let[[s,l],[c,a],[f,d],[p,g]]=t;if(s===p&&l===g)return i.crossHair(e,[s,l],n,.2,u);let h=document.createElementNS(o.XMLNS,"path");return h.setAttributeNS(null,"d",`M${s} ${l} C${c} ${a} ${f} ${d} ${p} ${g}`),h.setAttributeNS(null,"class",n),e.appendChild(h),u&&setTimeout(()=>h.remove(),u),[h]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateBezier=function(e,t){let n=1-t;if(4===e.length){let[[r,o],[i,u],[s,l],[c,a]]=e;return[r*Math.pow(n,3)+3*i*Math.pow(n,2)*t+3*s*n*Math.pow(t,2)+c*Math.pow(t,3),o*Math.pow(n,3)+3*u*Math.pow(n,2)*t+3*l*n*Math.pow(t,2)+a*Math.pow(t,3)]}if(3===e.length){let[[r,o],[i,u],[s,l]]=e;return[r*Math.pow(n,2)+2*i*n*t+s*Math.pow(t,2),o*Math.pow(n,2)+2*u*n*t+l*Math.pow(t,2)]}if(2===e.length){let[[r,o],[i,u]]=e;return[r*n+i*t,o*n+u*t]}return[NaN,NaN]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.isQuadObtuse=function(e){let t=r.fromTo(e[0],e[1]),n=r.fromTo(e[1],e[2]),o=r.fromTo(e[2],e[0]),i=r.dot(o,t)>0,u=r.dot(n,o)>0;return i||u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(30),o=n(26);t.splitByMaxCurveLength=function(e,t){let n=[0,1],i=[[0,1]],u=o.fromTo(e);for(;i.length;){let e=i.pop(),o=u(e[0],e[1]);if(r.lengthUpperBound(o)>t){let t=(e[0]+e[1])/2;i.push([e[0],t]),i.push([t,e[1]]),n.push(t)}}return n.sort((e,t)=>e-t),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=1e-6;function o(e){let[t,n]=e;if(!(t<0&&n<0||t>1&&n>1))return t<0&&(t=0),t>1&&(t=1),n<0&&(n=0),n>1&&(n=1),[t,n]}function i(e,t,n){return r=>t/n*(r-e)}t.getCurvatureExtremaBrackets=function(e){let t={brackets:[],inflections:[]},[[n,u],[s,l],[c,a],[f,d]]=e,p=s-n,g=l-u,h=c-n,_=a-u,v=f-n,b=d-u,m=p,P=h-p,x=v-h,M=g,w=_-g,O=b-_;Math.abs(m-2*P+x)<r&&Math.abs(M-2*w+O);let y,C=v-3*h+3*p,S=b-3*_+3*g,I=C*C,T=S*S,N=Math.sqrt(I/T+1),B=1/N,j=p*B-g*(y=0===B?1:C/(S*N)),D=p*y+g*B,E=h*B-_*y,A=h*y+_*B,F=v*B-b*y;x=F-E;let L=3*((M=D)-2*(w=A-D)+(O=v*y+b*B-A)),z=(P=E-j)-(m=j);if(0===z)return 0===m?t:(m<0&&(j=-j,E=-E,F=-F,m=-m,P=-P,x=-x),t);{z<0&&(j=-j,E=-E,F=-F,m=-m,P=-P,x=-x,z=-z);let e=6*z,n=3*L*m/(e*e),r=3*(w-M)/e,u=n*n-2*r*n+3*L*M/(e*e),s=2*(r-n),l=function(e,t,n){return r=>r.map(i(e,t,n))}(n,e,L),c=i(n,e,L);if(u>0){let e=Math.sqrt(u),t=-e,n=e;return{brackets:[[Number.NEGATIVE_INFINITY,t],[t,n],[n,Number.POSITIVE_INFINITY]].map(l).map(o),inflections:[c(t),c(n)].filter(e=>e>0&&e<1)}}if(u<0){let e=2*s*s-8*u-3;if(e<0){return{brackets:[[0,Math.sqrt(-3*u)]].map(l).map(o),inflections:[]}}{let t=Math.sqrt(5*e),n=(-5*s-t)/10,r=(-5*s+t)/10;return{brackets:[[Number.NEGATIVE_INFINITY,n],[n,Math.min(0,r)],[Math.max(0,r),Math.sqrt(-3*u)]].map(l).map(o),inflections:[]}}}return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(30),o=n(0);t.flatness=function(e){return r.lengthUpperBound(e)/o.distanceBetween(e[0],e[e.length-1])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),o=n(14),i=n(171);t.isPointOnBezierExtension=function(e,t){let n=e.slice();if("undefined"!=typeof _bez_debug_)for(let e of n);let u=r.getX(n),s=o.getY(n);u[u.length-1]-=t[0],s[s.length-1]-=t[1];let l=0,c=0,a=0,f=0,d=0,p=0,g=0,h=0;4===u.length?[l,c,a,f]=u:3===u.length?[c,a,f]=u:2===u.length&&([a,f]=u),4===s.length?[d,p,g,h]=s:3===s.length?[p,g,h]=s:2===s.length&&([g,h]=s);let _,v=0!==l?3:0!==c?2:0!==a?1:0!==f?0:-1,b=0!==d?3:0!==p?2:0!==g?1:0!==h?0:-1;if(v<b&&([v,b]=[b,v],[l,d]=[d,l],[c,p]=[p,c],[a,g]=[g,a],[f,h]=[h,f]),3===v&&3===b)_=[[l,c,a,f,0,0],[0,l,c,a,f,0],[0,0,l,c,a,f],[d,p,g,h,0,0],[0,d,p,g,h,0],[0,0,d,p,g,h]];else if(3===v&&2===b)_=[[l,c,a,f,0],[0,l,c,a,f],[p,g,h,0,0],[0,p,g,h,0],[0,0,p,g,h]];else if(3===v&&1===b)_=[[l,c,a,f],[g,h,0,0],[0,g,h,0],[0,0,g,h]];else{if(3===v&&0===b)return!1;if(3===v&&-1===b)return!0;if(2===v&&2===b)_=[[c,a,f,0],[0,c,a,f],[p,g,h,0],[0,p,g,h]];else if(2===v&&1===b)_=[[c,a,f],[g,h,0],[0,g,h]];else{if(2===v&&0===b)return!1;if(2===v&&-1===b)return!0;if(1===v&&1===b)_=[[a,f],[g,h]];else{if(1===v&&0===b)return!1;if(1===v&&-1===b)return!0;if(0===v&&0===b)return!1;if(0===v&&-1===b)return!1;if(-1===v&&-1===b)return!0}}}let m=i.detSlowExact(_.map(e=>e.map(e=>[e])));return 0===m[m.length-1]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8);t.isLine=function(e){return 2===e.length||(3===e.length?0===r.orient2d(e[0],e[1],e[2]):4===e.length?0===r.orient2d(e[0],e[1],e[2])&&0===r.orient2d(e[1],e[2],e[3])&&0===r.orient2d(e[0],e[2],e[3]):void 0)},t.isHorizontalLine=function(e){let t=e[0][1];for(let n=1;n<e.length;n++)if(e[n][1]!==t)return!1;return!0},t.isVerticalLine=function(e){let t=e[0][0];for(let n=1;n<e.length;n++)if(e[n][0]!==t)return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),o=n(42),i=n(43),u=n(3),s=n(78),l=n(79);let c=r.memoize(function(e){let t=[o.getDx(e),i.getDy(e)].map(e=>u.allRoots(e,0,1));t[0].push(0,1),t[1].push(0,1);let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,f=void 0,d=void 0,p=void 0,g=void 0;for(let o=0;o<t[0].length;o++){let i=t[0][o],u=s.evaluateX(e,i);u<n&&(n=u,f=i),u>r&&(r=u,p=i)}for(let n=0;n<t[1].length;n++){let r=t[1][n],o=l.evaluateY(e,r);o<c&&(c=o,d=r),o>a&&(a=o,g=r)}return{ts:[[f,d],[p,g]],box:[[n,c],[r,a]]}});t.getBounds=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),o=n(96);let i=r.memoize(function(e){return o.getBounds(e).box});t.getBoundingBox=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CpNodeForDebugging=class{constructor(e,t){this.generated=e,this.cpNode=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lineLineIntersection=function(e,t){let[[n,r],[o,i]]=e,[[u,s],[l,c]]=t,a=o-n,f=i-r,d=l-u,p=c-s,g=d*f-p*a;if(0===g)return;let h=((s-r)*a-(u-n)*f)/g;return[u+h*d,s+h*p]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.X=class{constructor(e,t=!1,n,r,o){this.pos=e,this.isDummy=t,this.opposite=n,this.loopTree=r,this.outPs=o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=0,o=1;function i(e,t){let n=e.x-t.x;return 0!==n?n:e.type===r?-1:1}t.sweepLine=function(e,t,n,u){let s=[];for(let i of e)s.push({type:r,item:i,x:t(i)}),s.push({type:o,item:i,x:n(i)});s.sort(i);let l=new Set,c=[];for(let e of s){let{item:t}=e;if(e.type===r){for(let e of l.values())u(t,e)&&c.push([t,e]);l.add(t)}else e.type===o&&l.delete(e.item)}return c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areBoxesIntersecting=function(e){return(t,n)=>{let[[r,o],[i,u]]=t,[[s,l],[c,a]]=n;return o>u&&([o,u]=[u,o]),l>a&&([l,a]=[a,l]),r>i&&([r,i]=[i,r]),s>c&&([s,c]=[c,s]),e?r<=c&&i>=s&&l<=u&&a>=o:r<c&&i>s&&l<u&&a>o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(195),o=n(196),i=n(197);t.cullBezierPieces=function(e,t){if(e.length>0){let n=r.getBestDistanceSquared(e,t);e=o.cullByLooseBoundingBox(e,t,n),e=i.cullByTightBoundingBox(e,t,n)}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.getClosestSquareDistanceToRect=function(e,t){let[[n,o],[i,u]]=e,[s,l]=t;if(s<n){if(l<o)return r.squaredDistanceBetween(e[0],t);if(l>u)return r.squaredDistanceBetween([n,u],t);{let e=n-s;return e*e}}if(s>i){if(l<o)return r.squaredDistanceBetween([i,o],t);if(l>u)return r.squaredDistanceBetween(e[1],t);{let e=s-i;return e*e}}if(l<o){let e=o-l;return e*e}if(l>u){let e=l-u;return e*e}return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(27);t.getClosestPoints=function(e,t){return t.map(t=>{let n=r.getClosestBoundaryPoint(t,e,void 0,void 0);return n?n.pos:void 0})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(15),o=n(6),i=n(33);t.addToCpGraph=function(e,t,n,u,s){let l=u.map((u,l)=>{let c=n.get(u.curve.loop),a=new r.ContactPoint(u,e,t[l],0),f=s?s[l]:i.getNeighbouringPoints(c,u,t[l],0);return o.CpNode.insert(!1,!1,c,a,f[0])}),c=u.length;for(let e=0;e<c;e++){let t=0===e?c-1:e-1,n=e===c-1?0:e+1;l[e].prevOnCircle=l[t],l[e].nextOnCircle=l[n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(204),o=n(108),i=n(205);function u(e){return e&&e.color===o.default.RED}function s(e,t){let n=t.indexOf(e);-1!==n&&t.splice(n,1)}function l(e,t){const n=e?i.default.LEFT:i.default.RIGHT,r=t[n];return t[n]=r[e],r[e]&&(r[e].parent=t),r[e]=t,t.parent=r,r.color=t.color,t.color=o.default.RED,r}function c(e){return e===o.default.RED?o.default.BLACK:o.default.RED}function a(e){e.color=c(e.color),e[i.default.LEFT].color=c(e[i.default.LEFT].color),e[i.default.RIGHT].color=c(e[i.default.RIGHT].color)}function f(e){if(a(e),u(e[i.default.RIGHT][i.default.LEFT])){let t=l(i.default.RIGHT,e[i.default.RIGHT]);e[i.default.RIGHT]=t,t.parent=e,a(e=l(i.default.LEFT,e))}return e}function d(e){return u(e[i.default.RIGHT])&&(e=l(i.default.LEFT,e)),u(e[i.default.LEFT])&&u(e[i.default.LEFT][i.default.LEFT])&&(e=l(i.default.RIGHT,e)),u(e[i.default.LEFT])&&u(e[i.default.RIGHT])&&a(e),e}t.default=class{constructor(e,t,n){this.getMinNode=this.getMinOrMaxNode(i.default.LEFT),this.getMaxNode=this.getMinOrMaxNode(i.default.RIGHT);const r=this;if(r.setComparator(e,n),r.replaceDups=n,r.root=null,t)for(let e of t)r.insert(e)}setComparator(e,t){this.compare=t?e:(t,n)=>e(t,n[0])}isEmpty(){return!this.root}find(e){const t=this;let n=this.root;for(;n;){let r=t.compare(e,n.data);if(0===r)return n;n=n[r>0?i.default.RIGHT:i.default.LEFT]}return null}toArrayInOrder(){let e=[];return function t(n){if(!n)return;t(n[i.default.LEFT]);e.push(n);t(n[i.default.RIGHT])}(this.root),e}insert(e){const t=this;t.root=function e(n,o){if(!n)return new r.default(o,!t.replaceDups);let s=t.compare(o,n.data);if(0===s)t.replaceDups?n.data=o:n.data.push(o);else{let t=s>0?i.default.RIGHT:i.default.LEFT;n[t]=e(n[t],o),n[t].parent=n}u(n[i.default.RIGHT])&&!u(n[i.default.LEFT])&&(n=l(i.default.LEFT,n));u(n[i.default.LEFT])&&u(n[i.default.LEFT][i.default.LEFT])&&(n=l(i.default.RIGHT,n));u(n[i.default.LEFT])&&u(n[i.default.RIGHT])&&a(n);return n}(t.root,e),t.root.color=o.default.BLACK,t.root.parent=void 0}remove(e,t){const n=this;n.root=function e(r,o){let c=n.compare(o,r.data);if(!n.replaceDups&&0===c&&!t&&r.data.length>1)return s(o,r.data),r;if(c<0&&!r[i.default.LEFT]||c>0&&!r[i.default.RIGHT])return r;if(c<0)return u(r[i.default.LEFT])||u(r[i.default.LEFT][i.default.LEFT])||(r=f(r)),r[i.default.LEFT]=e(r[i.default.LEFT],o),r[i.default.LEFT]&&(r[i.default.LEFT].parent=r),d(r);if(u(r[i.default.LEFT])&&(r=l(i.default.RIGHT,r),c=n.compare(o,r.data),!n.replaceDups&&0===c&&!t&&r.data.length>1))return s(o,r.data),r;if(0===c&&!r[i.default.RIGHT])return null;if(!u(r[i.default.RIGHT])&&!u(r[i.default.RIGHT][i.default.LEFT])&&(r=function(e){a(e),u(e[i.default.LEFT][i.default.LEFT])&&a(e=l(i.default.RIGHT,e));return e}(r),c=n.compare(o,r.data),!n.replaceDups&&0===c&&!t&&r.data.length>1))return s(o,r.data),r;0===c?(r.data=n.min(r[i.default.RIGHT]),r[i.default.RIGHT]=function e(t){if(!t[i.default.LEFT])return null;u(t[i.default.LEFT])||u(t[i.default.LEFT][i.default.LEFT])||(t=f(t));t[i.default.LEFT]=e(t[i.default.LEFT]);t[i.default.LEFT]&&(t[i.default.LEFT].parent=t);return d(t)}(r[i.default.RIGHT])):r[i.default.RIGHT]=e(r[i.default.RIGHT],o);r[i.default.RIGHT]&&(r[i.default.RIGHT].parent=r);return d(r)}(n.root,e),n.root&&(n.root.color=o.default.BLACK,n.root.parent=void 0)}findBounds(e){const t=this;let n=t.root,r=[void 0,void 0];if(null===n)return r;for(;n;){const o=t.compare(e,n.data);o>=0?r[0]=n:r[1]=n,n=n[o>=0?i.default.RIGHT:i.default.LEFT]}return r}findBoundsExcl(e){const t=this;let n=t.root,r=[void 0,void 0];if(null===n)return r;return function n(o){for(;o;){let u=t.compare(e,o.data);if(0===u)return n(o[i.default.LEFT]),void n(o[i.default.RIGHT]);u>0?r[0]=o:u<0&&(r[1]=o),o=o[u>0?i.default.RIGHT:i.default.LEFT]}}(n),r}findAllInOrder(e){const t=this;let n=[];return function r(o){for(;o;){let u=t.compare(e,o.data);if(0===u)return r(o[i.default.LEFT]),n.push(o),void r(o[i.default.RIGHT]);o=o[u>0?i.default.RIGHT:i.default.LEFT]}}(t.root),n}getMinOrMaxNode(e){return function(t){if(t){for(;t[e];)t=t[e];return t}}}min(e){return this.getMinNode(e).data}max(e){return this.getMaxNode(e).data}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BLACK=0]="BLACK",e[e.RED=1]="RED"}(r||(r={})),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=n(99),u=n(27),s=n(10),l=n(2),c=n(211),a=n(212),f=n(214),d=n(215),p=n(216),g=n(217);function h(e,t,n,o){let u=Math.pow(1e-4*e,2);if(r.squaredDistanceBetween(t,o)<u)return;let s=[(t[0]+o[0])/2,(t[1]+o[1])/2],l=[o[0]-t[0],o[1]-t[1]],c=[-l[1],l[0]],a=[s[0]+c[0],s[1]+c[1]],f=i.lineLineIntersection([t,n],[s,a]);if(!f)return;let d=[f[0]-t[0],f[1]-t[1]],p=[n[0]-t[0],n[1]-t[1]];return r.dot(d,p)<0?void 0:f}t.find2Prong=function(e,t,n,i,_,v,b){const m=Math.pow(1e-6*t,2),P=Math.pow(1e-4,2),x=.01*m,M=n;let w,O,y,{bezierPieces:C,"δ":S}=p.getInitialBezierPieces(v,b,e,i,_);v?(w=[(O=[_.p[0],_.p[1]])[0],O[1]-Math.sqrt(M)],y=M):(O=_.p,w=l.PointOnShape.getOsculatingCircle(M,_).center,y=r.squaredDistanceBetween(O,w));let I=function(e,t,n,i){const u=.001*e;let s=void 0,l=Number.POSITIVE_INFINITY;for(let u=0;u<t.length;u++){let c=t[u],a=c.curve.ps,f=o.evaluate(a),d=f(c.ts[0]),p=Number.POSITIVE_INFINITY;if(!s||s[0]!==d[0]||s[1]!==d[1]){let t=h(e,n,i,d);t&&(p=r.squaredDistanceBetween(n,t))}let g=Number.POSITIVE_INFINITY,_=f(c.ts[1]),v=h(e,n,i,_);v&&(g=r.squaredDistanceBetween(n,v)),s=_;let b=Math.min(p,g);b<l&&(l=b)}return l+u}(t,C,O,w);y>I&&(w=r.interpolate(O,w,Math.sqrt(I/y)));let T,N=[],B=0,j=0,D=!1,E=C;do{B++;let e=r.squaredDistanceBetween(w,_.p);if(E=f.cullBezierPieces(E,w,e),void 0===(T=u.getClosestBoundaryPoint(E,w,_.curve,_.t))){if("undefined"!=typeof _debug_){let e=_debug_.generated.elems,t=v?e.twoProng_holeClosing:e.twoProng_regular,n=v?"hole-closing: "+t.length:"regular: "+t.length;console.log("failed: no closest point - "+n)}D=!0;break}"undefined"!=typeof _debug_&&N.push({x:w,y:_,z:T.pos,t:_.t});let t=r.squaredDistanceBetween(w,T.pos.p);if(1===B&&e<t+P)return void c.add1Prong(Math.sqrt(M),i,_);if(!v&&r.squaredDistanceBetween(_.p,T.pos.p)<=m){D=!0;break}let n=d.findEquidistantPointOnLine(w,_.p,T.pos.p),o=r.squaredDistanceBetween(w,n);if(w=n,o<x)j++;else if(25===B){D=!0;break}}while(j<1);let A,F=[];return D||(F=g.getCloseBoundaryPoints(E,w,_,r.distanceBetween(w,T.pos.p))).length||F.push(T),void 0!==T&&(A=new s.Circle(w,r.distanceBetween(w,T.pos.p))),"undefined"==typeof _debug_||D||(N.push({x:w,y:_,z:T.pos,t:_.t}),a.addDebugInfo(C,D,_,A,T.pos,S,N,v)),D?void 0:{circle:A,zs:F}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTwoProngType=function(e){return e.holeClosing?"twoProng_holeClosing":"twoProng_regular"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8),o=n(6),i=n(15),u=n(2),s=n(54),l=n(33);function c(e,t){return e*Math.pow(2,-(t+1))}function a(e,t){return e>0?e>.5?t:t<0?e-2:2-e:e<-.5?4-t:t<0?e+6:2-e}t.add2Prong=function(e,t,n,f,d,p){let g,h=u.PointOnShape.calcOrder(t,n),_=f.map(e=>u.PointOnShape.calcOrder(t,e.pos)),v=n.t;0===v&&(v=1,g=n.curve.prev,n=new u.PointOnShape(g,v));let b=!1;for(let n=0;n<f.length;n++){let r=f[n],o=_[n];if(s.isAnotherCpCloseby(e,r.pos,t,o,0,p,"red")){b=!0;break}}if(s.isAnotherCpCloseby(e,n,t,h,0,p,"red")||b)return void("undefined"!=typeof _debug_&&(d?_debug_.generated.elems.twoProng_holeClosing.pop():_debug_.generated.elems.twoProng_regular.pop()));let m=[],P=[],x=[],M=[],w=[];for(let n=0;n<f.length;n++){let r=f[n],u=_[n],s=new i.ContactPoint(r.pos,t,u,0);P.push(s);let c=r.pos.curve.loop;w.push(c);let a=e.get(c);x.push(a);let p=l.getNeighbouringPoints(a,r.pos,u,0);M.push(p),m.push(o.CpNode.insert(d,!1,a,s,p[0]))}let O=new i.ContactPoint(n,t,h,0),y=n.curve.loop,C=e.get(y),S=l.getNeighbouringPoints(C,n,h,0),I=o.CpNode.insert(d,!1,C,O,S[0]);if(1===m.length)I.prevOnCircle=m[0],I.nextOnCircle=m[0],m[0].prevOnCircle=I,m[0].nextOnCircle=I;else{let e=m.slice();e.push(I),e.sort(function(e){let t=e.center,n=e.radius,o=r.exponent(n);return function(e,n){let r=e.cp.pointOnShape.p,i=n.cp.pointOnShape.p;r=[r[0]-t[0],r[1]-t[1]],i=[i[0]-t[0],i[1]-t[1]];let u=c(r[0],o),s=c(r[1],o),l=c(i[0],o),f=c(i[1],o),d=a(u,s);return a(l,f)-d}}(t));for(let t=0;t<e.length;t++){let n=t+1===e.length?0:t+1,r=0===t?e.length-1:t-1,o=e[t],i=e[n],u=e[r];o.nextOnCircle=i,o.prevOnCircle=u}}if(d){let e=new i.ContactPoint(f[0].pos,t,P[0].order,1),r=o.CpNode.insert(!0,!1,x[0],e,m[0]),u=new i.ContactPoint(n,t,O.order,-1),s=o.CpNode.insert(!0,!1,C,u,I.prev);s.prevOnCircle=r,s.nextOnCircle=r,r.prevOnCircle=s,r.nextOnCircle=s,m[0].next=I,I.prev=m[0],s.next=r,r.prev=s}if("undefined"!=typeof _debug_){let e,t=(e=d?_debug_.generated.elems.twoProng_holeClosing:_debug_.generated.elems.twoProng_regular)[e.length-1];I||console.log("asas"),t.cpNode=I}return I}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6),o=["prev","next","prevOnCircle","nextOnCircle"];t.clone=function(e){let t=new Map,n=new r.CpNode(e.cp,e.isHoleClosing,e.isIntersection);t.set(e,n);let i=[{cpNode:e,newCpNode:n}];for(;i.length;){let{cpNode:e,newCpNode:n}=i.pop();for(let u of o){let o=e[u],s=t.get(o);s||(s=new r.CpNode(o.cp,o.isHoleClosing,o.isIntersection),t.set(o,s),i.push({cpNode:o,newCpNode:s})),n[u]=s}}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.traverseVertices=function(e,t){t(e),e.getCpNodesOnCircle().filter(e=>!e.isTerminating()).map(e=>e.next).forEach(function(e){let n=[e];for(;n.length;){let e=n.pop();t(e),n.push(...e.vertexChildren)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(241),o=n(242),i=n(243),u=n(244),s=n(245),l=n(246),c=n(247),a=n(248),f=n(249),d=n(250),p=n(115),g=n(251),h=n(252),_=n(253),v=n(254),b=n(255),m=n(256),P=n(257);let x={oneProng:r.drawOneProng,oneProngAtDullCorner:P.oneProngAtDullCorner,twoProng_regular:o.twoProng,twoProng_failed:o.twoProng,twoProng_notAdded:o.twoProng,twoProng_deleted:o.twoProng,twoProng_holeClosing:o.twoProng,threeProng:i.threeProng,minY:s.minY,boundingHull:l.boundingHull,looseBoundingBox:c.looseBoundingBox,tightBoundingBox:a.tightBoundingBox,sharpCorner:f.sharpCorner,dullCorner:d.dullCorner,vertex:u.vertex,mat:p.drawMat("mat"),sat:p.drawMat("sat"),loop:g.loop,loops:h.loops,maxVertex:_.maxVertex,leaves:v.leaves,culls:b.culls,intersection:m.intersection,cpNode:function(e,t){return[]}};t.drawElemFunctions=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(57),o=n(4),i=n(12);t.drawMat=function(e){let t="mat"===e?"thin5 purple nofill":"thin10 red nofill";return(e,n)=>{let u=n.cpNode;if(!u)return;let s=[];return r.traverseEdges(u,n=>{if(n.isTerminating())return;let r=i.getCurveToNext(n);r&&(0,s.push(...o.drawFs.bezier(e,r,t)))}),s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawCirclePercent=function(e,t,n,r){let o=document.createElementNS("http://www.w3.org/2000/svg","circle");return o.setAttributeNS(null,"cx",t[0].toString()),o.setAttributeNS(null,"cy",t[1].toString()),o.setAttributeNS(null,"r",n.toString()+"%"),o.setAttributeNS(null,"class",r),e.appendChild(o),o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(23);t.Mat=r.Mat;const o=n(28);t.Loop=o.Loop;const i=n(13);t.Curve=i.Curve;const u=n(6);t.CpNode=u.CpNode;const s=n(2);t.PointOnShape=s.PointOnShape;const l=n(10);t.Circle=l.Circle;const c=n(15);t.ContactPoint=c.ContactPoint;const a=n(52);t.BezierPiece=a.BezierPiece;const f=n(178);t.findMats=f.findMats;const d=n(231);t.trimMat=d.trimMat;const p=n(233);t.toScaleAxis=p.toScaleAxis;const g=n(57);t.traverseEdges=g.traverseEdges;const h=n(58);t.getBranches=h.getBranches;const _=n(113);t.traverseVertices=_.traverseVertices;const v=n(237);t.MatDebug=v.MatDebug;const b=n(258);t.drawBranch=b.drawBranch;const m=n(115);t.drawMat=m.drawMat;const P=n(98);t.CpNodeForDebugging=P.CpNodeForDebugging;const x=n(27);t.getClosestBoundaryPoint=x.getClosestBoundaryPoint;const M=n(259);t.getPathsFromStr=M.getPathsFromStr;const w=n(274);t.beziersToSvgPathStr=w.beziersToSvgPathStr;const O=n(32);t.getShapeBounds=O.getShapeBounds;const y=n(275);t.getBoundaryBeziersToNext=y.getBoundaryBeziersToNext;const C=n(276);t.getBoundaryBezierPartsToNext=C.getBoundaryBezierPartsToNext;const S=n(53);t.getBoundaryPieceBeziers=S.getBoundaryPieceBeziers;const I=n(277);t.simplifyMat=I.simplifyMat;const T=n(278);t.simplifyMatMapOnly=T.simplifyMatMapOnly;const N=n(114);t.drawElemFunctions=N.drawElemFunctions;const B=n(12);t.getCurveToNext=B.getCurveToNext;const j=n(31);t.getCurveBetween=j.getCurveBetween},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(24),o=n(59),i=n(60),u=Number.POSITIVE_INFINITY;t.allRoots=function e(t,n=-u,s=+u){let l=(t=r.clip0(t)).length-1,c=function(e,t){return n=>n>=e&&n<=t}(n,s);if(2===l)return o.quadraticRoots(t).filter(c);if(l>2){let l,a;n===-u||s===+u?(l=n===-u?i.negativeRootLowerBound_LMQ(t):n,a=s===+u?i.positiveRootUpperBound_LMQ(t):s):(l=n,a=s);let f=e(r.differentiate(t),l,a).filter(c);return f[0]!==l&&f.unshift(l),f[f.length-1]!==a&&f.push(a),function(e,t){let n,i=[],u=r.evaluate(e),s=t[0];for(let e=1;e<t.length;e++){let r,l=t[e],c=u(s),a=u(l);0===c*a?0===c?r=s:0===a&&e===t.length-1&&(r=l):c*a<0&&(r=o.brent(u,s,l)),void 0!==r&&r!==n&&(i.push(r),n=r),s=l}return i}(t,f)}return 1===l?[-t[1]/t[0]].filter(c):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(61),o=123456789,i=4294967296;function u(e){return function(t,n,r,i,u=o,s=0){let l=[];for(let o=0;o<t;o++){let t=e(n,r,i,u,s),o=t.p;u=t.seed,l.push(o)}return l}}let s=u(d);t.flatRootsArr=s;let l=u(p);function c(e){return(134775813*e+1)%i}function a(e,t,n,r=o,u=0){let s=[];for(let o=0;o<e;o++){r=f(r=c(r),s,r/i*(n-t)+t,u)}return{vs:s=s.slice(0,e),seed:r}}function f(e,t,n,r){return e=c(e),t.push(n),e/i<r&&(e=f(e,t,n,r)),e}function d(e,t=0,n=1,i=o,u=0){let s=a(e,t,n,i,u);return i=s.seed,{p:r.fromRoots(s.vs),seed:i}}function p(e,t=-1,n=1,r=o){let i=a(e,t=void 0===t?-1:t,n=void 0===n?1:n,r=void 0===r?o:r);return r=i.seed,{p:i.vs,seed:r}}t.flatCoefficientsArr=l,t.predictiveRandom=c,t.flatRoots=d,t.flatCoefficients=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hornerErrorBound=function(e,t){const n=Number.EPSILON;return 2*(e.length-1)*n*function(e,t){let n=e.length-1,r=0;for(let o=0;o<n;o++)r+=Math.abs(e[o]*Math.pow(t,n-o));return r}(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),o=n(37);t.compare=function(e,t){return o.sign(r.expansionDiff(e,t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(37),o=n(36);t.abs=function(e){return r.sign(e)<0?o.negativeOf(e):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fastTwoDiff=function(e,t){let n=e-t;return[e-n-t,n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(29),o=n(34),i=n(63),u=n(69),s=n(17),l=n(16);let c=3330669073875472e-31,a=2220446049250315e-31,f=1109335647967049e-46,d=3330669073875471e-31;t.orient2d=function(e,t,n){let p,g=(e[0]-n[0])*(t[1]-n[1]),h=(e[1]-n[1])*(t[0]-n[0]),_=g-h;if(g>0){if(h<=0)return _;p=g+h}else{if(!(g<0))return _;if(h>=0)return _;p=-g-h}return Math.abs(_)>=c*p?_:function(e,t,n,c){let p=e[0]-n[0],g=t[0]-n[0],h=e[1]-n[1],_=t[1]-n[1],v=o.expansionDiff(r.twoProduct(p,_),r.twoProduct(h,g)),b=i.estimate(v);if(Math.abs(b)>=a*c)return b;let m=u.twoDiff(e[0],n[0])[0],P=u.twoDiff(t[0],n[0])[0],x=u.twoDiff(e[1],n[1])[0],M=u.twoDiff(t[1],n[1])[0];if(0===m&&0===x&&0===P&&0===M)return b;let w=f*c+d*Math.abs(b);if(b+=p*M+_*m-(h*P+g*x),Math.abs(b)>=w)return b;let O=o.expansionDiff(r.twoProduct(m,_),r.twoProduct(x,g)),y=s.fastExpansionSum(v,O),C=o.expansionDiff(r.twoProduct(p,M),r.twoProduct(h,P)),S=s.fastExpansionSum(y,C),I=o.expansionDiff(r.twoProduct(m,M),r.twoProduct(x,P)),T=s.fastExpansionSum(S,I);return(T=l.compress(T))[T.length-1]}(e,t,n,p)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduceSignificand=function(e,t){let n=53-t,r=(Math.pow(2,n)+1)*e;return r-(r-e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(19),o=n(25);t.isBitAligned=function(e,t,n){if(0===e)return!0;let i=o.exponent(e),u=r.getHighestSetBit(e)-52+i;return r.getLowestSetBit(e)-52+i>=n&&u<=t-1+n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(19),o=n(25);t.msbExponent=function(e){if(0===e||!Number.isFinite(e))return NaN;let t=o.exponent(e);return r.getHighestSetBit(e)-52+t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(19),o=n(25);t.lsbExponent=function(e){if(0===e||!Number.isFinite(e))return NaN;let t=o.exponent(e);return r.getLowestSetBit(e)-52+t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(19);t.bitLength=function(e){return 0===e?0:r.getHighestSetBit(e)-r.getLowestSetBit(e)+1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70),o=n(29),i=n(41),u=n(18),s=n(38),l=n(17);t.calculate=function(e){let t=[0];for(let n=0;n<e.length;n++){let c=e[n],a=c[0];for(let e=1;e<c.length;e++){let t=c[e];a=1==t.length?1===a.length?o.twoProduct(a[0],t[0]):i.scaleExpansion(a,t[0]):1===a.length?i.scaleExpansion(t,a[1]):r.expansionProduct(t,a)}t=1===a.length?1===t.length?u.twoSum(t[0],a[0]):s.growExpansion(t,a[0]):1===t.length?s.growExpansion(a,t[0]):l.fastExpansionSum(t,a)}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(18),o=n(38),i=n(17);t.calculateSum=function(e){let t=[0];for(let n=0;n<e.length;n++){let u=e[n];t=1===u.length?1===t.length?r.twoSum(t[0],u[0]):o.growExpansion(t,u[0]):1===t.length?o.growExpansion(u,t[0]):i.fastExpansionSum(t,u)}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(71);function o(e){return parseInt(e,2)}t.binaryStringToDouble=function(e){return r.octetsToDouble(e.match(/.{8}/g).map(o))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(64);t.isValid=function(e){for(let t=1;t<e.length;t++){if(0!==e[t]&&0!==e[t-1]&&Math.abs(e[t-1])>=Math.abs(e[t]))return!1;if(r.isAdjacent(e[t-1],e[t]))return!1}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Corner=class{constructor(e,t,n,r,o,i){this.tangents=e,this.crossTangents=t,this.isSharp=n,this.isDull=r,this.isQuiteSharp=o,this.isQuiteDull=i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8),o=n(136),i=n(137);t.grahamScan=function(e,t=!1){if(!e.length)return;function n(e,n,o){let i=r.orient2d(e,n,o);return t?i<0:i<=0}let u=e.slice(),s=u.length,l=o.getSmallestIndxYThenX(u),[c]=u.splice(l,1);u.sort((e,t)=>{let n=-r.orient2d(c,e,t);return 0!==n?n:0!==(n=e[1]-t[1])?n:e[0]-t[0]}),u.unshift(c);let a=1;for(let e=2;e<s;e++){for(;n(u[a-1],u[a],u[e]);)if(a>1)a-=1;else{if(e===s-1){a-=1;break}e+=1}a+=1,i.swap(u,a,e)}return u.slice(0,a+1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSmallestIndxYThenX=function(e){let t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],n=void 0;for(let r=0;r<e.length;r++){let o=e[r][1];(o<t[1]||o===t[1]&&e[r][0]<t[0])&&(n=r,t=e[r])}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.swap=function(e,t,n){if(t===n)return;let r=e[t];e[t]=e[n],e[n]=r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDxyAt1=function(e){if(4===e.length){let[,,[t,n],[r,o]]=e;return[3*r-3*t,3*o-3*n]}if(3===e.length){let[,[t,n],[r,o]]=e;return[2*r-2*t,2*o-2*n]}if(2===e.length){let[[t,n],[r,o]]=e;return[r-t,o-n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDdxyAt1=function(e){if(4===e.length){let[,[t,n],[r,o],[i,u]]=e;return[6*i-12*r+6*t,6*u-12*o+6*n]}if(3===e.length){let[[t,n],[r,o],[i,u]]=e;return[2*i-4*r+2*t,2*u-4*o+2*n]}if(2===e.length)return[0,0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(21);t.from0ToT=function(e,t){return r.splitAt(e,t)[0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(21);t.fromTTo1=function(e,t){return r.splitAt(e,t)[1]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9),o=n(143),i=n(148);t.bezier3Intersection=function(e,t,n,u){const s=192*Number.EPSILON;void 0===n&&(n=0),n=Math.max(n,s),void 0===u&&(u=1e-6),u=Math.max(u,1e-6),"undefined"!=typeof _bez_debug_&&(_bez_debug_.generated.elems.beziers.push([e,t]),_bez_debug_.generated.elems.fatLine.push({l:[[0,0],[1e-10,1e-10]],minD:0,maxD:0}));let l=[],c={ps1:e,ps2:t,tRange1:[0,1],tRange2:[0,1],idx:1},a=[];for(a.push(c);0!==a.length;){let{ps1:r,ps2:u,tRange1:s,tRange2:c,idx:f}=a.pop(),{newIterations:d,t1:p}=o.checkIntersectionInRanges(r,u,s,c,f,n);if(a.push(...d),p){let n=0===f?[e,t]:[t,e],r=i.calcOtherT(p,n[0],n[1]);if(void 0===r)continue;let o=0===f?[p,r]:[r,p];l.push(o)}}if("undefined"!=typeof _bez_debug_)for(let t of l)_bez_debug_.generated.elems.intersection.push(r.evaluate(e,t[0]));return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(144),o=n(145),i=n(146),u=n(84),s=n(26),l=n(0),c=n(21);t.checkIntersectionInRanges=function(e,t,n,a,f,d){let p=0===f?1:0;[t,e]=r.center(t,e);let g=e[0],h=e[e.length-1],_=o.getDistanceToLineFunction([g,h]),v=0,b=0;if(4===e.length){let t=_(e[1]),n=_(e[2]),r=t*n>0?.75:4/9;v=r*Math.min(0,t,n),b=r*Math.max(0,t,n)}else if(3===e.length){let t=_(e[1]);v=.5*Math.min(0,t),b=.5*Math.max(0,t)}else 2===e.length&&(v=b=0);"undefined"!=typeof _bez_debug_&&(_bez_debug_.generated.elems.beziers.push([t,e]),_bez_debug_.generated.elems.fatLine.push({l:[e[0],e[e.length-1]],minD:v,maxD:b}));let{tMin:m,tMax:P}=i.geoClip(t,_,v,b);if(m===Number.POSITIVE_INFINITY)return{newIterations:[],t1:void 0};if(P-m>.7){let n=l.fromTo(g,h),r=[-n[1],n[0]],u=l.len(n)/2*2,s=[(g[0]+h[0])/2,(g[1]+h[1])/2],c=l.translate(r,s),a=o.getDistanceToLineFunction([s,c]);"undefined"!=typeof _bez_debug_&&(_bez_debug_.generated.elems.beziers.push([t,e]),_bez_debug_.generated.elems.fatLine.push({l:[s,c],minD:-u,maxD:+u}));let{tMin:f,tMax:d}=i.geoClip(t,a,-u,+u);if(m===Number.POSITIVE_INFINITY)return{newIterations:[],t1:void 0};P=Math.min(P,d),m=Math.max(m,f)}if(P-m>.7){let r=a[1]-a[0],o=n[1]-n[0];if(void 0!==u.coincident(t,e))return{newIterations:[],t1:void 0};r<=o&&(p=f,[t,e]=[e,t],[a,n]=[n,a]);let i=a[1]-a[0],s=a[0],l=s+i/2,d=l,g=a[1],[h,_]=c.splitAtPrecise(t,.5);return{newIterations:[{ps1:h,ps2:e,tRange1:[s,l],tRange2:n,idx:p},{ps1:_,ps2:e,tRange1:[d,g],tRange2:n,idx:p}],t1:void 0}}let x=a[1]-a[0],M=m*x+a[0],w=P*x+a[0];if(Math.abs((P-m)*x)<d){return{newIterations:[],t1:(P+m)*x/2+a[0]}}return{newIterations:[{ps1:t=s.fromToPrecise(t)(m,P),ps2:e,tRange1:[M,w],tRange2:n,idx:p}],t1:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.center=function(e,t){let n=0;for(let t=1;t<e.length;t++)n+=r.squaredDistanceBetween(e[t-1],e[t]);let o,i,u=0;for(let e=1;e<t.length;e++)u+=r.squaredDistanceBetween(t[e-1],t[e]);return u<n?(o=t.reduce((e,t)=>e+t[0],0)/t.length,i=t.reduce((e,t)=>e+t[1],0)/t.length):(o=e.reduce((e,t)=>e+t[0],0)/e.length,i=e.reduce((e,t)=>e+t[1],0)/e.length),[e=e.map(e=>[e[0]-o,e[1]-i]),t=t.map(e=>[e[0]-o,e[1]-i])]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDistanceToLineFunction=function(e){let[t,n,r]=function(e){let[[t,n],[r,o]]=e,i=n-o,u=r-t,s=t*o-r*n,l=Math.sqrt(Math.pow(i,2)+Math.pow(u,2));return[i/l,u/l,s/l]}(e);return function(e){return t*e[0]+n*e[1]+r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(147);t.geoClip=function(e,t,n,i){let u=o.toHybridQuadratic(e),s=t(u[0]),l=t(u[2]),c=t(u[1][0]),a=t(u[1][1]),f=Math.min(c,a),d=Math.max(c,a),p=[s-2*f+l,-2*s+2*f,s],g=[s-2*d+l,-2*s+2*d,s],h=2*Math.max(r.hornerErrorBound(p,1),r.hornerErrorBound(g,1));n-=h,i+=h;let _=p.slice();_[2]=_[2]-n;let v=p.slice();v[2]=v[2]-i;let b=g.slice();b[2]=b[2]-n;let m=g.slice();m[2]=m[2]-i;let P=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY,M=r.allRoots(_,0,1),w=r.allRoots(v,0,1),O=r.allRoots(b,0,1),y=r.allRoots(m,0,1);return P=Math.min(...M,...w,...O,...y),x=Math.max(...M,...w,...O,...y),s>=n&&s<=i&&(P=0),l>=n&&l<=i&&(x=1),P<0&&(P=0),x>1&&(x=1),{tMin:P,tMax:x}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toHybridQuadratic=function(e){if(4===e.length){let[[t,n],[r,o],[i,u],[s,l]]=e;return[[t,n],[[(3*r-t)/2,(3*o-n)/2],[(3*i-s)/2,(3*u-l)/2]],[s,l]]}if(3===e.length){let[[t,n],[r,o],[i,u]]=e;return[[t,n],[[r,o],[r,o]],[i,u]]}if(2===e.length){let[[t,n],[r,o]]=e;return[[t,n],[[(r+t)/2,(o+n)/2],[(r+t)/2,(o+n)/2]],[r,o]]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(9),i=n(46);t.calcOtherT=function(e,t,n){let u=0;for(let e of t)u<Math.abs(e[0])&&(u=Math.abs(e[0])),u<Math.abs(e[1])&&(u=Math.abs(e[1]));for(let e of n)u<Math.abs(e[0])&&(u=Math.abs(e[0])),u<Math.abs(e[1])&&(u=Math.abs(e[1]));let s=o.evaluate(t)(e),l=i.closestPointOnBezier(n,s),c=r.squaredDistanceBetween(s,l.p),a=1536*Number.EPSILON*u;if(!(c>a*a))return l.t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(0),i=n(20),u=n(14);let s=4;t.bezier3IntersectionSylvester=function(e,t){let n,l,[c,a]=e[0],[f,d]=t[0];if(Math.abs(c-f)>1e-12){let r=(c-f)/(a-d),i=r*r,u=i/(1+i),s=u/r;n=o.rotatePs(u,s,e),l=o.rotatePs(u,s,t)}else n=e,l=t;let[p,g,h,_]=i.getX(n),[v,b,m,P]=u.getY(n),[x,M,w,O]=i.getX(l),[y,C,S,I]=u.getY(l),[T,N,B,j,D,E]=[x,p,M,g,w,h],[A,F,L,z,R,Y]=[y,v,C,b,S,m],H=I-P,q=T*T,V=N*N,X=B*B,G=j*j,Q=D*D,k=E*E,U=A*A,$=F*F,K=L*L,W=z*z,Z=R*R,J=Y*Y,ee=H*H,te=X*B,ne=G*j,re=Q*D,oe=k*E,ie=ee*H,ue=j*H,se=j*ee,le=N*ue,ce=N*se,ae=B*H,fe=B*ee,de=N*H,pe=N*ee,ge=[-V*H*E*J+le*E*z*Y+2*de*k*F*Y-G*H*E*F*Y-V*se*Y-de*k*W+ue*k*F*z-2*V*ee*E*z+G*pe*z-H*oe*$+3*ce*E*F-ne*ee*F-V*N*ie,V*H*D*J+2*V*H*E*R*Y-le*D*z*Y-4*de*D*E*F*Y+G*H*D*F*Y-le*E*z*R-2*de*k*F*R+G*H*E*F*R+V*se*R+2*de*D*E*W-2*ue*D*E*F*z+2*V*ee*D*z+3*H*D*k*$-3*ce*D*F,-2*V*H*D*R*Y-N*ae*E*z*Y-le*E*L*Y+2*B*ue*E*F*Y+2*de*Q*F*Y+V*fe*Y-V*H*E*Z+le*D*z*R+4*de*D*E*F*R-G*H*D*F*R-de*Q*W+2*de*k*L*z-ae*k*F*z+ue*Q*F*z-2*N*B*se*z-ue*k*F*L+2*V*ee*E*L-N*G*ee*L-3*H*Q*E*$-3*N*fe*E*F+3*B*G*ee*F,2*T*de*E*J-T*ue*E*z*Y+N*ae*D*z*Y+le*D*L*Y-2*T*H*k*F*Y-2*B*ue*D*F*Y-2*de*k*A*Y+G*H*E*A*Y+2*T*ce*Y+V*H*D*Z+N*ae*E*z*R+le*E*L*R-2*B*ue*E*F*R-2*de*Q*F*R-V*fe*R+T*H*k*W-4*de*D*E*L*z+2*ae*D*E*F*z-ue*k*A*z+4*T*pe*E*z-T*G*ee*z+2*ue*D*E*F*L-2*V*ee*D*L+H*re*$+2*H*oe*A*F-3*T*se*E*F+3*N*fe*D*F-3*ce*E*A+ne*ee*A+3*T*V*ie,-2*T*de*D*J-4*T*de*E*R*Y+T*ue*D*z*Y+N*ae*E*L*Y+4*T*H*D*E*F*Y-X*H*E*F*Y+4*de*D*E*A*Y-G*H*D*A*Y+T*ue*E*z*R-N*ae*D*z*R-le*D*L*R+2*T*H*k*F*R+2*B*ue*D*F*R+2*de*k*A*R-G*H*E*A*R-2*T*ce*R-2*T*H*D*E*W+2*de*Q*L*z-ae*Q*F*z+2*ue*D*E*A*z-4*T*pe*D*z+N*X*ee*z-de*k*K+ae*k*F*L-ue*Q*F*L+2*N*B*se*L-6*H*D*k*A*F+3*T*se*D*F-3*X*se*F+3*ce*D*A,4*T*de*D*R*Y+T*ae*E*z*Y+T*ue*E*L*Y-N*ae*D*L*Y-2*T*H*Q*F*Y+X*H*D*F*Y-2*B*ue*E*A*Y-2*de*Q*A*Y-2*T*N*fe*Y+2*T*de*E*Z-T*ue*D*z*R-N*ae*E*L*R-4*T*H*D*E*F*R+X*H*E*F*R-4*de*D*E*A*R+G*H*D*A*R+T*H*Q*W-2*T*H*k*L*z+ae*k*A*z-ue*Q*A*z+2*T*B*se*z+2*de*D*E*K-2*ae*D*E*F*L+ue*k*A*L-4*T*pe*E*L+T*G*ee*L+6*H*Q*E*A*F+3*T*fe*E*F+3*N*fe*E*A-3*B*G*ee*A,-q*H*E*J-T*ae*D*z*Y-T*ue*D*L*Y+2*T*H*k*A*Y+2*B*ue*D*A*Y-q*se*Y-2*T*de*D*Z-T*ae*E*z*R-T*ue*E*L*R+N*ae*D*L*R+2*T*H*Q*F*R-X*H*D*F*R+2*B*ue*E*A*R+2*de*Q*A*R+2*T*N*fe*R+4*T*H*D*E*L*z-2*ae*D*E*A*z-2*q*ee*E*z-de*Q*K+ae*Q*F*L-2*ue*D*E*A*L+4*T*pe*D*L-N*X*ee*L-2*H*re*A*F-3*T*fe*D*F+te*ee*F-H*oe*U+3*T*se*E*A-3*N*fe*D*A-3*q*(N*ie),q*H*D*J+2*q*H*E*R*Y-T*ae*E*L*Y-4*T*H*D*E*A*Y+X*H*E*A*Y+T*ae*D*z*R+T*ue*D*L*R-2*T*H*k*A*R-2*B*ue*D*A*R+q*se*R-2*T*H*Q*L*z+ae*Q*A*z+2*q*ee*D*z-T*X*ee*z+T*H*k*K-ae*k*A*L+ue*Q*A*L-2*T*B*se*L+3*H*D*k*U-3*T*se*D*A+3*X*se*A,-2*q*H*D*R*Y+T*ae*D*L*Y+2*T*H*Q*A*Y-X*H*D*A*Y+q*fe*Y-q*H*E*Z+T*ae*E*L*R+4*T*H*D*E*A*R-X*H*E*A*R-2*T*H*D*E*K+2*ae*D*E*A*L+2*q*ee*E*L-3*H*Q*E*U-3*T*fe*E*A,q*H*D*Z-T*ae*D*L*R-2*T*H*Q*A*R+X*H*D*A*R-q*fe*R+T*H*Q*K-ae*Q*A*L-2*q*ee*D*L+T*X*ee*L+H*re*U+3*T*fe*D*A-te*ee*A+q*T*ie],he=r.allRoots(ge,0),_e=[];for(let e=0;e<he.length;e++){let t=he[e],n=t*t,o=n*t,c={x:[p*o,g*n,h*t,_],y:[v*o,b*n,m*t,P]},a=r.subtract(i.getX(l),c.x),f=r.subtract(u.getY(l),c.y),d=r.allRoots(a,0,1),x=r.allRoots(f,0,1);for(let e=0;e<d.length;e++){let n=d[e];for(let e=0;e<x.length;e++){let r=x[e];if(Math.abs(n-r)<s){let e=(n+r)/2,o=e*t;e>=0&&e<=1&&o>=0&&o<=1&&_e.push([o,e])}}}}return _e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(20);t.tsAtX=function(e,t){return e=e.map(e=>[e[0]-t,e[1]]),r.allRoots(o.getX(e),0,1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(14);t.tsAtY=function(e,t){return e=e.map(e=>[e[0],e[1]-t]),r.allRoots(o.getY(e),0,1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(153);t.BezDebug=class{constructor(e){this.g=e,this.generated={elems:{beziers:[],fatLine:[],looseBoundingBox:[],tightBoundingBox:[],extreme:[],boundingHull:[],intersection:[]}},this.fs={drawElem:r.drawElemFunctions}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(4);let i={beziers:function(e,t){let n=o.drawFs.bezier(e,t[0],"blue thin5 nofill"),r=o.drawFs.bezier(e,t[1],"green thin5 nofill"),i=function(e){let t=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let i of e)i[0]<t&&(t=i[0]),i[1]<n&&(n=i[1]),i[0]>r&&(r=i[0]),i[1]>o&&(o=i[1]);let i=r-t,u=o-n;return Math.max(i,u)}([...t[0],...t[1]])/400,u=[];for(let n=0;n<t.length;n++){let r=t[n];for(let t=0;t<r.length;t++){let s=r[t];u.push(...o.drawFs.dot(e,s,i,0===n?"blue":"green"))}}return[...n,...r,...u]},intersection:function(e,t){return o.drawFs.crossHair(e,t,"red thin5 nofill",.5)},extreme:function(e,t){return o.drawFs.crossHair(e,t.p,"red thin10 nofill",.05)},boundingHull:function(e,t){return o.drawFs.polygon(e,t,"thin5 black nofill")},looseBoundingBox:function(e,t){return o.drawFs.rect(e,t,"thin5 brown nofill")},tightBoundingBox:function(e,t){return o.drawFs.polygon(e,t,"thin5 black nofill")},fatLine:function(e,t){let{l:n,minD:i,maxD:u}=t,[s,l]=n;const c=1024;let a=r.fromTo(s,l),f=[+c*a[0],+c*a[1]],d=[-c*a[0],-c*a[1]],p=[-a[1],a[0]],g=r.toLength(p,i),h=r.toLength(p,u),_=r.translate(s,d),v=r.translate(l,f),b=[r.translate(_,g),r.translate(v,g)],m=[r.translate(_,h),r.translate(v,h)];return[...o.drawFs.line(e,b),...o.drawFs.line(e,m)]}};t.drawElemFunctions=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47);t.dot=function(e,t,n=3,o="red",i){let u=r.circle(e,{center:t,radius:n},"dot "+o,i);return i&&setTimeout(()=>u.forEach(e=>e.remove(),i)),[...u]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(11);t.rect=function(e,t,n=r.DEFAULT_CLASS,i){let u=document.createElementNS(o.XMLNS,"rect");return u.setAttributeNS(null,"x",t[0][0].toString()),u.setAttributeNS(null,"y",t[0][1].toString()),u.setAttributeNS(null,"width",(t[1][0]-t[0][0]).toString()),u.setAttributeNS(null,"height",(t[1][1]-t[0][1]).toString()),n&&u.setAttributeNS(null,"class",n),e.appendChild(u),i&&setTimeout(()=>u.remove(),i),[u]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(11);t.polygon=function(e,t,n=r.DEFAULT_CLASS,i){let u=document.createElementNS(o.XMLNS,"path"),s=`M${t[0][0]} ${t[0][1]} L`;for(let e=0;e<t.length;e++)s+=`${t[e][0]} ${t[e][1]} `;return s+=" z",u.setAttributeNS(null,"d",s),n&&u.setAttributeNS(null,"class",n),e.appendChild(u),i&&setTimeout(()=>u.remove(),i),[u]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(11);function i(e){return 2===e?"L":3===e?"Q":4===e?"C":void 0}t.loop=function(e,t,n=r.DEFAULT_CLASS,u){if(!t.length)return[];let s=document.createElementNS(o.XMLNS,"path"),l=`M${t[0][0][0]} ${t[0][0][1]} `;for(let e=0;e<t.length;e++){let n=t[e];l+=`${i(n.length)} `;for(let e=1;e<n.length;e++)l+=`${n[e][0]} ${n[e][1]} `}return l+=" z",s.setAttributeNS(null,"d",l),n&&s.setAttributeNS(null,"class",n),e.appendChild(s),u&&setTimeout(()=>s.remove(),u),[s]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(11);t.polyline=function(e,t,n=r.DEFAULT_CLASS,i){if(t.length<2)return[];let u=document.createElementNS(o.XMLNS,"path"),s=`M${t[0][0]} ${t[0][1]} L`;for(let e=0;e<t.length;e++)s+=`${t[e][0]} ${t[e][1]} `;return u.setAttributeNS(null,"d",s),n&&u.setAttributeNS(null,"class",n),e.appendChild(u),i&&setTimeout(()=>u.remove(),i),[u]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(50),o=["red","green","cyan","blue"];t.beziers=function(e,t,n,i){let u=void 0===n,s=[];for(let i=0;i<t.length;i++){let l=t[i],c=o[i%o.length],a=u?"thin5 nofill "+c:n;s.push(...r.bezier(e,l,a))}return i&&setTimeout(()=>s.forEach(e=>e.remove()),i),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),o=n(48),i=n(50),u=n(89),s=n(161);t.bezierPiece=function(e,t,n,l=r.DEFAULT_CLASS,c){let a=[];if(n[0]===n[1]){let r=u.evaluateBezier(t,n[0]);a=o.crossHair(e,r,l,1.5)}else{let r=s.bezierFromBezierPiece(t,n);a=i.bezier(e,r,l)}return c&&setTimeout(()=>a.forEach(e=>e.remove()),c),a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(89),o=n(162);t.bezierFromBezierPiece=function(e,t){if(0===t[0]&&1===t[1])return e;if(t[0]===t[1]){let n=r.evaluateBezier(e,t[0]);return[n,n,n,n]}return 0===t[0]?o.splitAt(e,t[1])[0]:1===t[1]?o.splitAt(e,t[0])[1]:o.splitAt(o.splitAt(e,t[0])[1],(t[1]-t[0])/(1-t[0]))[0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitAt=function(e,t){return 2===e.length?function(e,t){let[[n,r],[o,i]]=e,u=1-t,s=[u*n+t*o,u*r+t*i];return[[[n,r],s],[s,[o,i]]]}(e,t):3===e.length?function(e,t){let[[n,r],[o,i],[u,s]]=e,l=1-t,c=[l*l*n+2*l*t*o+t*t*u,l*l*r+2*l*t*i+t*t*s];return[[[n,r],[l*n+t*o,l*r+t*i],c],[c,[l*o+t*u,l*i+t*s],[u,s]]]}(e,t):4===e.length?function(e,t){let[[n,r],[o,i],[u,s],[l,c]]=e,a=1-t,f=t*t,d=f*t,p=a*a,g=p*a,h=[d*l+3*a*f*u+3*p*t*o+g*n,d*c+3*a*f*s+3*p*t*i+g*r];return[[[n,r],[t*o+a*n,t*i+a*r],[f*u+2*a*t*o+p*n,f*s+2*a*t*i+p*r],h],[h,[f*l+2*t*a*u+p*o,f*c+2*t*a*s+p*i],[t*l+a*u,t*c+a*s],[l,c]]]}(e,t):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(164),o=n(21);t.quadToPolyline=function(e,t){let n=[],i={ps:e,prev:void 0,next:void 0};for(n.push(i);n.length;){let e=n.pop();if(r.isQuadFlat(e.ps,t))continue;let u=o.splitAt(e.ps,.5),s=e.prev,l=e.next,c={ps:u[0],prev:s,next:void 0},a={ps:u[1],prev:void 0,next:l};c.next=a,a.prev=c,s&&(s.next=c),l&&(l.prev=a),i===e&&(i=c),n.push(c),n.push(a)}let u=[],s=i;for(u.push(i.ps[0]);s;)u.push(s.ps[2]),s=s.next;return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(90),i=n(9);t.isQuadFlat=function(e,t){if(o.isQuadObtuse(e))return!1;let[[n,u],,[s,l]]=e;if(n===s&&u===l)return!0;let[c,a]=i.evaluate(e,.5),f=Math.pow((l-u)*c-(s-n)*a+s*u-l*n,2),d=r.squaredDistanceBetween(e[0],e[2]);return Math.abs(f/d)<Math.pow(t,2)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(3);const r=n(0),o=(n(20),n(14),n(9)),i=n(46),u=n(91);function s(e,t,n){let s=u.splitByMaxCurveLength(e,n),l=[];for(let n=0;n<s.length;n++){let u=s[n],c=o.evaluate(e,u),a=i.closestPointOnBezier(t,c);l.push({p1:c,p2:a.p,d:r.distanceBetween(c,a.p)})}return l}t.hausdorffDistanceCandidates=s,t.hausdorffDistance=function(e,t,n){let r=s(e,t,n),o=Number.NEGATIVE_INFINITY;for(let e of r)e.d>o&&(o=e.d);return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.lengthSquaredUpperBound=function(e){let t=0;for(let n=0;n<e.length-1;n++)t+=r.squaredDistanceBetween(e[n],e[n+1]);return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(92),i=n(51),u=n(1);function s(e,[t,n]){let o=u.dκMod(e);if(!(o(t)*o(n)>=0))return r.brent(o,t,n)}t.getCurvatureExtrema=function(e){if(2===e.length)return{maxCurvatureTs:[],maxNegativeCurvatureTs:[]};if(3===e.length)return{maxCurvatureTs:[],maxNegativeCurvatureTs:[]};let t=[],n=[],r=o.getCurvatureExtremaBrackets(e).brackets,u=i.κ(e),l=r.length;for(let o=0;o<l;o++){let i=r[o];if(!i)continue;let l=s(e,i);if(!l)continue;let c=-u(l),a=-u(i[0]),f=-u(i[1]);c>a&&c>f?c>0&&t.push(l):c<=a&&c<=f&&c<0&&n.push(l)}return{maxCurvatureTs:t,maxNegativeCurvatureTs:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(92);t.getInflections=function(e){return r.getCurvatureExtremaBrackets(e).inflections}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(26),o=n(93);t.splitByMaxCurvature=function(e,t=1.1){let n=[0,1],i=[[0,1]],u=r.fromTo(e);for(;i.length;){let e=i.pop(),r=u(e[0],e[1]);if(o.flatness(r)>t){let t=(e[0]+e[1])/2;i.push([e[0],t]),i.push([t,e[1]]),n.push(t)}}return n.sort((e,t)=>e-t),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(26),o=n(30),i=n(0);t.splitByCurvatureAndLength=function(e,t=1.01,n=100){let u=[0,1],s=[[0,1]],l=r.fromTo(e);for(;s.length;){let e=s.pop(),r=l(e[0],e[1]),c=o.lengthUpperBound(r);if(1+c/n*(c/i.distanceBetween(r[0],r[r.length-1])-1)>t){let t=(e[0]+e[1])/2;s.push([e[0],t]),s.push([t,e[1]]),u.push(t)}}return u.sort((e,t)=>e-t),u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8);t.detNaive=function e(t){let n=0;if(1===t.length)return t[0][0];if(2==t.length)return n=t[0][0]*t[1][1]-t[1][0]*t[0][1];for(let i=0;i<t.length;i++){let u=[];for(let e=0;e<t.length-1;e++){let e=[];for(let n=0;n<t.length-1;n++)e.push(0);u.push(e)}for(var r=1;r<t.length;r++)for(var o=0;o<t.length;o++)o<i?u[r-1][o]=t[r][o]:o>i&&(u[r-1][o-1]=t[r][o]);n+=(i%2==0?1:-1)*t[0][i]*e(u)}return n},t.detSlowExact=function e(t){var n=[0];if(1===t.length)return t[0][0];if(2==t.length){let e=r.expansionProduct(t[0][0],t[1][1]),n=r.negativeOf(r.expansionProduct(t[1][0],t[0][1]));return r.fastExpansionSum(e,n)}for(let u=0;u<t.length;u++){let s=[];for(let e=0;e<t.length-1;e++){for(var o=[],i=0;i<t.length-1;i++)o.push([0]);s.push(o)}for(let e=1;e<t.length;e++)for(let n=0;n<t.length;n++)n<u?s[e-1][n]=t[e][n]:n>u&&(s[e-1][n-1]=t[e][n]);let l=r.expansionProduct(t[0][u],e(s));u%2!=0&&(l=r.negativeOf(l)),n=r.fastExpansionSum(n,l)}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9),o=n(94);t.areBeziersInSameKFamily=function(e,t){let n=r.evaluate(e),i=[.03125,.0625,.125,.25,.5,2,4,8,16,32].map(n);for(let e of i)if(!o.isPointOnBezierExtension(t,e))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8),o=n(0),i=n(51);t.getInterfaceCcw=function(e,t){let n=e[e.length-2],u=t[0],s=t[1],l=[u[0]-n[0],u[1]-n[1]],c=[s[0]-u[0],s[1]-u[1]],a=r.orient2d(n,u,s);return 0!==a?a:o.dot(l,c)>0?0:i.compareCurvaturesAtInterface(e.slice().reverse(),t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(95);function o(e){return function(e){for(let t=1;t<e.length;t++)if(e[t-1]>e[t])return!1;return!0}(e)||function(e){for(let t=1;t<e.length;t++)if(e[t-1]<e[t])return!1;return!0}(e)}t.isSelfOverlapping=function(e){if(!r.isLine(e))return!1;let t=e.map(e=>e[0]),n=e.map(e=>e[1]);return!(o(t)&&o(n))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),o=n(0),i=n(97);let u=r.memoize(function(e){let[t,n]=e[0],[r,u]=e[e.length-1],s=Math.sqrt((r-t)*(r-t)+(u-n)*(u-n)),l=(u-n)/s,c=(r-t)/s,a=function(e,t,n){let r=e[0].map(e=>-e),u=o.translateThenRotatePs(r,-t,n,e);return i.getBoundingBox(u)}(e,l,c),[[f,d],[p,g]]=a,h=[a[0],[p,d],a[1],[f,g]];return o.rotateThenTranslatePs(l,c,e[0],h)});t.getBoundingBoxTight=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeCpNode=function(e,t){let n=e.prev,r=e.next;n.next=r,r.prev=n;let o=r.prevOnCircle,i=n.nextOnCircle;o.next=i,i.prev=o,t&&t.remove(e,!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=n(2);t.getEdgeDirection=function(e){let t,n=e.cp.circle.center,u=e,s=e.nextOnCircle,l=u.cp.pointOnShape,c=s.cp.pointOnShape,a=l.p,f=c.p;if(i.PointOnShape.isSharpCorner(l)){let e,n;0===l.t?(e=l.curve,n=l.curve.prev):1===l.t&&(e=l.curve.next,n=l.curve);let i=o.tangent(e.ps)(0),u=r.reverse(o.tangent(n.ps)(1)),s=r.dot(i,u),c=Math.sqrt((1+s)/2),a=Math.sqrt((1-s)/2);t=r.rotate(a,c,u)}else t=a[0]===f[0]&&a[1]===f[1]?r.fromTo(a,n):r.rotate90Degrees(r.fromTo(a,f));return[n,r.translate(r.toUnitVector(t),n)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(23),o=n(179),i=n(190),u=n(191),s=n(203),l=n(206),c=n(207),a=n(208),f=n(209),d=n(219),p=n(221),g=n(223),h=n(224);function _(e){return t=>{let n=g.getLoopArea(t);return Math.abs(n)>e}}function v(e,t,n=1.001,o=10){let g=i.getExtreme(e);l.addDebugInfo1(e);let h=e.map(d.createGetInterestingPointsOnLoop(n,o)),_=c.getPotential2Prongs(h),v=a.getSharpCorners(h),b=new Map,m=s.createInitialCpGraph(e,b,v,t);if(p.findAndAddHoleClosing2Prongs(e,b,g),"undefined"!=typeof _debug_&&_debug_.directives.stopAfterHoleClosers)return;if(l.addDebugInfo2(h),m=f.findAndAdd2ProngsOnAllPaths(e,b,_,g),l.addDebugInfo3(),"undefined"!=typeof _debug_&&_debug_.directives.stopAfterTwoProngs)return;if(void 0===m)return;if(u.findAndAddAll3Prongs(b,m,g),"undefined"!=typeof _debug_&&_debug_.directives.stopAfterThreeProngs)return;let P=new r.Mat(m,b);return l.addDebugInfo4(P),P}t.findMats=function(e,t=1.01,n=10){if((t<1.001||t>=2)&&(t=1.01),(n<1||n>1e3)&&(n=10),"undefined"!=typeof _debug_){_debug_.generated.timing.simplify[0]=performance.now()}let r=h.normalizeLoops(e,14),{loopss:i,xMap:u}=o.simplifyPaths(r);for(let e=0;e<i.length;e++){let t=i[e].filter(_(.1));i[e]=t}if(i=i.filter(e=>e.length),"undefined"!=typeof _debug_){let e=_debug_.generated.timing;e.simplify[1]+=performance.now()-e.simplify[0]}let s=[];for(let e of i){e.sort(o.ascendingByTopmostPoint);let r=v(e,u,t,n);r&&s.push(r)}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),o=n(22),i=n(180),u=n(182),s=n(188);function l(e){let t=[],n=[e];for(;n.length;){r(n.pop())}return t;function r(e){Math.abs(e.windingNum)<=1&&t.push(e);for(let t of e.children)n.push(t)}}function c(e,t){let n=o.getLoopBounds(e),r=o.getLoopBounds(t);return n.minY.p[1]-r.minY.p[1]}t.simplifyPaths=function(e){let t=i.getIntersections(e),n=new Set,o={parent:void 0,children:new Set,beziers:void 0,loop:void 0,orientation:void 0,windingNum:0};if(e.sort(c),"undefined"!=typeof _debug_)for(let t of e)_debug_.fs.nameObj(t);for(let r of e){if(r.curves.length<=1)continue;if(n.has(r))continue;n.add(r);let e=s.getTightestContainingLoop(o,r);u.completePath(t,n,e,r)}let a=function(e){let t=[],n=[e];for(;n.length;){let e=n.pop();for(let r of e.children)0===e.windingNum&&t.push(r),n.push(r);0===e.windingNum&&(e.children=new Set)}return t}(o).map(l).map(e=>e.map(e=>new r.Loop(e.beziers))),f=new Map;for(let e of t)for(let t of e[1])t.isDummy||f.set(t.outPs,{ps:t.opposite.outPs});return{loopss:a,xMap:f}},t.ascendingByTopmostPoint=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(100),i=n(2),u=n(181),s=n(101),l=n(102),c=1e-10;function a(e,t,n){let r=t.slice();if(!(Math.abs(n[0])<c&&Math.abs(n[1]-1)<c||Math.abs(n[0]-1)<c&&Math.abs(n[1])<c||Math.abs(n[0])<c&&Math.abs(n[1])<c||Math.abs(n[0]-1)<c&&Math.abs(n[1]-1)<c)||r[0].next!==r[1]&&r[1].next!==r[0])return Math.abs(n[0])<c&&(n[0]=0),Math.abs(n[1])<c&&(n[1]=0),Math.abs(n[0]-1)<c?(r[0]=r[0].next,n[0]=0,void u.pairSet_has(e,[r[0],r[1]])):Math.abs(n[1]-1)<c?(r[1]=r[1].next,n[1]=0,void u.pairSet_has(e,[r[0],r[1]])):r}t.getIntersections=function(e){let{boxes:t,boxInfoMap:n}=function(e){let t=new Map,n=[];for(let o of e)o.curves.forEach(function(e){let i=r.getBoundingBox(e.ps);n.push(i),t.set(i,{box:i,loop:o,curve:e})});return{boxes:n,boxInfoMap:t}}(e),c=s.sweepLine(t,e=>Math.min(e[0][0],e[1][0]),e=>Math.max(e[0][0],e[1][0]),l.areBoxesIntersecting(!0)),f=new Map,d=new Map;for(let e=0;e<c.length;e++){let[t,s]=c[e],l=[n.get(t).curve,n.get(s).curve];if(u.pairSet_has(d,l))continue;u.pairSet_add(d,l);let p=l.map(e=>e.ps),g=r.bezier3Intersection(p[0],p[1],1e-12);if(g.length)for(let e of g){let t=a(d,l,e);if(void 0===t)continue;let n=[];for(let r of[0,1]){let u=t[r],s=new o.X(new i.PointOnShape(u,e[r]));"undefined"!=typeof _debug_&&0===r&&_debug_.generated.elems.intersection.push(s);let l=f.get(u)||[];l.length||f.set(u,l),l.push(s),n.push(s)}n[0].opposite=n[1],n[1].opposite=n[0]}}return f}},function(e,t,n){"use strict";function r(e,t){function n(t,n){let r=e.get(t);r||(r=new Set,e.set(t,r)),r.add(n)}o(e,t)||(n(t[0],t[1]),n(t[1],t[0]))}function o(e,t){let n,r=(n=e.get(t[0]))&&n.has(t[1]),o=(n=e.get(t[1]))&&n.has(t[0]);return r||o}Object.defineProperty(t,"__esModule",{value:!0}),t.pairSet_add=r,t.pairSet_has=o,t.pairSet_asArray=function(e){let t=[],n=new Map;for(let i of e)for(let e of i[1]){let u=[i[0],e];o(n,u)||(t.push(u),r(n,u))}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),o=n(183),i=n(185),u=n(187);t.completePath=function(e,t,n,s){let l=i.getInitialX(e,n,s),c=l.pos.curve,a=e.get(c)||[];0===a.length&&e.set(c,a),a.push(l);let f=[l],d=new Set;for(;f.length;){let n=f.pop();if(t.add(n.pos.curve.loop),d.has(n))continue;let i=u.getLoopMetrics(n);i.beziers=o.completeLoop(e,d,f,i,n),i.loop=new r.Loop(i.beziers)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(184);function i(e,t,n){if(t&&!t.isDummy){(e?t:t.opposite).outPs=n,t=void 0}}t.completeLoop=function(e,t,n,u,s){let l=[],c=0===u.windingNum&&-1===u.orientation||0!==u.windingNum&&1===u.orientation,a=c?s.pos:s.opposite.pos,f=a.curve,d=a.t,p=f,g=d,h=s.isDummy?void 0:c?s.opposite:s,_=!0;for(;;){let s=e.get(p),a=s?o.getNextX(s,g,!c,_):void 0;if(a){if(_=!0,g!==a.pos.t){let e=c?r.reverse(r.fromTo(p.ps)(a.pos.t,g)):r.fromTo(p.ps)(g,a.pos.t);l.push(e),i(c,h,e),h=a}p=a.opposite.pos.curve,g=a.opposite.pos.t;let e=c?a.opposite:a;e.loopTree=u,t.has(e.opposite)||n.push(e.opposite),t.add(e)}else{if(_=!1,g!==(c?0:1)){let e=c?r.reverse(r.fromTo(p.ps)(0,g)):r.fromTo(p.ps)(g,1);l.push(e),i(c,h,e),h=void 0}p=c?p.prev:p.next,g=c?1:0}if(p===f&&g===d)break}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextX=function(e,t,n,r){let o=void 0,i=Number.POSITIVE_INFINITY;for(let u=0;u<e.length;u++){let s=e[u],l=s.pos.t,c=n?l-t:t-l;(c>0||0===c&&!r)&&c<i&&(o=s,i=c)}return o},t.getThisX=function(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(r.pos.t-t==0)return r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(186),i=n(22),u=n(100);t.getInitialX=function(e,t,n){let s={parent:t,children:new Set,beziers:[],loop:void 0,orientation:o.isPathPositivelyOrientated(n)?-1:1,windingNum:t.windingNum},l=i.getLoopBounds(n).minY;e.get(l.curve)||(l=new r.PointOnShape(l.curve,0));let c=new u.X(l,!0,void 0,s);return c.opposite=c,c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(7),i=n(13),u=n(22);let s=o.memoize(function(e){let t,n=u.getLoopBounds(e).minY,o=n.t;0===o?(t=n.curve.prev,o=1):t=n.curve;let s=t.ps,l=r.tangent(s)(o);if(1!==o)return l[0]>0;let c=t.next.ps,a=r.tangent(c)(0);return l[0]*a[0]>0?l[0]>0:i.getCorner(s,c).isDull});t.isPathPositivelyOrientated=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(0);t.getLoopMetrics=function(e){let t,n,i,u=e.opposite.loopTree,s=u.orientation,l=u.windingNum,c=e.opposite.pos.curve.ps,a=e.pos.curve.ps;if(c!==a){let f=r.tangent(c,e.opposite.pos.t),d=r.tangent(a,e.pos.t),p=o.cross(f,d)>0,g=p&&1===s||!p&&-1===s;t=g?-1*s:1*s,n=l+(g?-2*s:s),i=g?u.parent:u}else n=l+(t=1===s?-1:1),i=u.parent;let f={parent:i,children:new Set,beziers:void 0,loop:void 0,orientation:t,windingNum:n};return i.children.add(f),f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(189);t.getTightestContainingLoop=function(e,t){let n=void 0,o=[e];for(;o.length;){i(o.pop())}return n;function i(i){if(i===e||r.isLoopInLoop([t,i.loop])){n=i;for(let e of i.children)o.push(e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(1),i=n(2),u=n(22),s=1e-6;t.isLoopInLoop=function(e){let t=0,n=1231;do{t++;let i=r.flatCoefficients(1,0,1,n),u=i.p[0];n=i.seed;let s=e[0].curves.length,c=r.flatCoefficients(1,0,s,n),a=Math.floor(c.p[0]);n=c.seed;let f=e[0].curves[a].ps,d=l(e,o.evaluate(f,u));if(void 0!==d)return d}while(t<10);return;function l(e,t){if(function(e){let t=e.map(u.getLoopBounds).map(e=>({minX:e.minX.p[0],maxX:e.maxX.p[0],minY:e.minY.p[1],maxY:e.maxY.p[1]}));return t[0].minX<t[1].minX||t[0].maxX>t[1].maxX||t[0].minY<t[1].minY||t[0].maxY>t[1].maxY}(e))return!1;let n=function(e,t,n){let[u,l]=t,c=e.curves,a=[];for(let e=0;e<c.length;e++){let f=c[e],d=f.ps,[[p,g],[h,_]]=o.getBoundingBox(d),v=("left"===n||"right"===n)&&(g>l||_<l)||("up"===n||"down"===n)&&(p>u||h<u);if(v=v||"left"===n&&p>u||"right"===n&&h<u||"down"===n&&g>l||"up"===n&&_<l)continue;let b,m,P,x=[],M="left"===n||"up"===n;"left"===n||"right"===n?(b=o.getY,m=[0,-l],P=0):(b=o.getX,m=[-u,0],P=1);let w=o.translate(m,d),O=b(w),y=o.evaluate(w),C=r.allRoots(O,0-s,1+s);for(let e=0;e<C.length;e++){let n=C[e];if(Math.abs(n)<s||Math.abs(n-1)<s)return;let r=y(n);(M&&t[P]>=r[P]||!M&&t[P]<=r[P])&&x.push(n)}if(1===x.length||3===x.length)for(let e of x){let t=o.tangent(d,e);if(("left"===n||"right"===n)&&Math.abs(t[1])<s||("down"===n||"up"===n)&&Math.abs(t[0])<s)return}a.push(...x.map(e=>new i.PointOnShape(f,e)))}return a}(e[1],t,"left");return n?n.length%2!=0:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32);t.getExtreme=function(e){let t=r.getShapeBounds(e);return Math.max(Math.abs(t.minX.p[0]),Math.abs(t.minY.p[1]),Math.abs(t.maxX.p[0]),Math.abs(t.maxY.p[1]))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(192),i=n(202);function u(e,t,n){function r(t,n){let r=e.get(t);r||(r=new Set,e.set(t,r)),r.add(n)}void 0!==t&&(r(t,n),r(n,t))}function s(e,t,n){let r,o=(r=e.get(t))&&r.has(n),i=(r=e.get(n))&&r.has(t);return o||i}function l(e){let t=e;if(t===t.next.prevOnCircle)return[t];let n=[];do{n.push(t);let e=t.next.prevOnCircle;t=t=t===e?t.next.next:e}while(t!==e);return n}function c(e,t,n){let r;do{(r=l(t)).length>2&&a(e,r,n)}while(r.length>2);return r}function a(e,t,n){let u=[];for(let e of t)u.push([e,e.next]);let s=o.find3Prong(u,n),l=[];for(let e=0;e<3;e++)l.push(r.PointOnShape.calcOrder(s.circle,s.ps[e]));let c=i.add3Prong(e,l,s);"undefined"!=typeof _debug_&&function(e,t){let n=_debug_.generated.elems.threeProng,r=n.length,o=n[r-1];o.visitedCps=t,o.circle=e}(c,t)}t.findAndAddAll3Prongs=function(e,t,n){let o=new Map,i=[{fromCpNode:void 0,cpStart:t}];for(;i.length;){let{fromCpNode:t,cpStart:l}=i.shift();u(o,t,l);for(let t of l.getCpNodesOnCircle())r.PointOnShape.isSharpCorner(t.cp.pointOnShape)||c(e,t,n),s(o,t,t.next)||i.push({fromCpNode:l,cpStart:t.next})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(193),i=n(194),u=n(53);t.find3Prong=function(e,t){let n=e.map(u.getBoundaryPieceBeziers);if("undefined"!=typeof _debug_){let e=_debug_.generated.elems.threeProng;e.push(new o.ThreeProngForDebugging);let t=e[e.length-1];t.boundaries=[];for(let e of n){let n=[];t.boundaries.push(n);for(let t of e){let e=r.fromTo(t.curve.ps)(t.ts[0],t.ts[1]);n.push(e)}}t.traces=[]}let s,l=[],c=void 0,a=Number.POSITIVE_INFINITY;for(let r=1;r<e.length-1;r++)for(let o=0;o<3;o++){if("undefined"!=typeof _debug_){let e=_debug_.generated.elems.threeProng,t=[];e[e.length-1].traces.push(t)}let u=i.find3ProngForDelta3s(e,r,o,n,t);if(!u)continue;let{circle:f,ps:d,error:p,"δ3s":g}=u;"undefined"!=typeof _debug_&&l.push({circle:f,ps:d}),p<a&&(a=p,c=r-1,s={circle:f,ps:d,"δ3s":g})}if("undefined"!=typeof _debug_){let t=_debug_.generated.elems.threeProng,n=t[t.length-1];n.generated=_debug_.generated,n.circle=s.circle,n.poss=s.ps,n.cp3ss=s.δ3s,n.cpss=e,n.bestIndx=c,n.candidateThreeProngs=l}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.ThreeProngForDebugging=class{constructor(){}get cpsSimple(){return this.cpss.map(e=>[r.PointOnShape.toHumanString(e[0].cp.pointOnShape),r.PointOnShape.toHumanString(e[1].cp.pointOnShape)])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=n(10),u=n(2),s=n(27),l=n(200),c=n(105),a=n(201),f=n(13),d=r.fromTo;t.find3ProngForDelta3s=function(e,t,n,p,g){const h=1e-10*g;let _,v,b=[e[0],e[t],e[e.length-1]],m=[p[0],p[t],p[e.length-1]],P=[[b[0],b[1],b[2]],[b[1],b[2],b[0]],[b[2],b[0],b[1]]][n],x=[[m[0],m[1],m[2]],[m[1],m[2],m[0]],[m[2],m[0],m[1]]][n];if(P[0][0].isSharp())return;let M=0,w=l.calcInitial3ProngCenter(P,x);if("undefined"!=typeof _debug_){let e=_debug_.generated.elems.threeProng,t=e[e.length-1];t.traces[t.traces.length-1].push(w)}let O=Number.POSITIVE_INFINITY;for(;O>h&&M<10;){if(M++,_=c.getClosestPoints(w,x),!Number.isFinite(w[0])||!Number.isFinite(w[1]))return;v=r.circumCenter(_.map(e=>e.p));let e=d(w,v);if(!Number.isFinite(e[0])||!Number.isFinite(e[1]))return;let t=a.calcBetterX(x,w,e);if(w=t.newX,_=t.newPs,"undefined"!=typeof _debug_){let e=_debug_.generated.elems.threeProng,t=e[e.length-1];t.traces[t.traces.length-1].push(w)}let n=r.len(e);O=Math.abs(n-t.newV)}let y=(r.distanceBetween(w,_[0].p)+r.distanceBetween(w,_[1].p)+r.distanceBetween(w,_[2].p))/3,C=new i.Circle(w,y),S=0;for(let e=0;e<3;e++){let t=_[e],n=r.toUnitVector(r.fromTo(t.p,w)),i=r.rotate90Degrees(n);if(u.PointOnShape.isDullCorner(t)){let e=f.Curve.getCornerAtEnd(t.curve).tangents.map(r.rotate90Degrees),o=Math.asin(r.cross(e[0],n)),i=Math.asin(r.cross(n,e[1])),u=0;o>0&&(u+=o),i>0&&(u+=i),S+=u}else{let e=r.toUnitVector(o.tangent(t.curve.ps,t.t));S+=Math.abs(Math.asin(r.cross(i,e)))}}let I=[];for(let e=0;e<p.length;e++){let t=s.getClosestBoundaryPoint(p[e],w,void 0,void 0);I.push(r.distanceBetween(t.pos.p,w))}let T=Math.min(...I);return{ps:_,circle:C,error:1*Math.abs(y-T)+1*S,"δ3s":P}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(0);t.getBestDistanceSquared=function(e,t){let n=Number.POSITIVE_INFINITY;for(let i=0;i<e.length;i++){let u=e[i],s=u.curve.ps,l=r.evaluate(s),c=l(u.ts[0]),a=l(u.ts[1]),f=Math.min(o.squaredDistanceBetween(t,c),o.squaredDistanceBetween(t,a));f<n&&(n=f)}return 1.01*n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(104);t.cullByLooseBoundingBox=function(e,t,n){let i=[];for(let u=0;u<e.length;u++){let s=e[u],l=s.curve.ps,c=r.getBoundingBox(l);o.getClosestSquareDistanceToRect(c,t)<=n&&i.push(s)}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(198);t.cullByTightBoundingBox=function(e,t,n){let i=[];for(let u=0;u<e.length;u++){let s=e[u],l=s.curve.ps,c=r.getBoundingBoxTight(l);o.getClosestSquaredDistanceToRotatedRect(c,t)<=n&&i.push(s)}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.getClosestSquaredDistanceToRotatedRect=function(e,t){let n=[0,1,2,3].map(n=>r.squaredDistanceBetweenPointAndLineSegment(t,[e[n],e[(n+1)%4]])),o=r.squaredDistanceBetween(e[0],e[1]),i=r.squaredDistanceBetween(e[0],e[3]);return n[0]<=i&&n[2]<=i&&n[1]<=o&&n[3]<=o?0:Math.min(...n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(0),i=n(1);let u=1e-11;t.closestPointOnCurve=function(e,t,n=[0,1],s,l){let c=i.getTangentPolyFromPoint(e.ps,t);e===s&&(c=r.deflate(c,l));let a=r.allRoots(c,n[0],n[1]),f=!0,d=!0;(1===l&&e===s.next||0===l&&e===s)&&(f=!1),(0===l&&e===s.prev||1===l&&e===s)&&(d=!1),0===n[0]?f&&a.push(0):1===n[0]?d&&a.push(1):a.push(n[0]),0===n[1]?f&&a.push(0):1===n[1]?d&&a.push(1):a.push(n[1]);let p=[];for(let e=0;e<a.length;e++){let t=a[e];0!==t&&t<u?t=0:1!==t&&1-t<u&&(t=1),p.push(t)}let g=i.evaluate(e.ps),h=p.map(e=>({p:g(e),t:e}));return o.getObjClosestTo(t,h,e=>e.p)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(27);t.calcInitial3ProngCenter=function(e,t){let n=e[0][0].cp.circle.center,i=o.getClosestBoundaryPoint(t[1],n,void 0,void 0),u=[e[0][0].cp.pointOnShape.p,i.pos.p,e[2][1].cp.pointOnShape.p];return r.circumCenter(u)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(105);t.calcBetterX=function(e,t,n){let i,u,s,l,c=r.len(n),a=1,f=0;do{let d=r.scale(n,a);u=r.translate(d,t),s=o.getClosestPoints(u,e);let p=r.circumCenter(s.map(e=>e.p)),g=r.fromTo(u,p);i=(l=r.len(g))<c,a/=2,f++}while(!i&&f<3);return{newX:u,newV:l,newPs:s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(106),o=n(54);t.add3Prong=function(e,t,n){let{circle:i,ps:u,"δ3s":s}=n;return o.isAnotherCpCloseby(e,u[0],i,t[0],0,1e3,"blue"),o.isAnotherCpCloseby(e,u[1],i,t[1],0,1e3,"blue"),o.isAnotherCpCloseby(e,u[2],i,t[2],0,1e3,"blue"),r.addToCpGraph(i,t,e,u,s),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(107),o=n(10),i=n(6),u=n(15);t.createInitialCpGraph=function(e,t,n,s){let l;for(let c=0;c<n.length;c++){let a=n[c],f=new r.default(i.CpNode.comparator,[],!0),d=void 0,p=void 0;for(let e of a){let t=e.curve.next.ps,n=!!s.get(t),r=new o.Circle(e.p,0),l=new u.ContactPoint(e,r,-1,0),c=new u.ContactPoint(e,r,1,0);d=i.CpNode.insert(!1,n,f,l,p),p=i.CpNode.insert(!1,n,f,c,d),d.prevOnCircle=p,p.prevOnCircle=d,d.nextOnCircle=p,p.nextOnCircle=d}l||(l=d);let g=e[c];t.set(g,f)}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(108);t.default=class{constructor(e,t){this.data=t?[e]:e,this.color=r.default.RED}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(r||(r={})),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(13);t.addDebugInfo1=function(e){if("undefined"==typeof _debug_)return;for(let t of e)_debug_.fs.nameObj(t,"l|");let t=_debug_.generated;t.timing.holeClosers[0]=performance.now(),t.elems.loop.push(...e),t.elems.loops.push(e);for(let n of e){let e=0;n.curves.forEach(function(n){let i=n.ps,u=r.getBoundingHull(i);t.elems.boundingHull.push(u);let s=r.getBoundingBox(i);t.elems.looseBoundingBox.push(s);let l=r.getBoundingBoxTight(i);t.elems.tightBoundingBox.push(l);let c=o.Curve.getCornerAtEnd(n);c.isSharp?t.elems.sharpCorner.push(n):c.isDull&&t.elems.dullCorner.push(n),e++})}},t.addDebugInfo2=function(e){if("undefined"==typeof _debug_)return;let t=_debug_.generated.timing,n=performance.now();t.holeClosers[1]+=n-t.holeClosers[0],t.oneAnd2Prongs[0]=n},t.addDebugInfo3=function(){if("undefined"==typeof _debug_)return;let e=_debug_.generated.timing,t=performance.now();e.oneAnd2Prongs[1]+=t-e.oneAnd2Prongs[0],e.threeProngs[0]=t},t.addDebugInfo4=function(e){if("undefined"==typeof _debug_)return;let t=_debug_.generated,n=t.timing;t.elems.mat.push(e),n.threeProngs[1]+=performance.now()-n.threeProngs[0],n.mats[1]=n.holeClosers[1]+n.oneAnd2Prongs[1]+n.threeProngs[1]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.getPotential2Prongs=function(e){let t=[];for(let n of e){let e=[];for(let t of n)r.PointOnShape.isQuiteSharpCorner(t)||e.push(t);t.push(e)}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.getSharpCorners=function(e){let t=[];for(let n of e){let e=[];for(let t of n)r.PointOnShape.isQuiteSharpCorner(t)&&e.push(t);t.push(e)}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(210);t.findAndAdd2ProngsOnAllPaths=function(e,t,n,o){let i;for(let u=0;u<n.length;u++){let s=n[u];i=r.findAndAdd2Prongs(e,t,u,s,o)}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32),o=n(109),i=n(111);t.findAndAdd2Prongs=function(e,t,n,u,s){let l,c=u.length,a=function(e){let t=[];for(let n=0;n<e;n++)t.push(n);return t}(c),f=r.getShapeBounds(e),d=Math.pow(f.maxX.p[0]-f.minX.p[0],2)+Math.pow(f.maxY.p[1]-f.minY.p[1],2);for(let r=0;r<c;r++){let c,f=u[a[r]];if(c=o.find2Prong(e,s,d,t,f,!1,n)){let{circle:e,zs:n}=c,r=i.add2Prong(t,e,f,n,!1,s);!l&&r&&(l=r)}if("undefined"!=typeof _debug_&&r+1===_debug_.directives.stopAfterTwoProngsNum)return}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(106),i=n(54);t.add1Prong=function(e,t,n){if(r.PointOnShape.isDullCorner(n))return void("undefined"!=typeof _debug_&&_debug_.generated.elems.oneProngAtDullCorner.push(n));let u=r.PointOnShape.getOsculatingCircle(e,n),s=r.PointOnShape.calcOrder(u,n);i.isAnotherCpCloseby(t,n,u,s,0,1e3,"magenta")||(o.addToCpGraph(u,[-.5,.5],t,[n,n]),"undefined"!=typeof _debug_&&_debug_.generated.elems.oneProng.push(n))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(213),o=n(110);t.addDebugInfo=function(e,t,n,i,u,s,l,c){let a=new r.TwoProngForDebugging(_debug_.generated,e,n,s,u?u.p:void 0,i,l,t,c,!1,!1),f=o.getTwoProngType(a);_debug_.generated.elems[f].push(a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TwoProngForDebugging=class{constructor(e,t,n,r,o,i,u,s,l,c,a,f){this.generated=e,this.bezierPieces=t,this.pos=n,this.δ=r,this.z=o,this.circle=i,this.xs=u,this.failed=s,this.holeClosing=l,this.notAdded=c,this.deleted=a,this.cpNode=f}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(104);t.cullBezierPieces=function(e,t,n){if(e.length<=5)return e;let i=[];for(let u of e){let e=u.curve.ps,s=r.getBoundingBox(e);o.getClosestSquareDistanceToRect(s,t)<=1.001*n&&i.push(u)}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findEquidistantPointOnLine=function(e,t,n){let r,o,i,u,s,l,c=Math.abs((e[1]-t[1])/(e[0]-t[0]))>1;c?(r=e[1],o=e[0],i=t[1],u=t[0],s=n[1],l=n[0]):(r=e[0],o=e[1],i=t[0],u=t[1],s=n[0],l=n[1]);let a=(o-u)/(r-i),f=u-a*i,d=(i*i+u*u-s*s-l*l+2*f*(l-u))/(2*(i-s+a*(u-l))),p=a*d+f;return c?[p,d]:[d,p]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(33),o=n(53),i=n(52),u=n(2);t.getInitialBezierPieces=function(e,t,n,s,l){let c,a;if(e){c=[];for(let e=0;e<t;e++){let t=n[e].curves.map(e=>new i.BezierPiece(e,[0,1]));c.push(...t)}}else{let e=u.PointOnShape.isDullCorner(l)?1===l.t?-1:1:0,f=n[t],d=r.getNeighbouringPoints(s.get(f),l,e,0)[0];a=[d,d],c=d&&d!==d.next.next?o.getBoundaryPieceBeziers(a):f.curves.map(e=>new i.BezierPiece(e,[0,1]))}return{bezierPieces:c,"δ":a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(2),i=n(103),u=n(218);t.getCloseBoundaryPoints=function(e,t,n,s){let l=n.curve,c=n.t,a=n.p;e=i.cullBezierPieces(e,t);let f=[];for(let n=0;n<e.length;n++){let i=e[n],a=u.closestPointsOnCurve(i.curve,t,i.ts,l,c);for(let e=0;e<a.length;e++){let n=a[e],u=r.distanceBetween(n.p,t),l=i.curve,c=n.t;Math.abs(u-s)<1e-9&&(0===c&&(c=1,l=i.curve.prev),f.push({pos:new o.PointOnShape(l,c),d:u}))}}if(f.length>1){let e=[];for(let t=0;t<f.length;t++){f[t];e.push(t)}let t=[];for(let n=0;n<e.length;n++)for(let r=n+1;r<e.length;r++){if(n===r)continue;let o=f[e[n]].pos.p,i=f[e[r]].pos.p,u=a;(Math.abs(o[0]-i[0])<1e-6&&Math.abs(o[1]-i[1])<1e-6||Math.abs(o[0]-u[0])<1e-6&&Math.abs(o[1]-u[1])<1e-6)&&t.push(e[n])}for(let e=t.length-1;e>=0;e--)f.splice(t[e],1)}return f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),o=n(1);t.closestPointsOnCurve=function(e,t,n=[0,1],i,u){let s=o.getTangentPolyFromPoint(e.ps,t);e===i&&(s=r.deflate(s,u));let l=r.allRoots(s,n[0],n[1]),c=!0,a=!0;(1===u&&e===i.next||e===i&&0===u)&&(c=!1),(0===u&&e===i.prev||e===i&&1===u)&&(a=!1),0===n[0]?c&&l.push(n[0]):1===n[0]?a&&l.push(n[0]):l.push(n[0]),0===n[1]?c&&l.push(n[1]):1===n[1]?a&&l.push(n[1]):l.push(n[1]);let f=[];for(let e=0;e<l.length;e++){let t=l[e];0!==t&&t<1e-10?t=0:1!==t&&1-t<1e-10&&(t=1),f.push(t)}let d=o.evaluate(e.ps);return l.map(e=>({p:d(e),t:e}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(220),o=n(1),i=n(2);t.createGetInterestingPointsOnLoop=function(e=1.001,t=10){return function(n){let u=[];for(let s=0;s<n.curves.length;s++){let l=n.curves[s],{maxCurvatureTs:c,maxNegativeCurvatureTs:a}=o.getCurvatureExtrema(l.ps),f=c.map(e=>new i.PointOnShape(l,e)),d=a.map(e=>new i.PointOnShape(l,e));u.push(...r.getContactCirclesAtInterface(l),...f,...d);let p=o.splitByCurvatureAndLength(l.ps,e,t);2===p.length&&(p=[0,.5,1]);for(let e=1;e<p.length-1;e++)u.push(new i.PointOnShape(l,p[e]))}return u.sort(i.PointOnShape.compare),u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),o=n(2);t.getContactCirclesAtInterface=function(e){let{isQuiteSharp:t,isQuiteDull:n}=r.Curve.getCornerAtEnd(e);return t?[new o.PointOnShape(e,1)]:n?[new o.PointOnShape(e,1),new o.PointOnShape(e.next,0)]:[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(32),o=n(222),i=n(109),u=n(111);t.findAndAddHoleClosing2Prongs=function(e,t,n){let s=r.getShapeBounds(e),l=Math.pow(s.maxX.p[0]-s.minX.p[0],2)+Math.pow(s.maxY.p[1]-s.minY.p[1],2),c=e.map(o.getMinYPos);for(let r=1;r<c.length;r++){let o=c[r],s=i.find2Prong(e,n,l,t,o,!0,r);if(!s)throw new Error("Unable to find hole-closing 2-prong");let{circle:a,zs:f}=s;u.add2Prong(t,a,o,[f[0]],!0,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(22);t.getMinYPos=function(e){let t=r.getLoopBounds(e).minY;return"undefined"!=typeof _debug_&&_debug_.generated.elems.minY.push(t),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(72),i=n(3);t.getLoopArea=function(e){let t=0;for(let n of e.curves){let e=n.ps,u=r.getX(e),s=r.getY(e),l=r.getDx(e),c=r.getDy(e),a=i.multiply(u,c),f=i.negate(i.multiply(s,l)),d=i.add(a,f),p=i.evaluate(d);t+=o.gaussQuadrature(p,[0,1],16)}return-t/2}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),o=n(225),i=n(226),u=n(1),s=n(101),l=n(230);function c(e,t,n){let r,{v:o,seed:i}=f(t,3);return{p:r=0===o?[e[0],e[1]-n]:1===o?[e[0],e[1]+n]:2===o?[e[0]-n,e[1]]:[e[0]+n,e[1]],seed:i}}function a(e,t,n){return e.map((e,r)=>r===n?t:e)}function f(e,t){return e=function(e=d){return(134775813*e+1)%p}(e),{v:Math.floor(e/p*(t+1)),seed:e}}t.normalizeLoops=function(e,t){let n=o.getMaxCoordinate(e),u=Math.ceil(Math.log2(n)),p=Math.pow(2,u)*Math.pow(2,-t),_=i.fixBeziers(u,t),v=e.slice(),b=d,m=0;for(;;){if(++m>=10)throw new Error("max tries exceeded");v=v.map(_);let e=[];v.forEach(function(t){t.forEach((n,r)=>{e.push({ps:n,loop:t,idx:r})})});let t=s.sweepLine(e,e=>g(e.ps),e=>h(e.ps),(e,t)=>l.inSameKFamliyAndMaybeIntersecting(e.ps,t.ps));if(!t.length)break;for(let e of t){let t;({v:t,seed:b}=f(b,1));let n=0===t?e[0]:e[1],r=n.ps;({v:t,seed:b}=f(b,r.length-1));let o=r.map((e,n)=>{let r;return n!==t?e:(({p:r,seed:b}=c(e,b,p)),r)}),{idx:i,loop:u}=n;u.splice(i,1,o);let s=0===i?u.length-1:i-1,l=(i+1)%u.length,d=u[s],g=u[l];u.splice(s,1,a(d,o[0],d.length-1)),u.splice(l,1,a(g,o[o.length-1],0))}}return v.map(e=>new r.Loop(e))};const d=123456789,p=4294967296;function g(e){return u.getBounds(e).box[0][0]}function h(e){return u.getBounds(e).box[1][0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxCoordinate=function(e){let t=0;for(let n of e)for(let e of n)for(let n of e)for(let e of n){let n=Math.abs(e);n>t&&(t=n)}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(227),o=n(1),i=n(228);t.fixBeziers=function(e,t){let n=Math.pow(2,e)*Math.pow(2,-t);function u(n){return[r.toGrid(n[0],e,t),r.toGrid(n[1],e,t)]}return e=>{let t=[];for(let r=0;r<e.length;r++){let s=e[r].slice(),l=t[t.length-1],c=l?l[l.length-1]:u(e[0][0]);s[0]=c,s=s.map(e=>u(e)),o.isSelfOverlapping(s)&&(s=[s[0],s[s.length-1]]),(s=i.fixBezierByPointSpacing(s,n,u))&&t.push(s)}let r=t.length;if(!r)return[];let s=t[r-1];return s[s.length-1]=t[0][0],t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8);t.toGrid=function(e,t,n){let o=n-(t-Math.floor(Math.log2(Math.abs(e))))+1;return o<=0?0:r.reduceSignificand(e,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(229),i=n(0);function u(e,t){return e[0]===t[0]&&e[1]===t[1]}t.fixBezierByPointSpacing=function(e,t,n){if(0!==r.lengthSquaredUpperBound(e)){if(o.areAllPointsDifferent(e))return e;if(!u(e[0],e[e.length-1]))return 4===e.length?function(e,t,n){if(u(e[0],e[1])&&u(e[1],e[2])||u(e[1],e[2])&&u(e[2],e[3])||u(e[0],e[1])&&u(e[2],e[3]))return e[0][0]-e[3][0]>4*t||e[0][1]-e[3][1]>4*t?[e[0],e[e.length-1]]:void 0;if(u(e[0],e[2])||u(e[1],e[3])||u(e[1],e[2]))return e;if(u(e[0],e[1])){if(i.squaredDistanceBetween(e[1],e[2])<4*t)return[e[0],e[2],e[2],e[3]];{let r=i.toLength(i.fromTo(e[1],e[2]),2*t),o=i.translate(e[1],r);return[e[0],n(o),e[2],e[3]]}}if(u(e[2],e[3])){if(i.squaredDistanceBetween(e[2],e[1])<4*t)return[e[0],e[1],e[1],e[3]];{let r=i.toLength(i.fromTo(e[2],e[1]),2*t),o=i.translate(e[2],r);return e=[e[0],e[1],n(o),e[3]]}}}(e,t,n):3===e.length?[e[0],e[2]]:2===e.length?e:void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areAllPointsDifferent=function(e){for(let t=0;t<e.length-1;t++)for(let n=t+1;n<e.length;n++)if(e[t][0]===e[n][0]&&e[t][1]===e[n][1])return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(102);t.inSameKFamliyAndMaybeIntersecting=function(e,t){let n=r.getBoundingBox(e),i=r.getBoundingBox(t);if(r.isHorizontalLine(e)&&r.isHorizontalLine(t)){if(e[0][1]!==t[0][1])return!1;let[[r],[o]]=n,[[u],[s]]=i;return r>o&&([r,o]=[o,r]),u>s&&([u,s]=[s,u]),r<s&&o>u}if(r.isVerticalLine(e)&&r.isVerticalLine(t)){if(e[0][0]!==t[0][0])return!1;let[[,r],[,o]]=n,[[,u],[,s]]=i;return r>o&&([r,o]=[o,r]),u>s&&([u,s]=[s,u]),u<o&&s>r}return o.areBoxesIntersecting(!1)(n,i)&&r.areBeziersInSameKFamily(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(23),o=n(55),i=n(232),u=n(112);t.trimMat=function(e){let t=i.cullNonCycles(u.clone(e.cpNode));if(t)return new r.Mat(t,o.createNewCpTree(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(56),o=n(6);t.cullNonCycles=function(e){let t=e,n=r.getLeaves(e);for(;n.length;){let r=n.pop();if(r.isHoleClosing||r.isIntersection)continue;let i=r.next;for(;;){let n=!1,r=(i=i.next).prevOnCircle;if(i.getProngCount()>2){let t=i.nextOnCircle;o.CpNode.isOnSameCircle(i,e)?n=!0:i.next===t?i=t:t.next!==r&&(n=!0)}else if(i.isTerminating()&&!i.isIntersection)return void(t=i);if(n){r.next=i,i.prev=r,t=i;break}}}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(23),i=n(57),u=n(113),s=n(234),l=n(55),c=n(56),a=n(235),f=n(236),d=n(112),p=n(12);function g(e){return function(t){return e*t}}let h=r.length([0,1]);t.toScaleAxis=function(e,t,n=g){if("undefined"!=typeof _debug_){_debug_.generated.timing.sats[0]=performance.now();let t=c.getLeaves(e.cpNode);_debug_.generated.elems.leaves.push(t)}let r=[];u.traverseVertices(d.clone(e.cpNode),e=>{r.push(e)});let _=s.getLargestVertex(r),v=n(t);"undefined"!=typeof _debug_&&_debug_.generated.elems.maxVertex.push(_);let b=new Set,m=new Map;i.traverseEdges(_,function(e){let t=m.get(e)||v(e.cp.circle.radius),n=e.next,r=h(p.getCurveToNext(e)),o=n.cp.circle.radius;if(t-r>v(o)){for(let e of n.getCpNodesOnCircle())m.set(e,t-r);b.add(n.cp.circle)}}),a.cull(b,_),"undefined"!=typeof _debug_&&_debug_.generated.elems.culls.push(Array.from(b));let P=new o.Mat(_,l.createNewCpTree(_));return f.addDebugInfo(P),P}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLargestVertex=function(e){return e.reduce(function(e,t){return e.cp.circle.radius>=t.cp.circle.radius?e:t},e[0])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(56),o=n(6);t.cull=function(e,t){let n=r.getLeaves(t);function i(e){let t=e,n=[];do{t.next!==t.nextOnCircle&&n.push(t),t=t.nextOnCircle}while(t!==e.prevOnCircle);return n}for(;n.length;){let r=n.pop();if(r.isHoleClosing||r.isIntersection)continue;if(!e.has(r.cp.circle))continue;let u=r.next;for(;;){let n=!1,r=(u=u.next).prevOnCircle;if(e.has(u.cp.circle))if(o.CpNode.isOnSameCircle(u,t))n=!0;else{let e=i(u);1===e.length?u=e[0]:n=!0}else n=!0;if(n){r.next=u,u.prev=r;break}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDebugInfo=function(e){if("undefined"==typeof _debug_)return;let t=_debug_.generated;t.elems.sat.push(e);let n=t.timing;n.sats[1]+=performance.now()-n.sats[0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(238),o=n(239),i=n(240),u=n(114),s=n(4);class l{constructor(e,t){this.path=e,this.g=t,this.elems={twoProng_regular:[],twoProng_failed:[],twoProng_notAdded:[],twoProng_deleted:[],twoProng_holeClosing:[],looseBoundingBox:[],tightBoundingBox:[],oneProng:[],oneProngAtDullCorner:[],sharpCorner:[],dullCorner:[],vertex:[],minY:[],threeProng:[],boundingHull:[],mat:[],sat:[],cpNode:[],loop:[],loops:[],maxVertex:[],leaves:[],culls:[],intersection:[]},this.timing={simplify:[0,0],holeClosers:[0,0],oneAnd2Prongs:[0,0],threeProngs:[0,0],mats:[0,0],sats:[0,0]}}}t.Generated=l;t.MatDebug=class{constructor(){this.generated=void 0,this.directives={stopAfterHoleClosers:!1,stopAfterHoleClosersNum:void 0,stopAfterTwoProngs:!1,stopAfterTwoProngsNum:void 0,stopAfterThreeProngs:!1},this.fs=Object.assign(Object.assign({draw:s.drawFs},r.generalDebugFunctions),{twoProng:o.twoProngDebugFunctions,threeProng:i.threeProngDebugFunctions,drawElem:u.drawElemFunctions})}createNewGenerated(e,t){this.generated=new l(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);let o=0;function i(e){return e.map(e=>r.PointOnShape.toHumanString(e.cp.pointOnShape))}function u(e,t=3){return e[0].toFixed(t)+", "+e[1].toFixed(t)}let s={"δToString":i,"δsToString":function(e){return e.map(i)},pointToStr:u,pointsToStr:function(e,t=3){return e.map(e=>u(e,t))},nameObj:function(e,t=""){e.name=""+t+o++}};t.generalDebugFunctions=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10),o=n(0);function i(e,t,n=1e3,i,s="twoProng_regular"){if(void 0===e)return;let l=_debug_.generated.elems[s][e],c=l.xs,a=l.generated.g;console.log(l),console.log(l.xs.map(e=>({x:e.x,y:e.y,z:e.z,d:e.z?o.squaredDistanceBetween(e.y.p,e.z.p):0,t:e.t})));for(let e=0;e<c.length;e++){if(i&&(e<i[0]||e>=i[1]))continue;if(t&&e!==c.length-1)continue;let u=l.xs[e],s=new r.Circle(u.x,o.distanceBetween(u.x,u.y.p));_debug_.fs.draw.crossHair(a,u.x,"red thin10 nofill",void 0,n),_debug_.fs.draw.circle(a,s,"blue thin10 nofill",n),void 0!==u.z&&_debug_.fs.draw.crossHair(a,u.z.p,"yellow thin10 nofill",2,n)}u.drawNormal(e,n)}let u={"logδ":function(e,t="twoProng_regular"){let n=_debug_.generated.elems[t][e].δ;console.log(n)},log:function(e,t="twoProng_regular"){let n=_debug_.generated.elems[t][e];console.log(n)},drawNormal:function e(t,n=1e3,r="twoProng_regular"){let o=_debug_.generated.elems[r];if(void 0===t)for(let t=0;t<o.length;t++)e(t);let i=o[t],u=i.generated.g;i&&_debug_.fs.draw.line(u,[i.pos.p,i.circle.center],"thin10 blue",n)},"logδBasic":function(e,t="twoProng_regular"){let n=_debug_.generated.elems[t][e].δ;function r(e){let t=e.cp.pointOnShape;return{bez:t.curve.ps,t:t.t}}console.log(r(n[0])),console.log(r(n[1]))},traceConvergence:i,logNearest:function(e,t=1e3,n="twoProng_regular"){let r,u=_debug_.generated,s=o.getObjClosestTo(e,u.elems[n],e=>e.circle.center);[].push(s),console.log(s);for(let e=0;e<_debug_.generated.elems[n].length;e++){if(_debug_.generated.elems[n][e]===s){r=e;break}}void 0!==r&&i(r,!0,t)}};t.twoProngDebugFunctions=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(10);let i={drawSpokes:function(e){let t=_debug_.generated.elems.threeProng[e],n=t.generated.g,r=t.circle.center,o=t.poss;_debug_.fs.draw.line(n,[o[0].p,r],"thin5 red"),_debug_.fs.draw.line(n,[o[1].p,r],"thin5 red"),_debug_.fs.draw.line(n,[o[2].p,r],"thin5 red")},traceConvergence:function(e,t){let n,r;void 0===e?(n=0,r=_debug_.generated.elems.threeProng.length):(n=e,r=e+1);for(let o=n;o<r;o++){let n=_debug_.generated.elems.threeProng[o],r=n.generated.g;console.log(n);let i,u,s=n.candidateThreeProngs;void 0===e||-1===t?(i=n.bestIndx,u=n.bestIndx+1):void 0===t?(i=0,u=s.length):(i=t,u=t+1);for(let e=i;e<u;e++){let t=s[e].circle;n.bestIndx===e?(_debug_.fs.draw.dot(r,t.center,.2,"green"),_debug_.fs.draw.circle(r,t,"black thin10 nofill")):(_debug_.fs.draw.dot(r,t.center,.2,"cyan"),_debug_.fs.draw.circle(r,t,"cyan thin5 nofill"))}}},showBoundary:function(e,t){let n=_debug_.generated.elems.threeProng[e],o=n.generated.g,i=n.candidateThreeProngs,u=void 0===t?0:t,s=void 0===t?i.length:t,l=n.cpss,c=0;for(let e=1;e<l.length-1;e++){if(!(c>=u&&c<=s)){c++;continue}let t=[l[0],l[e],l[l.length-1]];for(let e=0;e<3;e++){let n=t[e],i=n[0],u=n[1],s=i.cp.pointOnShape,l=u.cp.pointOnShape,c=s.p,a=l.p,f=1+.5*e;r.equal(c,a)?_debug_.fs.draw.crossHair(o,c,"red thin10 nofill",f):(_debug_.fs.draw.crossHair(o,c,"green thin10 nofill",f),_debug_.fs.draw.crossHair(o,a,"blue thin10 nofill",f))}c++}},"logδs":function(e){let t=_debug_.generated.elems.threeProng[e];console.log(t.cpss)},logNearest:function(e=!0,t=!0,n=!0){return function(i,u=1e3){let s=_debug_.generated,l=r.getObjClosestTo(i,s.elems.threeProng,e=>e.circle.center),c=l.circle,a=l.generated.g;console.log(l);let f=new o.Circle(c.center,c.radius||1),d=_debug_.fs.draw;if(d.circle(a,f,"blue thin10 nofill",u),d.crossHair(a,c.center,"red thin2 nofill",2,u),e&&(d.line(a,[l.poss[0].p,c.center],"blue thin5 nofill",u),d.line(a,[l.poss[1].p,c.center],"blue thin5 nofill",u),d.line(a,[l.poss[2].p,c.center],"blue thin5 nofill",u)),n){let e=l.boundaries,t=e[0],n=e[e.length-1];d.beziers(a,t,"red thin20 nofill",u);for(let t=1;t<e.length-1;t++){let n=e[t];d.beziers(a,n,"green thin20 nofill",u)}d.beziers(a,n,"blue thin20 nofill",u)}if(t){let e=l.traces;for(let t of e)d.polyline(a,t,"red thin5 nofill",u)}}}};t.threeProngDebugFunctions=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(10),i=n(4),u=.5;t.drawOneProng=function(e,t){let n=o.Circle.scale(r.PointOnShape.getOsculatingCircle(Number.POSITIVE_INFINITY,t),1);return[...i.drawFs.dot(e,t.p,.1*u,"gray"),...i.drawFs.dot(e,n.center,.25*u,"gray"),...i.drawFs.circle(e,n,"gray thin10 nofill")]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(110),o=n(4);t.twoProng=function(e,t){let n,i,u=[],s=[],l=[],c=[],a=[];switch(r.getTwoProngType(t)){case"twoProng_regular":n="red ",i="2";break;case"twoProng_holeClosing":n="cyan ",i="10"}return t.failed?u=o.drawFs.dot(e,t.pos.p,.3,"black"):t.failed||(s=o.drawFs.dot(e,t.circle.center,.3,"yellow"),l=o.drawFs.circle(e,t.circle,n+"thin"+i+" nofill"),c=o.drawFs.dot(e,t.pos.p,.0105,n),a=o.drawFs.dot(e,t.z,.021,n)),[...u,...s,...l,...c,...a]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10),o=n(4),i=.3;t.threeProng=function(e,t){let n=r.Circle.scale(t.circle,1),u=t.poss,s=o.drawFs.dot(e,u[0].p,.1*i,"blue"),l=o.drawFs.dot(e,u[1].p,.2*i,"blue"),c=o.drawFs.dot(e,u[2].p,.1*3*i,"blue");return[...o.drawFs.dot(e,n.center,.3*i,"blue"),...s,...l,...c,...o.drawFs.circle(e,n,"blue thin2 nofill")]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);t.vertex=function(e,t,n=!0,o){let i=n?"":" invisible",u=t.cp.circle,s=t.getCpNodesOnCircle();console.log(s);let l=[];l=[...r.drawFs.circle(e,u,"red thin20 nofill "+i,o),...r.drawFs.crossHair(e,u.center,"red thin20 nofill "+i,3,o)];for(let t=0;t<s.length;t++){let n=s[t].next.cp.circle,c=r.drawFs.circle(e,n,"pink thin20 nofill "+i,o),a=r.drawFs.crossHair(e,n.center,"pink thin20 nofill "+i,3,o);l.push(...c,...a);let f=u.center,d=n.center,p=0===t?"thin10":1===t?"thin20":"thin35",g=r.drawFs.line(e,[f,d],"yellow "+p+" nofill "+i,o);l.push(...g)}return l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(4);t.minY=function(e,t){let n=r.evaluate(t.curve.ps,t.t);return o.drawFs.crossHair(e,n,"red thin10 nofill")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);t.boundingHull=function(e,t,n="thin5 black nofill"){return r.drawFs.polygon(e,t,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);t.looseBoundingBox=function(e,t){return r.drawFs.rect(e,t,"thin5 brown nofill")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);t.tightBoundingBox=function(e,t){return r.drawFs.polygon(e,t,"thin5 black nofill")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);t.sharpCorner=function(e,t){let n=t.ps[t.ps.length-1];return r.drawFs.dot(e,n,.6,"green")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);t.dullCorner=function(e,t){let n=t.ps[3];return r.drawFs.dot(e,n,.5,"orange")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loop=function(e,t){return[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loops=function(e,t){return[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);t.maxVertex=function(e,t){let n=t.cp.circle;return r.drawFs.circle(e,n,"brown thin10 nofill")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(116);t.leaves=function(e,t){let n=[];for(let o of t){let t=o.cp.circle.center;n.push(r.drawCirclePercent(e,t,.5,"pinker thin5 nofill"))}return n}},function(e,t,n){"use strict";function r(e,t,n,r){let o=document.createElementNS("http://www.w3.org/2000/svg","circle");return o.setAttributeNS(null,"cx",t[0].toString()),o.setAttributeNS(null,"cy",t[1].toString()),o.setAttributeNS(null,"r",n.toString()+"%"),o.setAttributeNS(null,"class",r),e.appendChild(o),o}Object.defineProperty(t,"__esModule",{value:!0}),t.culls=function(e,t){let n=[];for(let o of t){let t=o.center;n.push(r(e,t,.4,"cyan thin5 nofill"))}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(116);t.intersection=function(e,t){return[r.drawCirclePercent(e,t.pos.p,.7,"purple thin2 nofill")]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(4);t.oneProngAtDullCorner=function(e,t){let n=r.PointOnShape.getOsculatingCircle(Number.POSITIVE_INFINITY,t);return[...o.drawFs.dot(e,t.p,.1,"orange"),...o.drawFs.dot(e,n.center,.25,"orange"),...o.drawFs.circle(e,n,"orange thin10 nofill")]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(12);t.drawBranch=function(e,t,n){let i=[];for(let u of t){if(u.isTerminating())continue;let t=o.getCurveToNext(u);t&&(0,i.push(...r.drawFs.bezier(e,t,"thin5 purple nofill",n)))}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(260),o=n(271);t.getPathsFromStr=function(e){return r.getBeziersFromRawPaths(o.parsePathDataString(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(261),o=n(262),i=n(263),u=n(264),s=n(265),l=n(266),c=n(267),a=n(268),f=n(269),d={a:n(270).a,c:i.c,h:l.h,l:s.l,q:a.q,s:u.s,t:f.t,v:c.v,z:o.z};t.getBeziersFromRawPaths=function(e){if(0===e.length)return[];if("m"!==e[0].type.toLowerCase())throw new Error("Invalid SVG - every new path must start with an M or m.");let t,n=new r.PathState,i=[],u=[];for(let r=0;r<e.length;r++){let s=e[r],l=s.type.toLowerCase();if(n.vals=s.values,s.type===l)if("v"===l)n.vals[0]+=n.p[1];else if("a"===l)n.vals[5]+=n.p[0],n.vals[6]+=n.p[1];else for(let e=0;e<n.vals.length;e++)n.vals[e]+=n.p[e%2];if("m"===l){u.length&&("z"!==t&&u.push(o.z(n)),i.push(u),u=[]),n.initialPoint=n.p=n.vals,t=l;continue}let c=d[l];if(!c)throw new Error("Invalid SVG - command not recognized.");let a=c(n);n.p=a[a.length-1],u.push(a),t=l}return u.length&&("z"!==t&&u.push(o.z(n)),i.push(u)),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PathState=class{constructor(){this.initialPoint=void 0,this.prev2ndCubicControlPoint=void 0,this.prev2ndQuadraticControlPoint=void 0,this.p=[0,0]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.z=function(e){let t=[e.p,e.initialPoint];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=void 0,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.c=function(e){let t=[e.p,[e.vals[0],e.vals[1]],[e.vals[2],e.vals[3]],[e.vals[4],e.vals[5]]];return e.prev2ndCubicControlPoint=t[2],e.prev2ndQuadraticControlPoint=void 0,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.s=function(e){let t=[void 0,void 0];e.prev2ndCubicControlPoint?(t[0]=e.p[0]-e.prev2ndCubicControlPoint[0]+e.p[0],t[1]=e.p[1]-e.prev2ndCubicControlPoint[1]+e.p[1]):t=e.p;let n=[e.p,t,[e.vals[0],e.vals[1]],[e.vals[2],e.vals[3]]];return e.prev2ndCubicControlPoint=n[2],e.prev2ndQuadraticControlPoint=void 0,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.l=function(e){let t=[e.p,e.vals];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=void 0,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.h=function(e){let t=[e.p,[e.vals[0],e.p[1]]];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=void 0,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.v=function(e){let t=[e.p,[e.p[0],e.vals[0]]];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=void 0,t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.q=function(e){let t=[e.vals[0],e.vals[1]],n=[e.vals[2],e.vals[3]];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=t,[e.p,t,n]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.t=function(e){let t=[void 0,void 0];e.prev2ndQuadraticControlPoint?(t[0]=e.p[0]-e.prev2ndQuadraticControlPoint[0]+e.p[0],t[1]=e.p[1]-e.prev2ndQuadraticControlPoint[1]+e.p[1]):t=e.p;let n=t,r=[e.vals[0],e.vals[1]];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=n,[e.p,n,r]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.a=function(e){e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(272);t.parsePathDataString=function(e){if(!e.length)return[];let t=new r.Source(e),n=[];if(!t.initialCommandIsMoveTo())return[];for(;t.hasMoreData();){let e=t.parseSegment();if(null===e)break;n.push(e)}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(273),o={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"};t.Source=class{constructor(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()}parseSegment(){var e=this._string[this._currentIndex],t=o[e]?o[e]:null;if(null===t){if(null===this._prevCommand)return null;if(null===(t=("+"===e||"-"===e||"."===e||e>="0"&&e<="9")&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null))return null}else this._currentIndex+=1;this._prevCommand=t;var n=null,i=t.toUpperCase();return"H"===i||"V"===i?n=[r.parseNumber(this)]:"M"===i||"L"===i||"T"===i?n=[r.parseNumber(this),r.parseNumber(this)]:"S"===i||"Q"===i?n=[r.parseNumber(this),r.parseNumber(this),r.parseNumber(this),r.parseNumber(this)]:"C"===i?n=[r.parseNumber(this),r.parseNumber(this),r.parseNumber(this),r.parseNumber(this),r.parseNumber(this),r.parseNumber(this)]:"A"===i?n=[r.parseNumber(this),r.parseNumber(this),r.parseNumber(this),this._parseArcFlag(),this._parseArcFlag(),r.parseNumber(this),r.parseNumber(this)]:"Z"===i&&(this._skipOptionalSpaces(),n=[]),null===n||n.indexOf(null)>=0?null:{type:t,values:n}}hasMoreData(){return this._currentIndex<this._endIndex}peekSegmentType(){var e=this._string[this._currentIndex];return o[e]?o[e]:null}initialCommandIsMoveTo(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return"M"===e||"m"===e}_isCurrentSpace(){var e=this._string[this._currentIndex];return e<=" "&&(" "===e||"\n"===e||"\t"===e||"\r"===e||"\f"===e)}_skipOptionalSpaces(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex}_skipOptionalSpacesOrDelimiter(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex])&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)}_parseArcFlag(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===t)e=0;else{if("1"!==t)return null;e=1}return this._skipOptionalSpacesOrDelimiter(),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseNumber=function(e){var t=0,n=0,r=1,o=0,i=1,u=1,s=e._currentIndex;if(e._skipOptionalSpaces(),e._currentIndex<e._endIndex&&"+"===e._string[e._currentIndex]?e._currentIndex+=1:e._currentIndex<e._endIndex&&"-"===e._string[e._currentIndex]&&(e._currentIndex+=1,i=-1),e._currentIndex===e._endIndex||(e._string[e._currentIndex]<"0"||e._string[e._currentIndex]>"9")&&"."!==e._string[e._currentIndex])return null;for(var l=e._currentIndex;e._currentIndex<e._endIndex&&e._string[e._currentIndex]>="0"&&e._string[e._currentIndex]<="9";)e._currentIndex+=1;if(e._currentIndex!==l)for(var c=e._currentIndex-1,a=1;c>=l;)n+=a*(Number(e._string[c])-0),c-=1,a*=10;if(e._currentIndex<e._endIndex&&"."===e._string[e._currentIndex]){if(e._currentIndex+=1,e._currentIndex>=e._endIndex||e._string[e._currentIndex]<"0"||e._string[e._currentIndex]>"9")return null;for(;e._currentIndex<e._endIndex&&e._string[e._currentIndex]>="0"&&e._string[e._currentIndex]<="9";)r*=10,o+=Number(e._string.charAt(e._currentIndex))/r,e._currentIndex+=1}if(e._currentIndex!==s&&e._currentIndex+1<e._endIndex&&("e"===e._string[e._currentIndex]||"E"===e._string[e._currentIndex])&&"x"!==e._string[e._currentIndex+1]&&"m"!==e._string[e._currentIndex+1]){if(e._currentIndex+=1,"+"===e._string[e._currentIndex]?e._currentIndex+=1:"-"===e._string[e._currentIndex]&&(e._currentIndex+=1,u=-1),e._currentIndex>=e._endIndex||e._string[e._currentIndex]<"0"||e._string[e._currentIndex]>"9")return null;for(;e._currentIndex<e._endIndex&&e._string[e._currentIndex]>="0"&&e._string[e._currentIndex]<="9";)t*=10,t+=Number(e._string[e._currentIndex]),e._currentIndex+=1}var f=n+o;return f*=i,t&&(f*=Math.pow(10,u*t)),s===e._currentIndex?null:(e._skipOptionalSpacesOrDelimiter(),f)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beziersToSvgPathStr=function(e,t=10){const n=t;let r="";for(let t=0;t<e.length;t++){let o=e[t];0===t&&(r="M "+o[0][0].toFixed(n)+" "+o[0][1].toFixed(n)+"\n"),4===o.length?r+="C "+o[1][0].toFixed(n)+" "+o[1][1].toFixed(n)+" "+o[2][0].toFixed(n)+" "+o[2][1].toFixed(n)+" "+o[3][0].toFixed(n)+" "+o[3][1].toFixed(n)+" \n":3===o.length?r+="Q "+o[1][0].toFixed(n)+" "+o[1][1].toFixed(n)+" "+o[2][0].toFixed(n)+" "+o[2][1].toFixed(n)+" \n":2===o.length&&(r+="L "+o[1][0].toFixed(n)+" "+o[1][1].toFixed(n)+" \n")}return r+" z\n"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);t.getBoundaryBeziersToNext=function(e){let t=e,n=e.next,o=t.cp.pointOnShape,i=n.cp.pointOnShape,u=o.curve,s=i.curve;if(u.loop!==s.loop)return;let l=[];return s===u?l.push(r.fromTo(o.curve.ps)(o.t,i.t)):(l.push(r.fromTTo1(o.curve.ps,o.t)),function(e,t,n,o){let i=t;do{let t=(i=i.next)===n?o:1;e.push(r.from0ToT(i.ps,t))}while(i!==n)}(l,o.curve,i.curve,i.t)),l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBoundaryBezierPartsToNext=function(e){let t=e,n=e.next,r=t.cp.pointOnShape,o=n.cp.pointOnShape,i=r.curve,u=o.curve;if(i.loop!==u.loop)return;let s=[];return u===i?s.push({ps:r.curve.ps,ts:[r.t,o.t]}):(s.push({ps:r.curve.ps,ts:[r.t,1]}),function(e,t,n,r){let o=t;do{let t=(o=o.next)===n?{ps:o.ps,ts:[0,r]}:{ps:o.ps,ts:[0,1]};e.push(t)}while(o!==n)}(s,r.curve,o.curve,o.t)),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6),o=n(58),i=n(1),u=n(12),s=n(31),l=n(23),c=n(55);function a(e,t,n,r){let o=[],l=s.getCurveBetween(n[e],n[t].next);for(let s=e;s<t+1;s++)o.push(i.hausdorffDistance(u.getCurveToNext(n[s]),l,r));return Math.max(...o)}t.simplifyMat=function(e,t=15,n=.1,u=1){let f=e.cpNode,d=new Map;for(;!f.isTerminating();)f=f.next;let p=o.getBranches(f,t),g=[];for(let e=0;e<p.length;e++){let t=p[e],r=0;for(;r<t.length;){let e=r;for(;++r!==t.length;){if(a(e,r,t,u)>n)break;g.push(t[r])}if(e+1===r);else{let n=t[e],o=t[r-1],u=i.toCubic(s.getCurveBetween(n,o.next)),l=u.slice().reverse(),c=n,a=0;for(;c!==o;){let e=i.closestPointOnBezier(u,c.next.cp.circle.center).t;d.set(c,{ps:u,ts:[a,e]});let t=c.nextOnCircle.prev;d.set(t,{ps:l,ts:[1-e,1-a]}),a=e,c=c.next}d.set(c,{ps:u,ts:[a,1]});let f=c.nextOnCircle.prev;d.set(f,{ps:l,ts:[0,1-a]})}}}for(let e of g){let t=e.isTerminating(),n=e.getCpNodesOnCircle().length;t||2!==n||r.CpNode.remove(e)}return new l.Mat(f,c.createNewCpTree(f))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(58),o=n(1),i=n(12),u=n(31);function s(e,t,n,r){let s=[],l=u.getCurveBetween(n[e],n[t].next);for(let u=e;u<t+1;u++)s.push(o.hausdorffDistance(i.getCurveToNext(n[u]),l,r));return Math.max(...s)}t.simplifyMatMapOnly=function(e,t=15,n=.1,i=1){let l=new Map;for(;!e.isTerminating();)e=e.next;let c=r.getBranches(e,t),a=[];for(let e=0;e<c.length;e++){let t=c[e],r=0;for(;r<t.length;){let e=r;for(;++r!==t.length;){if(s(e,r,t,i)>n)break;a.push(t[r])}if(e+1===r);else{let n=t[e],i=t[r-1],s=o.toCubic(u.getCurveBetween(n,i.next)),c=s.slice().reverse(),a=n,f=0;for(;a!==i;){let e=o.closestPointOnBezier(s,a.next.cp.circle.center).t;l.set(a,{ps:s,ts:[f,e]});let t=a.nextOnCircle.prev;l.set(t,{ps:c,ts:[1-e,1-f]}),f=e,a=a.next}l.set(a,{ps:s,ts:[f,1]});let d=a.nextOnCircle.prev;l.set(d,{ps:c,ts:[0,1-f]})}}}return{simpleMap:l,cpNode:e}}}]);
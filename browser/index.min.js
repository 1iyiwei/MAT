!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).FloMat=e()}}(function(){return function e(t,r,n){function o(a,u){if(!r[a]){if(!t[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return o(r||e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";t.exports=e("./index").default},{"./index":2}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./src/mat");r.Mat=n.Mat;var o=e("./src/loop");r.Loop=o.Loop;var i=e("./src/curve");r.Curve=i.Curve;var a=e("./src/cp-node");r.CpNode=a.CpNode;var u=e("./src/point-on-shape");r.PointOnShape=u.PointOnShape;var s=e("./src/circle");r.Circle=s.Circle;var l=e("./src/contact-point");r.ContactPoint=l.ContactPoint;var c=e("./src/bezier-piece");r.BezierPiece=c.BezierPiece;var f=e("./src/x");r.X=f.X;var d=e("./src/mat/smoothen/smoothen");r.smoothen=d.smoothen;var v=e("./src/mat/find-mat/find-mats");r.findMats=v.findMats;var p=e("./src/mat/trim-mat");r.trimMat=p.trimMat;var g=e("./src/mat/to-scale-axis/to-scale-axis");r.toScaleAxis=g.toScaleAxis;var h=e("./src/mat/traverse-edges");r.traverseEdges=h.traverseEdges;var y=e("./src/mat/traverse-vertices");r.traverseVertices=y.traverseVertices;var b=e("./src/debug/debug");r.MatDebug=b.MatDebug;var m=e("./src/svg/svg");r.getPathsFromStr=m.getPathsFromStr;var _=e("./src/debug/cp-node-for-debugging");r.CpNodeForDebugging=_.CpNodeForDebugging;var w=e("./src/mat/get-closest-boundary-point");r.getClosestBoundaryPoint=w.getClosestBoundaryPoint,r.closestPointOnBezier=w.closestPointOnBezier;var P=e("./src/svg/svg");r.Svg=P},{"./src/bezier-piece":51,"./src/circle":53,"./src/contact-point":54,"./src/cp-node":55,"./src/curve":56,"./src/debug/cp-node-for-debugging":57,"./src/debug/debug":58,"./src/loop":84,"./src/mat":85,"./src/mat/find-mat/find-mats":108,"./src/mat/get-closest-boundary-point":117,"./src/mat/smoothen/smoothen":125,"./src/mat/to-scale-axis/to-scale-axis":129,"./src/mat/traverse-edges":130,"./src/mat/traverse-vertices":131,"./src/mat/trim-mat":132,"./src/point-on-shape":133,"./src/svg/svg":171,"./src/x":172}],3:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("flo-poly"),i=e("flo-vector2d"),a=e("flo-memoize"),u=e("flo-gauss-quadrature"),s=e("flo-graham-scan"),l=e("./src/get-x");r.getX=l.getX;var c=e("./src/get-y");r.getY=c.getY;var f=e("./src/get-dx");r.getDx=f.getDx;var d=e("./src/get-dy");r.getDy=d.getDy;var v=e("./src/evaluate-x");r.evaluateX=v.evaluateX;var p=e("./src/evaluate-y");r.evaluateY=p.evaluateY;var g=e("./src/evaluate");r.evaluate=g.evaluate;var h=e("./src/evaluate-dx");r.evaluateDx=h.evaluateDx;var y=e("./src/evaluate-dy");r.evaluateDy=y.evaluateDy;var b=e("./src/tangent");r.tangent=b.tangent;var m=e("./src/normal");r.normal=m.normal;var _=e("./src/from-0-to-T");r.from0ToT=_.from0ToT;var w=e("./src/from-T-to-1");r.fromTTo1=w.fromTTo1;var P=e("./src/from-to");r.fromTo=P.fromTo;var x=e("./src/to-hybrid-quadratic");r.toHybridQuadratic=x.toHybridQuadratic;var I=e("./src/coincident");r.coincident=I.coincident;var O=e("./src/line-intersection");r.lineIntersection=O.lineIntersection;var M=e("./src/bezier3-intersection/bezier3-intersection");r.bezier3Intersection=M.bezier3Intersection;var C=e("./src/bezier3-intersection-sylvester/bezier3-intersection-sylvester");r.bezier3IntersectionSylvester=C.bezier3IntersectionSylvester;var T=e("./src/ts-at-x");r.tsAtX=T.tsAtX;var S=e("./src/ts-at-y");r.tsAtY=S.tsAtY;var N=e("./src/debug/debug");r.BezDebug=N.BezDebug;var j=e("./src/debug/fat-line");r.FatLine=j.FatLine;var A=e("./src/de-casteljau");r.deCasteljau=A.deCasteljau;var z=e("./src/eval-de-casteljau");r.evalDeCasteljau=z.evalDeCasteljau;var E=i.rotatePs;r.rotate=E;var B=i.translatePs;r.translate=B;var D=a.default.m1,F=D(function(e){return o.default.differentiate(f.getDx(e))});r.getDdx=F;var L=D(function(e){return o.default.differentiate(d.getDy(e))});r.getDdy=L;var Y=D(function(e){return o.default.differentiate(F(e))});r.getDddx=Y;var R=D(function(e){return o.default.differentiate(L(e))});r.getDddy=R;var k=D(s.default);function q(e,t){var r=h.evaluateDx(e),n=y.evaluateDy(e),o=G(e),i=Q(e);function a(e){var t=r(e),a=n(e),u=o(e);return(t*i(e)-a*u)/Math.sqrt(Math.pow(t*t+a*a,3))}return void 0===t?a:a(t)}r.getBoundingHull=k,r.fromLine=function(e){var t=n(e,2),r=n(t[0],2),o=r[0],i=r[1],a=n(t[1],2),u=a[0],s=a[1],l=(u-o)/3,c=(s-i)/3;return[[o,i],[o+l,i+c],[o+2*l,i+2*c],[u,s]]},r.κ=q;var H=q;function V(e,t){var r=h.evaluateDx(e),n=y.evaluateDy(e),o=G(e),i=Q(e);function a(e){var t=r(e),a=n(e),u=o(e);return(t*i(e)-a*u)/(t*t+a*a)}return void 0===t?a:a(t)}function X(e,t){function r(t){if(e[0]===e[1])return 0;var r=n(t,4),o=n(r[0],2),i=o[0],a=o[1],s=n(r[1],2),l=s[0],c=s[1],f=n(r[2],2),d=f[0],v=f[1],p=n(r[3],2),g=p[0],b=p[1];if(i===l&&l===d&&d===g&&a===c&&c===v&&v===b)return 0;var m=function(e,t){var r=h.evaluateDx(e),n=y.evaluateDy(e);function o(e){var t=r(e),o=n(e);return Math.sqrt(t*t+o*o)}return void 0===t?o:o(t)}(t);return u.default(m,e)}return void 0===t?r:r(t)}function G(e,t){var r=F(e),n=o.default.evaluate(r);return void 0===t?n:n(t)}function Q(e,t){var r=L(e),n=o.default.evaluate(r);return void 0===t?n:n(t)}r.curvature=H,r.dκMod=function(e,t){var r=n(e,4),o=n(r[0],2),i=o[0],a=o[1],u=n(r[1],2),s=u[0],l=u[1],c=n(r[2],2),f=c[0],d=c[1],v=n(r[3],2),p=v[0],g=v[1];function h(e){var t=e*e,r=1-e,n=2*e-3*t,o=(3*e-1)*r,u=r*r,c=3*(t*p+n*f-o*s-u*i),v=3*(t*g+n*d-o*l-u*a),h=6*(e*g-(3*e-1)*d+(3*e-2)*l+r*a),y=6*(e*p-(3*e-1)*f+(3*e-2)*s+r*i),b=Math.sqrt(c*c+v*v);return 4*(c*(g-3*d+3*l-a)-v*(p-3*f+3*s-i))*Math.pow(b,3)-(c*h-y*v)*(2*h*v+2*y*c)*b}return void 0===t?h:h(t)},r.totalCurvature=function(e,t){function r(t){return u.default(V(e),t)}return b.tangent(e),void 0===t?r:r(t)},r.totalAbsoluteCurvature=function(e,t){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,1];return u.default(function(t){return Math.abs(V(e)(t))},t)}return void 0===t?r:r(t)},r.len=X,r.getTAtLength=function(e,t){var r=function(t){return X([0,t],e)};function n(e){return o.default.brent(function(t){return r(t)-e},0,1)}return void 0===t?n:n(t)},r.evaluateDdx=G,r.evaluateDdy=Q,r.evaluateDddx=function(e,t){var r=Y(e),n=o.default.evaluate(r);return void 0===t?n:n(t)},r.evaluateDddy=function(e,t){var r=R(e),n=o.default.evaluate(r);return void 0===t?n:n(t)};var U=D(function(e){var t=n(e,4),r=n(t[0],2),o=r[0],a=r[1],u=n(t[1],2),s=(u[0],u[1],n(t[2],2)),l=(s[0],s[1],n(t[3],2)),c=l[0],f=l[1],d=Math.sqrt((c-o)*(c-o)+(f-a)*(f-a)),v=(f-a)/d,p=(c-o)/d,g=function(e,t,r){var n=i.transform(e[0],function(e){return-e}),o=i.translateThenRotatePs(n,-t,r,e);return Z(o)}(e,v,p),h=n(g,2),y=n(h[0],2),b=y[0],m=y[1],_=n(h[1],2),w=_[0],P=_[1],x=[g[0],[w,m],g[1],[b,P]];return i.rotateThenTranslatePs(v,p,e[0],x)});r.getBoundingBoxTight=U;var Z=D(function(e){return K(e).box});r.getBoundingBox=Z;var K=D(function(e){var t=[f.getDx(e),d.getDy(e)].map(function(e){return o.default.allRoots(e,0,1)});t[0].push(0,1),t[1].push(0,1);for(var r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,u=void 0,s=void 0,l=void 0,c=void 0,g=0;g<t[0].length;g++){var h=t[0][g],y=v.evaluateX(e,h);y<r&&(r=y,u=h),y>n&&(n=y,l=h)}for(var b=0;b<t[1].length;b++){var m=t[1][b],_=p.evaluateY(e,m);_<i&&(i=_,s=m),_>a&&(a=_,c=m)}return{ts:[[u,s],[l,c]],box:[[r,i],[n,a]]}});function W(e,t){var r=n(e,2),o=n(r[0],2),i=o[0],a=o[1],u=n(r[1],2);return[i*(1-t)+u[0]*t,a*(1-t)+u[1]*t]}function J(e,t){var r=n(e,3),o=n(r[0],2),i=o[0],a=o[1],u=n(r[1],2),s=u[0],l=u[1],c=n(r[2],2),f=c[0],d=c[1];return[i*Math.pow(1-t,2)+2*s*(1-t)*t+f*Math.pow(t,2),a*Math.pow(1-t,2)+2*l*(1-t)*t+d*Math.pow(t,2)]}r.getBounds=K,r.splitAt=function(e,t){var r=n(e,4),o=n(r[0],2),i=o[0],a=o[1],u=n(r[1],2),s=u[0],l=u[1],c=n(r[2],2),f=c[0],d=c[1],v=n(r[3],2),p=v[0],g=v[1],h=1-t,y=t*t,b=y*t,m=h*h,_=m*h,w=[[i,a],[t*s+h*i,t*l+h*a],[y*f+2*h*t*s+m*i,y*d+2*h*t*l+m*a],[b*p+3*h*y*f+3*m*t*s+_*i,b*g+3*h*y*d+3*m*t*l+_*a]];return[w,[w[3],[y*p+2*t*h*f+m*s,y*g+2*t*h*d+m*l],[t*p+h*f,t*g+h*d],[p,g]]]},r.bezierFromBezierPiece=function(e,t){if(0===t[0]&&1===t[1])return e;if(t[0]===t[1]){var r=g.evaluate(e)(t[0]);return[r,r,r,r]}return 0===t[0]?_.from0ToT(e,t[1]):1===t[1]?w.fromTTo1(e,t[0]):_.from0ToT(w.fromTTo1(e,t[0]),(t[1]-t[0])/(1-t[0]))},r.scale=function(e,t){return e.map(function(e){return[e[0]*t,e[1]*t]})},r.toQuadratic=function(e){var t=n(e,4),r=n(t[0],2),o=r[0],i=r[1],a=n(t[1],2),u=a[0],s=a[1],l=n(t[2],2),c=l[0],f=l[1],d=n(t[3],2),v=d[0],p=d[1];return[[.95*o+.15*u+-.15*c+.05*v,.95*i+.15*s+-.15*f+.05*p],[-.25*o+.75*u+.75*c+-.25*v,-.25*i+.75*s+.75*f+-.25*p],[.05*o+-.15*u+.15*c+.95*v,.05*i+-.15*s+.15*f+.95*p]]},r.evaluateHybridQuadratic=function(e,t,r){var n=e[0],o=(e[1],e[2]);return J([n,W(e[1],r),o],t)},r.evaluateLinear=W,r.clone=function(e){var t=n(e,4),r=n(t[0],2),o=r[0],i=r[1],a=n(t[1],2),u=a[0],s=a[1],l=n(t[2],2),c=l[0],f=l[1],d=n(t[3],2);return[[o,i],[u,s],[c,f],[d[0],d[1]]]},r.evaluateQuadratic=J,r.toCubic=function(e){var t=n(e,3),r=n(t[0],2),o=r[0],i=r[1],a=n(t[1],2),u=a[0],s=a[1],l=n(t[2],2),c=l[0],f=l[1];return[[o,i],[1/3*o+2/3*u,1/3*i+2/3*s],[2/3*u+1/3*c,2/3*s+1/3*f],[c,f]]},r.reverse=function(e){return e.slice().reverse()},r.equal=function(e,t){var r=n(e,4),o=n(r[0],2),i=o[0],a=o[1],u=n(r[1],2),s=u[0],l=u[1],c=n(r[2],2),f=c[0],d=c[1],v=n(r[3],2),p=v[0],g=v[1],h=n(t,4),y=n(h[0],2),b=y[0],m=y[1],_=n(h[1],2),w=_[0],P=_[1],x=n(h[2],2),I=x[0],O=x[1],M=n(h[3],2),C=M[0],T=M[1];return i===b&&s===w&&f===I&&p===C&&a===m&&l===P&&d===O&&g===T}},{"./src/bezier3-intersection-sylvester/bezier3-intersection-sylvester":4,"./src/bezier3-intersection/bezier3-intersection":5,"./src/coincident":11,"./src/de-casteljau":12,"./src/debug/debug":13,"./src/debug/fat-line":15,"./src/eval-de-casteljau":16,"./src/evaluate":21,"./src/evaluate-dx":17,"./src/evaluate-dy":18,"./src/evaluate-x":19,"./src/evaluate-y":20,"./src/from-0-to-T":22,"./src/from-T-to-1":23,"./src/from-to":24,"./src/get-dx":25,"./src/get-dy":26,"./src/get-x":27,"./src/get-y":28,"./src/line-intersection":29,"./src/normal":30,"./src/tangent":31,"./src/to-hybrid-quadratic":32,"./src/ts-at-x":33,"./src/ts-at-y":34,"flo-gauss-quadrature":35,"flo-graham-scan":36,"flo-memoize":41,"flo-poly":42,"flo-vector2d":50}],4:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("flo-poly"),i=e("flo-vector2d"),a=e("../get-x"),u=e("../get-y"),s=4;r.bezier3IntersectionSylvester=function(e,t){var r=n(e[0],2),l=r[0],c=r[1],f=n(t[0],2),d=f[0],v=f[1],p=void 0,g=void 0;if(Math.abs(l-d)>1e-12){var h=(l-d)/(c-v),y=h*h,b=y/(1+y),m=b/h;p=i.rotatePs(b,m,e),g=i.rotatePs(b,m,t)}else p=e,g=t;for(var _=a.getX(p),w=n(_,4),P=w[0],x=w[1],I=w[2],O=w[3],M=u.getY(p),C=n(M,4),T=C[0],S=C[1],N=C[2],j=C[3],A=a.getX(g),z=n(A,4),E=z[0],B=z[1],D=z[2],F=(z[3],u.getY(g)),L=n(F,4),Y=L[0],R=L[1],k=L[2],q=L[3],H=q-j,V=E*E,X=P*P,G=B*B,Q=x*x,U=D*D,Z=I*I,K=Y*Y,W=T*T,J=R*R,$=S*S,ee=k*k,te=N*N,re=H*H,ne=G*B,oe=Q*x,ie=U*D,ae=Z*I,ue=re*H,se=x*H,le=x*re,ce=P*se,fe=P*le,de=B*H,ve=B*re,pe=P*H,ge=P*re,he=[-X*H*I*te+ce*I*S*N+2*pe*Z*T*N-Q*H*I*T*N-X*le*N-pe*Z*$+se*Z*T*S-2*X*re*I*S+Q*ge*S-H*ae*W+3*fe*I*T-oe*re*T-X*P*ue,X*H*D*te+2*X*H*I*k*N-ce*D*S*N-4*pe*D*I*T*N+Q*H*D*T*N-ce*I*S*k-2*pe*Z*T*k+Q*H*I*T*k+X*le*k+2*pe*D*I*$-2*se*D*I*T*S+2*X*re*D*S+3*H*D*Z*W-3*fe*D*T,-2*X*H*D*k*N-P*de*I*S*N-ce*I*R*N+2*B*se*I*T*N+2*pe*U*T*N+X*ve*N-X*H*I*ee+ce*D*S*k+4*pe*D*I*T*k-Q*H*D*T*k-pe*U*$+2*pe*Z*R*S-de*Z*T*S+se*U*T*S-2*P*B*le*S-se*Z*T*R+2*X*re*I*R-P*Q*re*R-3*H*U*I*W-3*P*ve*I*T+3*B*Q*re*T,2*E*pe*I*te-E*se*I*S*N+P*de*D*S*N+ce*D*R*N-2*E*H*Z*T*N-2*B*se*D*T*N-2*pe*Z*Y*N+Q*H*I*Y*N+2*E*fe*N+X*H*D*ee+P*de*I*S*k+ce*I*R*k-2*B*se*I*T*k-2*pe*U*T*k-X*ve*k+E*H*Z*$-4*pe*D*I*R*S+2*de*D*I*T*S-se*Z*Y*S+4*E*ge*I*S-E*Q*re*S+2*se*D*I*T*R-2*X*re*D*R+H*ie*W+2*H*ae*Y*T-3*E*le*I*T+3*P*ve*D*T-3*fe*I*Y+oe*re*Y+3*E*X*ue,-2*E*pe*D*te-4*E*pe*I*k*N+E*se*D*S*N+P*de*I*R*N+4*E*H*D*I*T*N-G*H*I*T*N+4*pe*D*I*Y*N-Q*H*D*Y*N+E*se*I*S*k-P*de*D*S*k-ce*D*R*k+2*E*H*Z*T*k+2*B*se*D*T*k+2*pe*Z*Y*k-Q*H*I*Y*k-2*E*fe*k-2*E*H*D*I*$+2*pe*U*R*S-de*U*T*S+2*se*D*I*Y*S-4*E*ge*D*S+P*G*re*S-pe*Z*J+de*Z*T*R-se*U*T*R+2*P*B*le*R-6*H*D*Z*Y*T+3*E*le*D*T-3*G*le*T+3*fe*D*Y,4*E*pe*D*k*N+E*de*I*S*N+E*se*I*R*N-P*de*D*R*N-2*E*H*U*T*N+G*H*D*T*N-2*B*se*I*Y*N-2*pe*U*Y*N-2*E*P*ve*N+2*E*pe*I*ee-E*se*D*S*k-P*de*I*R*k-4*E*H*D*I*T*k+G*H*I*T*k-4*pe*D*I*Y*k+Q*H*D*Y*k+E*H*U*$-2*E*H*Z*R*S+de*Z*Y*S-se*U*Y*S+2*E*B*le*S+2*pe*D*I*J-2*de*D*I*T*R+se*Z*Y*R-4*E*ge*I*R+E*Q*re*R+6*H*U*I*Y*T+3*E*ve*I*T+3*P*ve*I*Y-3*B*Q*re*Y,-V*H*I*te-E*de*D*S*N-E*se*D*R*N+2*E*H*Z*Y*N+2*B*se*D*Y*N-V*le*N-2*E*pe*D*ee-E*de*I*S*k-E*se*I*R*k+P*de*D*R*k+2*E*H*U*T*k-G*H*D*T*k+2*B*se*I*Y*k+2*pe*U*Y*k+2*E*P*ve*k+4*E*H*D*I*R*S-2*de*D*I*Y*S-2*V*re*I*S-pe*U*J+de*U*T*R-2*se*D*I*Y*R+4*E*ge*D*R-P*G*re*R-2*H*ie*Y*T-3*E*ve*D*T+ne*re*T-H*ae*K+3*E*le*I*Y-3*P*ve*D*Y-3*V*(P*ue),V*H*D*te+2*V*H*I*k*N-E*de*I*R*N-4*E*H*D*I*Y*N+G*H*I*Y*N+E*de*D*S*k+E*se*D*R*k-2*E*H*Z*Y*k-2*B*se*D*Y*k+V*le*k-2*E*H*U*R*S+de*U*Y*S+2*V*re*D*S-E*G*re*S+E*H*Z*J-de*Z*Y*R+se*U*Y*R-2*E*B*le*R+3*H*D*Z*K-3*E*le*D*Y+3*G*le*Y,-2*V*H*D*k*N+E*de*D*R*N+2*E*H*U*Y*N-G*H*D*Y*N+V*ve*N-V*H*I*ee+E*de*I*R*k+4*E*H*D*I*Y*k-G*H*I*Y*k-2*E*H*D*I*J+2*de*D*I*Y*R+2*V*re*I*R-3*H*U*I*K-3*E*ve*I*Y,V*H*D*ee-E*de*D*R*k-2*E*H*U*Y*k+G*H*D*Y*k-V*ve*k+E*H*U*J-de*U*Y*R-2*V*re*D*R+E*G*re*R+H*ie*K+3*E*ve*D*Y-ne*re*Y+V*E*ue],ye=o.default.allRoots(he,0),be=[],me=0;me<ye.length;me++)for(var _e=ye[me],we=_e*_e,Pe=we*_e,xe={x:[P*Pe,x*we,I*_e,O],y:[T*Pe,S*we,N*_e,j]},Ie=o.default.subtract(a.getX(g),xe.x),Oe=o.default.subtract(u.getY(g),xe.y),Me=o.default.allRoots(Ie,0,1),Ce=o.default.allRoots(Oe,0,1),Te=0;Te<Me.length;Te++)for(var Se=Me[Te],Ne=0;Ne<Ce.length;Ne++){var je=Ce[Ne];if(Math.abs(Se-je)<s){var Ae=(Se+je)/2,ze=Ae*_e;Ae>=0&&Ae<=1&&ze>=0&&ze<=1&&be.push([ze,Ae])}}return be}},{"../get-x":27,"../get-y":28,"flo-poly":42,"flo-vector2d":50}],5:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../coincident"),i=e("../from-to"),a=e("./get-distance-to-line-function"),u=e("./calc-other-t"),s=e("./geo-clip"),l=e("./center"),c=e("../evaluate"),f=e("../debug/fat-line");r.bezier3Intersection=function(e,t,r,d){var v=192*Number.EPSILON;void 0===r&&(r=0),r=Math.max(r,v),void 0===d&&(d=1e-6),d=Math.max(d,1e-6);var p=0,g=[];"undefined"!=typeof _bez_debug_&&(_bez_debug_.generated.elems.beziers.push([e,t]),_bez_debug_.generated.elems.fatLine.push(new f.FatLine([[0,0],[1e-10,1e-10]],0,0)));var h=[];for(h.push({ps1:e,ps2:t,tRange1:[0,1],tRange2:[0,1],idx:1});0!==h.length;){var y=h.pop();I(y.ps1,y.ps2,y.tRange1,y.tRange2,y.idx)}if("undefined"!=typeof _bez_debug_){var b=!0,m=!1,_=void 0;try{for(var w,P=g[Symbol.iterator]();!(b=(w=P.next()).done);b=!0){var x=w.value;_bez_debug_.generated.elems.intersection.push(c.evaluate(e,x[0]))}}catch(e){m=!0,_=e}finally{try{!b&&P.return&&P.return()}finally{if(m)throw _}}}return g;function I(c,d,v,y,b){var m=0===b?1:0,_=l.center(d,c),w=n(_,2);d=w[0],c=w[1],"undefined"!=typeof _bez_debug_&&_bez_debug_.generated.elems.beziers.push([d,c]);var P,x,I=n(c,4),O=I[0],M=I[3],C=void 0;4===++p&&(p=0),C=a.getDistanceToLineFunction([O,M]);var T=[1,2].map(function(e){return C(c[e])}),S=n(T,2),N=S[0],j=S[1],A=N*j>0?.75:4/9;P=A*Math.min(0,N,j),x=A*Math.max(0,N,j),"undefined"!=typeof _bez_debug_&&_bez_debug_.generated.elems.fatLine.push(new f.FatLine([O,M],P,x));var z=s.geoClip(d,C,P,x),E=z.tMin,B=z.tMax;if(E!==Number.POSITIVE_INFINITY){if(B-E>.7){var D=y[1]-y[0],F=v[1]-v[0];if(void 0!==o.coincident(d,c))return;if(D<=F){m=b;var L=[c,d];d=L[0],c=L[1];var Y=[v,y];y=Y[0],v=Y[1]}var R=y[1]-y[0],k=y[0],q=k+R/2,H=q,V=y[1],X=i.fromTo(d)(0,.5),G=i.fromTo(d)(.5,1);return h.push({ps1:X,ps2:c,tRange1:[k,q],tRange2:v,idx:m}),void h.push({ps1:G,ps2:c,tRange1:[H,V],tRange2:v,idx:m})}var Q=y[1]-y[0],U=E*Q+y[0],Z=B*Q+y[0];if(d=i.fromTo(d)(E,B),Math.abs(Z-U)<r){var K=(Z+U)/2,W=0===b?[e,t]:[t,e],J=u.calcOtherT(K,W[0],W[1]);if(void 0===J)return;var $=0===b?[K,J]:[J,K];g.push($)}else h.push({ps1:d,ps2:c,tRange1:[U,Z],tRange2:v,idx:m})}}}},{"../coincident":11,"../debug/fat-line":15,"../evaluate":21,"../from-to":24,"./calc-other-t":6,"./center":7,"./geo-clip":8,"./get-distance-to-line-function":9}],6:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var i=e("flo-vector2d"),a=e("../evaluate"),u=e("../ts-at-x"),s=e("../ts-at-y");r.calcOtherT=function(e,t,r){var l=Math.max(t[0][0],t[0][1],t[1][0],t[1][1],t[2][0],t[2][1],t[3][0],t[3][1],r[0][0],r[0][1],r[1][0],r[1][1],r[2][0],r[2][1],r[3][0],r[3][1]),c=a.evaluate(t)(e),f=n(c,2),d=f[0],v=f[1],p=s.tsAtY(r,v),g=u.tsAtX(r,d);if(p.length||g.length){var h=[].concat(o(p),o(g)),y=void 0,b=Number.POSITIVE_INFINITY,m=!0,_=!1,w=void 0;try{for(var P,x=h[Symbol.iterator]();!(m=(P=x.next()).done);m=!0){var I=P.value,O=a.evaluate(r)(I),M=i.squaredDistanceBetween(c,O);M<b&&(b=M,y=I)}}catch(e){_=!0,w=e}finally{try{!m&&x.return&&x.return()}finally{if(_)throw w}}var C=6144*Number.EPSILON*l;if(!(b>C*C))return y}}},{"../evaluate":21,"../ts-at-x":33,"../ts-at-y":34,"flo-vector2d":50}],7:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("flo-vector2d");r.center=function(e,t){var r=n(e,4),i=r[0],a=r[1],u=r[2],s=r[3],l=n(t,4),c=l[0],f=l[1],d=l[2],v=l[3],p=o.squaredDistanceBetween(i,a)+o.squaredDistanceBetween(a,u)+o.squaredDistanceBetween(u,s),g=o.squaredDistanceBetween(c,f)+o.squaredDistanceBetween(f,d)+o.squaredDistanceBetween(d,v),h=void 0,y=void 0;return g<p?(h=(c[0]+f[0]+d[0]+v[0])/4,y=(c[1]+f[1]+d[1]+v[1])/4):(h=(i[0]+a[0]+u[0]+s[0])/4,y=(i[1]+a[1]+u[1]+s[1])/4),[e=e.map(function(e){return[e[0]-h,e[1]-y]}),t=t.map(function(e){return[e[0]-h,e[1]-y]})]}},{"flo-vector2d":50}],8:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("flo-poly"),i=e("../to-hybrid-quadratic");r.geoClip=function(e,t,r,a){var u=i.toHybridQuadratic(e),s=t(u[0]),l=t(u[2]),c=t(u[1][0]),f=t(u[1][1]),d=Math.min(c,f),v=Math.max(c,f),p=[s-2*d+l,-2*s+2*d,s],g=[s-2*v+l,-2*s+2*v,s],h=2*Math.max(o.default.hornerErrorBound(p,1),o.default.hornerErrorBound(g,1));r-=h,a+=h;var y=p.slice();y[2]=y[2]-r;var b=p.slice();b[2]=b[2]-a;var m=g.slice();m[2]=m[2]-r;var _=g.slice();_[2]=_[2]-a;var w=Number.POSITIVE_INFINITY,P=Number.NEGATIVE_INFINITY,x=o.default.allRoots(y,0,1),I=o.default.allRoots(b,0,1),O=o.default.allRoots(m,0,1),M=o.default.allRoots(_,0,1);return w=Math.min.apply(Math,n(x).concat(n(I),n(O),n(M))),P=Math.max.apply(Math,n(x).concat(n(I),n(O),n(M))),s>=r&&s<=a&&(w=0),l>=r&&l<=a&&(P=1),w<0&&(w=0),P>1&&(P=1),{tMin:w,tMax:P}}},{"../to-hybrid-quadratic":32,"flo-poly":42}],9:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./get-line-equation");r.getDistanceToLineFunction=function(e){var t=o.getLineEquation(e),r=n(t,3),i=r[0],a=r[1],u=r[2];return function(e){return i*e[0]+a*e[1]+u}}},{"./get-line-equation":10}],10:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0}),r.getLineEquation=function(e){var t=n(e,2),r=n(t[0],2),o=r[0],i=r[1],a=n(t[1],2),u=a[0],s=a[1],l=i-s,c=u-o,f=o*s-u*i,d=Math.sqrt(Math.pow(l,2)+Math.pow(c,2));return[l/d,c/d,f/d]}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d"),o=e("./evaluate"),i=e("./line-intersection"),a=e("./normal");n.squaredDistanceBetween;function u(e,t,r){var u=o.evaluate(e)(r),s=a.normal(e)(r),l=n.translate(u,s),c=i.lineIntersection(t,[u,l]),f=void 0,d=void 0,v=Number.POSITIVE_INFINITY,p=!0,g=!1,h=void 0;try{for(var y,b=c[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var m=y.value,_=o.evaluate(t)(m),w=n.distanceBetween(_,u);w<v&&(f=m,d=_,v=w)}}catch(e){g=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(g)throw h}}return{t:f,p:d,d:v}}r.coincident=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=[.01,.99].map(function(r){return u(e,t,r)}),o=[.01,.99].map(function(r){return u(t,e,r)}),i=.01,a=.99,s=.01,l=.99;if(n[0].d<=r&&(i=n[0].t),n[1].d<=r&&(a=n[1].t),o[0].d<=r&&(s=o[0].t),o[1].d<=r&&(l=o[1].t),s>l){var c=[l,s];s=c[0],l=c[1]}if(i>a){var f=[a,i];i=f[0],a=f[1]}var d=l-s;if(!(d<.1&&a-i<.1)){for(var v=0;v<10;v++)if(u(e,t,s+d*(v/10)).d>r)return;return{p:[s,l],q:[i,a]}}}},{"./evaluate":21,"./line-intersection":29,"./normal":30,"flo-vector2d":50}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deCasteljau=function(e,t){function r(t){if(0===t)return[[e[0],e[0],e[0],e[0]],e];if(1===t)return[e,[e[3],e[3],e[3],e[3]]];var r=1-t,n=e[0],o=e[1],i=e[2],a=e[3],u=n*r+o*t,s=o*r+i*t,l=i*r+a*t,c=u*r+s*t,f=s*r+l*t,d=c*r+f*t;return[[n,u,c,d],[d,f,l,a]]}return void 0===t?r:r(t)}},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./draw-elem/draw-elem");r.BezDebug=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.draw=t,this.g=r,this.generated={elems:{beziers:[],fatLine:[],looseBoundingBox:[],tightBoundingBox:[],extreme:[],boundingHull:[],intersection:[]}},this.fs={draw:t,drawElem:n.drawElemFunctions}}},{"./draw-elem/draw-elem":14}],14:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var i=e("flo-vector2d");var a={beziers:function(e,t){var r=_bez_debug_.fs.draw,n=r.bezier(e,t[0],"blue thin5 nofill"),i=r.bezier(e,t[1],"green thin5 nofill"),a=function(e){var t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,i=!0,a=!1,u=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;c[0]<t&&(t=c[0]),c[1]<r&&(r=c[1]),c[0]>n&&(n=c[0]),c[1]>o&&(o=c[1])}}catch(e){a=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw u}}var f=n-t,d=o-r;return Math.max(f,d)}([].concat(o(t[0]),o(t[1])))/400,u=[].concat(o(r.dot(e,t[0][0],a,"blue")),o(r.dot(e,t[0][1],a,"blue")),o(r.dot(e,t[0][2],a,"blue")),o(r.dot(e,t[0][3],a,"blue")),o(r.dot(e,t[1][0],a,"green")),o(r.dot(e,t[1][1],a,"green")),o(r.dot(e,t[1][2],a,"green")),o(r.dot(e,t[1][3],a,"green")));return[].concat(o(n),o(i),o(u))},intersection:function(e,t){return _bez_debug_.fs.draw.crossHair(e,t,"red thin5 nofill",.05)},extreme:function(e,t){return _bez_debug_.fs.draw.crossHair(e,t.p,"red thin10 nofill",.05)},boundingHull:function(e,t){return _bez_debug_.fs.draw.polygon(e,t,"thin5 black nofill")},looseBoundingBox:function(e,t){return _bez_debug_.fs.draw.rect(e,t,"thin5 brown nofill")},tightBoundingBox:function(e,t){return _bez_debug_.fs.draw.polygon(e,t,"thin5 black nofill")},fatLine:function(e,t){var r=_bez_debug_.fs.draw,a=t.l,u=t.minD,s=t.maxD,l=n(a,2),c=l[0],f=l[1],d=1024,v=i.fromTo(c,f),p=[+d*v[0],+d*v[1]],g=[-d*v[0],-d*v[1]],h=[-v[1],v[0]],y=i.toLength(h,u),b=i.toLength(h,s),m=i.translate(c,g),_=i.translate(f,p),w=[i.translate(m,y),i.translate(_,y)],P=[i.translate(m,b),i.translate(_,b)],x=r.line(e,w),I=r.line(e,P);return[].concat(o(x),o(I))}};r.drawElemFunctions=a},{"flo-vector2d":50}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.FatLine=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.l=t,this.minD=r,this.maxD=n}},{}],16:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./de-casteljau");r.evalDeCasteljau=function(e,t){var r=n(e,4),i=n(r[0],2),a=i[0],u=i[1],s=n(r[1],2),l=s[0],c=s[1],f=n(r[2],2),d=f[0],v=f[1],p=n(r[3],2),g=p[0],h=p[1],y=o.deCasteljau([a,l,d,g]),b=o.deCasteljau([u,c,v,h]);function m(e){return 0===e?[a,u]:1===e?[g,h]:[y(e)[1][0],b(e)[1][0]]}return void 0===t?m:m(t)}},{"./de-casteljau":12}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-poly"),o=e("./get-dx");r.evaluateDx=function(e,t){var r=o.getDx(e),i=n.default.evaluate(r);return void 0===t?i:i(t)}},{"./get-dx":25,"flo-poly":42}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-poly"),o=e("./get-dy");r.evaluateDy=function(e,t){var r=o.getDy(e),i=n.default.evaluate(r);return void 0===t?i:i(t)}},{"./get-dy":26,"flo-poly":42}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-poly"),o=e("./get-x");r.evaluateX=function(e,t){var r=o.getX(e),i=n.default.evaluate(r);function a(t){return 0===t?e[0][0]:1===t?e[3][0]:i(t)}return void 0===t?a:a(t)}},{"./get-x":27,"flo-poly":42}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-poly"),o=e("./get-y");r.evaluateY=function(e,t){var r=o.getY(e),i=n.default.evaluate(r);function a(t){return 0===t?e[0][1]:1===t?e[3][1]:i(t)}return void 0===t?a:a(t)}},{"./get-y":28,"flo-poly":42}],21:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./evaluate-x"),i=e("./evaluate-y");r.evaluate=function(e,t){var r=n(e,4),a=n(r[0],2),u=a[0],s=a[1],l=n(r[3],2),c=l[0],f=l[1],d=o.evaluateX(e),v=i.evaluateY(e);function p(e){return 0===e?[u,s]:1===e?[c,f]:[d(e),v(e)]}return void 0===t?p:p(t)}},{"./evaluate-x":19,"./evaluate-y":20}],22:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./de-casteljau");r.from0ToT=function(e,t){var r=n(e,4),i=n(r[0],2),a=i[0],u=i[1],s=n(r[1],2),l=s[0],c=s[1],f=n(r[2],2),d=f[0],v=f[1],p=n(r[3],2),g=[a,l,d,p[0]],h=[u,c,v,p[1]],y=n(o.deCasteljau(g,t)[0],4),b=y[0],m=y[1],_=y[2],w=y[3],P=n(o.deCasteljau(h,t)[0],4);return[[b,P[0]],[m,P[1]],[_,P[2]],[w,P[3]]]}},{"./de-casteljau":12}],23:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./de-casteljau");r.fromTTo1=function(e,t){var r=n(e,4),i=n(r[0],2),a=i[0],u=i[1],s=n(r[1],2),l=s[0],c=s[1],f=n(r[2],2),d=f[0],v=f[1],p=n(r[3],2),g=[a,l,d,p[0]],h=[u,c,v,p[1]],y=n(o.deCasteljau(g,t)[1],4),b=y[0],m=y[1],_=y[2],w=y[3],P=n(o.deCasteljau(h,t)[1],4);return[[b,P[0]],[m,P[1]],[_,P[2]],[w,P[3]]]}},{"./de-casteljau":12}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./evaluate"),o=e("./from-0-to-T"),i=e("./from-T-to-1");r.fromTo=function(e){return function(t,r){if(t===r){var a=n.evaluate(e,t);return[a,a,a,a]}if(0===t&&1===r)return e;if(0===t)return o.from0ToT(e,r);if(1===r)return i.fromTTo1(e,t);var u=i.fromTTo1(e,t);return o.from0ToT(u,(r-t)/(1-t))}}},{"./evaluate":21,"./from-0-to-T":22,"./from-T-to-1":23}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-poly"),o=e("flo-memoize"),i=e("./get-x"),a=(0,o.default.m1)(function(e){return n.default.differentiate(i.getX(e))});r.getDx=a},{"./get-x":27,"flo-memoize":41,"flo-poly":42}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-poly"),o=e("flo-memoize"),i=e("./get-y"),a=(0,o.default.m1)(function(e){return n.default.differentiate(i.getY(e))});r.getDy=a},{"./get-y":28,"flo-memoize":41,"flo-poly":42}],27:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=(0,e("flo-memoize").default.m1)(function(e){var t=n(e,4),r=n(t[0],1)[0],o=n(t[1],1)[0],i=n(t[2],1)[0];return[n(t[3],1)[0]-3*i+3*o-r,3*i-6*o+3*r,3*o-3*r,r]});r.getX=o},{"flo-memoize":41}],28:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=(0,e("flo-memoize").default.m1)(function(e){var t=n(e,4),r=n(t[0],2)[1],o=n(t[1],2)[1],i=n(t[2],2)[1];return[n(t[3],2)[1]-3*i+3*o-r,3*i-6*o+3*r,3*o-3*r,r]});r.getY=o},{"flo-memoize":41}],29:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("flo-poly"),i=e("flo-vector2d"),a=e("./get-y");r.lineIntersection=function(e,t){var r=n(t,2),u=n(r[0],2),s=u[0],l=u[1],c=n(r[1],2),f=c[0]-s,d=c[1]-l;if(0===f&&0===d)return[];e=i.translatePs([-s,-l],e);var v=Math.sqrt(f*f+d*d),p=d/v,g=f/v;return e=i.rotatePs(-p,g,e),o.default.allRoots(a.getY(e),0,1)}},{"./get-y":28,"flo-poly":42,"flo-vector2d":50}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./tangent");r.normal=function(e,t){var r=n.tangent(e);function o(e){var t=r(e);return[t[1],-t[0]]}return void 0===t?o:o(t)}},{"./tangent":31}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./evaluate-dx"),o=e("./evaluate-dy");r.tangent=function(e,t){var r=n.evaluateDx(e),i=o.evaluateDy(e);function a(e){var t=r(e),n=i(e),o=Math.sqrt(t*t+n*n);return[t/o,n/o]}return void 0===t?a:a(t)}},{"./evaluate-dx":17,"./evaluate-dy":18}],32:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0}),r.toHybridQuadratic=function(e){var t=n(e,4),r=n(t[0],2),o=r[0],i=r[1],a=n(t[1],2),u=a[0],s=a[1],l=n(t[2],2),c=l[0],f=l[1],d=n(t[3],2),v=d[0],p=d[1];return[[o,i],[[(3*u-o)/2,(3*s-i)/2],[(3*c-v)/2,(3*f-p)/2]],[v,p]]}},{}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-poly"),o=e("./get-x");r.tsAtX=function(e,t){return e=e.map(function(e){return[e[0]-t,e[1]]}),n.default.allRoots(o.getX(e),0,1)}},{"./get-x":27,"flo-poly":42}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-poly"),o=e("./get-y");r.tsAtY=function(e,t){return e=e.map(function(e){return[e[0],e[1]-t]}),n.default.allRoots(o.getY(e),0,1)}},{"./get-y":28,"flo-poly":42}],35:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o={2:{weights:[1,1],abscissas:[-.5773502691896257,.5773502691896257]},4:{weights:[.6521451548625461,.6521451548625461,.3478548451374538,.3478548451374538],abscissas:[-.3399810435848563,.3399810435848563,-.8611363115940526,.8611363115940526]},8:{weights:[.362683783378362,.362683783378362,.3137066458778873,.3137066458778873,.2223810344533745,.2223810344533745,.1012285362903763,.1012285362903763],abscissas:[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363]},16:{abscissas:[-.9894009349916499,-.9445750230732326,-.8656312023878318,-.755404408355003,-.6178762444026438,-.45801677765722737,-.2816035507792589,-.09501250983763744,.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],weights:[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685,.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]}};r.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;if(t[0]===t[1])return 0;for(var i=o[r],a=i.weights,u=i.abscissas,s=n(t,2),l=s[0],c=s[1],f=0,d=(c-l)/2,v=(c+l)/2,p=0;p<=r-1;p++)f+=a[p]*e(d*u[p]+v);return d*f}},{}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("flo-vector2d"),o=1e-10;function i(e,t,r){if(t===r)return;let n=e[t];e[t]=e[r],e[r]=n}r.default=function(e,t=!1,r=o){function a(e,o,i){let a=n.default.ccw(e,o,i,r);return t?a<0:a<=0}t=!!t;let u=e.slice(),s=u.length,l=function(e){let t,r=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY];for(let n=0;n<e.length;n++){let o=e[n][1];(o<r[1]||o===r[1]&&e[n][0]<r[0])&&(t=n,r=e[n])}return t}(u),[c]=u.splice(l,1);(u=function(e,t){let r=[];for(let t=0;t<e.length;t++)r.push(t);r.sort(function(r,n){let o=t(e[r],e[n]);return 0!==o?o:r-n});let n=[];for(let t=0;t<e.length;t++)n.push(e[r[t]]);return n}(u,function(e,t){let o=n.default.cross(n.default.fromTo(c,t),n.default.fromTo(c,e));return 0!==(o=Math.abs(o)<r?0:o)?o:(o=e[1]-t[1],0!==(o=Math.abs(o)<r?0:o)?o:e[0]-t[0])})).unshift(c);let f=1;for(let e=2;e<s;e++){for(;a(u[f-1],u[f],u[e]);)if(f>1)f-=1;else{if(e===s-1){f-=1;break}e+=1}i(u,f+=1,e)}return u.slice(0,f+1)}},{"flo-vector2d":50}],37:[function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./src/tree-node"),i=e("./src/tree-node-color"),a=e("./src/tree-node-direction");function u(e){return e&&e.color===i.default.RED}var s=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getMinNode=this.getMinOrMaxNode(a.default.LEFT),this.getMaxNode=this.getMinOrMaxNode(a.default.RIGHT);if(this.setComparator(t,n),this.replaceDups=n,this.root=null,r){var o=!0,i=!1,u=void 0;try{for(var s,l=r[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;this.insert(c)}}catch(e){i=!0,u=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw u}}}}return n(e,[{key:"setComparator",value:function(e,t){this.compare=t?e:function(t,r){return e(t,r[0])}}},{key:"isEmpty",value:function(){return!this.root}},{key:"find",value:function(e){for(var t=this.root;t;){var r=this.compare(e,t.data);if(0===r)return t;t=t[r>0?a.default.RIGHT:a.default.LEFT]}return null}},{key:"toArrayInOrder",value:function(){var e=[];return function t(r){if(!r)return;t(r[a.default.LEFT]);e.push(r);t(r[a.default.RIGHT])}(this.root),e}},{key:"insert",value:function(e){var t=this;t.root=function e(r,n){if(!r)return new o.default(n,!t.replaceDups);var i=t.compare(n,r.data);if(0===i)t.replaceDups?r.data=n:r.data.push(n);else{var s=i>0?a.default.RIGHT:a.default.LEFT;r[s]=e(r[s],n),r[s].parent=r}u(r[a.default.RIGHT])&&!u(r[a.default.LEFT])&&(r=c(a.default.LEFT,r));u(r[a.default.LEFT])&&u(r[a.default.LEFT][a.default.LEFT])&&(r=c(a.default.RIGHT,r));u(r[a.default.LEFT])&&u(r[a.default.RIGHT])&&d(r);return r}(t.root,e),t.root.color=i.default.BLACK,t.root.parent=void 0}},{key:"remove",value:function(e,t){var r=this;r.root=function e(n,o){var i=r.compare(o,n.data);if(!r.replaceDups&&0===i&&!t&&n.data.length>1)return l(o,n.data),n;if(i<0&&!n[a.default.LEFT]||i>0&&!n[a.default.RIGHT])return n;if(i<0)return u(n[a.default.LEFT])||u(n[a.default.LEFT][a.default.LEFT])||(n=v(n)),n[a.default.LEFT]=e(n[a.default.LEFT],o),n[a.default.LEFT]&&(n[a.default.LEFT].parent=n),p(n);if(u(n[a.default.LEFT])&&(n=c(a.default.RIGHT,n),i=r.compare(o,n.data),!r.replaceDups&&0===i&&!t&&n.data.length>1))return l(o,n.data),n;if(0===i&&!n[a.default.RIGHT])return null;if(!u(n[a.default.RIGHT])&&!u(n[a.default.RIGHT][a.default.LEFT])&&(n=function(e){d(e),u(e[a.default.LEFT][a.default.LEFT])&&d(e=c(a.default.RIGHT,e));return e}(n),i=r.compare(o,n.data),!r.replaceDups&&0===i&&!t&&n.data.length>1))return l(o,n.data),n;0===i?(n.data=r.min(n[a.default.RIGHT]),n[a.default.RIGHT]=function e(t){if(!t[a.default.LEFT])return null;u(t[a.default.LEFT])||u(t[a.default.LEFT][a.default.LEFT])||(t=v(t));t[a.default.LEFT]=e(t[a.default.LEFT]);t[a.default.LEFT]&&(t[a.default.LEFT].parent=t);return p(t)}(n[a.default.RIGHT])):n[a.default.RIGHT]=e(n[a.default.RIGHT],o);n[a.default.RIGHT]&&(n[a.default.RIGHT].parent=n);return p(n)}(r.root,e),r.root&&(r.root.color=i.default.BLACK,r.root.parent=void 0)}},{key:"findBounds",value:function(e){var t=this.root,r=[void 0,void 0];if(null===t)return r;for(;t;){var n=this.compare(e,t.data);n>=0?r[0]=t:r[1]=t,t=t[n>=0?a.default.RIGHT:a.default.LEFT]}return r}},{key:"findBoundsExcl",value:function(e){var t=this,r=t.root,n=[void 0,void 0];if(null===r)return n;return function r(o){for(;o;){var i=t.compare(e,o.data);if(0===i)return r(o[a.default.LEFT]),void r(o[a.default.RIGHT]);i>0?n[0]=o:i<0&&(n[1]=o),o=o[i>0?a.default.RIGHT:a.default.LEFT]}}(r),n}},{key:"findAllInOrder",value:function(e){var t=this,r=[];return function n(o){for(;o;){var i=t.compare(e,o.data);if(0===i)return n(o[a.default.LEFT]),r.push(o),void n(o[a.default.RIGHT]);o=o[i>0?a.default.RIGHT:a.default.LEFT]}}(t.root),r}},{key:"getMinOrMaxNode",value:function(e){return function(t){if(t){for(;t[e];)t=t[e];return t}}}},{key:"min",value:function(e){return this.getMinNode(e).data}},{key:"max",value:function(e){return this.getMaxNode(e).data}}]),e}();function l(e,t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}function c(e,t){var r=e?a.default.LEFT:a.default.RIGHT,n=t[r];return t[r]=n[e],n[e]&&(n[e].parent=t),n[e]=t,t.parent=n,n.color=t.color,t.color=i.default.RED,n}function f(e){return e===i.default.RED?i.default.BLACK:i.default.RED}function d(e){e.color=f(e.color),e[a.default.LEFT].color=f(e[a.default.LEFT].color),e[a.default.RIGHT].color=f(e[a.default.RIGHT].color)}function v(e){if(d(e),u(e[a.default.RIGHT][a.default.LEFT])){var t=c(a.default.RIGHT,e[a.default.RIGHT]);e[a.default.RIGHT]=t,t.parent=e,d(e=c(a.default.LEFT,e))}return e}function p(e){return u(e[a.default.RIGHT])&&(e=c(a.default.LEFT,e)),u(e[a.default.LEFT])&&u(e[a.default.LEFT][a.default.LEFT])&&(e=c(a.default.RIGHT,e)),u(e[a.default.LEFT])&&u(e[a.default.RIGHT])&&d(e),e}r.default=s},{"./src/tree-node":40,"./src/tree-node-color":38,"./src/tree-node-direction":39}],38:[function(e,t,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),function(e){e[e.BLACK=0]="BLACK",e[e.RED=1]="RED"}(n||(n={})),r.default=n},{}],39:[function(e,t,r){"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"}(n||(n={})),r.default=n},{}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./tree-node-color");r.default=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=r?[t]:t,this.color=n.default.RED}},{"./tree-node-color":38}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof WeakMap;var o={m1:function(e){if(!n)return e;var t=new WeakMap;return function(r){var n=t.get(r);return void 0!==n?n:(n=e(r),t.set(r,n),n)}}};r.default=o},{}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./src/core-operators"),o=e("./src/root-operators"),i=e("./src/root-bounds"),a=e("./src/all-roots-recursive"),u=e("./src/random"),s=e("./src/error-analysis"),l=e("./src/from-roots"),c=(n.default.multiply,Object.assign({},n.default,o.default,i.default,s.default,{random:u.default,fromRoots:l.default,allRoots:a.default}));r.default=c},{"./src/all-roots-recursive":43,"./src/core-operators":44,"./src/error-analysis":45,"./src/from-roots":46,"./src/random":47,"./src/root-bounds":48,"./src/root-operators":49}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./core-operators"),o=e("./root-operators"),i=e("./root-bounds"),a=n.default,u=a.clip0,s=a.evaluate,l=a.differentiate,c=(a.toCasStr,o.default),f=c.brent,d=c.quadraticRoots,v=i.default,p=(v.rootMagnitudeUpperBound_fujiwara,v.positiveRootUpperBound_LMQ),g=(v.positiveRootLowerBound_LMQ,v.negativeRootUpperBound_LMQ,v.negativeRootLowerBound_LMQ),h=Number.POSITIVE_INFINITY;r.default=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-h,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:+h,o=(t=u(t)).length-1,i=function(e,t){return function(r){return r>=e&&r<=t}}(r,n);if(2===o)return d(t).filter(i);if(o>2){var a=void 0,c=void 0;r===-h||n===+h?(a=r===-h?g(t):r,c=n===+h?p(t):n):(a=r,c=n);var v=e(l(t),a,c).filter(i);return v[0]!==a&&v.unshift(a),v[v.length-1]!==c&&v.push(c),function(e,t){for(var r=[],n=s(e),o=void 0,i=t[0],a=1;a<t.length;a++){var u=void 0,l=t[a],c=n(i),d=n(l),v=c*d;0===v?0===c?u=i:0===d&&a===t.length-1&&(u=l):c*d<0&&(u=f(n,i,l)),void 0!==u&&u!==o&&(r.push(u),o=u),i=l}return r}(t,v)}return 1===o?[-t[1]/t[0]].filter(i):[]}},{"./core-operators":44,"./root-bounds":48,"./root-operators":49}],44:[function(e,t,r){"use strict";function n(e,t){var r=e.length-1,n=t.length-1,o=r-n,i=0,a=0;o>0?a=-o:o<0&&(i=+o);for(var s=Math.max(r,n),l=[],c=0;c<s+1;c++){var f=e[c+i],d=t[c+a];l.push((f||0)-(d||0))}return u(l)}function o(e){for(var t=[],r=e.length-1,n=0;n<r;n++)t.push((r-n)*e[n]);return t}function i(e,t){for(var r=e.length-1,n=t.length-1,o=r+n,i=new Array(o+1).fill(0),a=0;a<r+1;a++)for(var s=0;s<n+1;s++)i[o-(a+s)]+=e[r-a]*t[n-s];return u(i)}function a(e,t){if(0===e)return[];for(var r=t.length-1,n=[],o=0;o<r+1;o++)n.push(e*t[o]);return u(n)}function u(e){return 0!==e[0]?e:u(e.slice(1))}function s(e){for(var t=0,r=0;r<e.length;r++){var n=Math.abs(e[r]);n>t&&(t=n)}return t}Object.defineProperty(r,"__esModule",{value:!0});var l={equal:function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},add:function(e,t){var r=e.length-1,n=t.length-1,o=r-n,i=0,a=0;o>0?a=-o:o<0&&(i=+o);for(var s=Math.max(r,n),l=[],c=0;c<s+1;c++){var f=e[c+i],d=t[c+a];l.push((f||0)+(d||0))}return u(l)},subtract:n,multiplyByConst:a,negate:function(e){return a(-1,e)},differentiate:o,multiply:i,degree:function(e){return e.length-1},evaluate:function(e,t){function r(t){for(var r=e[0],n=1;n<e.length;n++)r=e[n]+r*t;return r}return void 0===t?r:r(t)},evaluateAt0:function(e){return e[e.length-1]},signChanges:function(e){for(var t=e.length-1,r=0,n=Math.sign(e[0]),o=1;o<t+1;o++){var i=Math.sign(e[o]);i!==n&&0!==i&&(r++,n=i)}return r},invert:function(e){return e.slice().reverse()},changeVariables:function(e,t,r){for(var n=e.length-1,o=[],i=0;i<n+1;i++)o.push(new Array(n+1).fill(0));o[0][0]=1;for(var a=1;a<=n;a++){o[0][a]=r*o[0][a-1];for(var u=1;u<=a;u++)o[u][a]=r*o[u][a-1]+t*o[u-1][a-1]}for(var s=new Array(n+1).fill(0),l=0;l<=n;l++){s[n-l]=0;for(var c=l;c<=n;c++){var f=o[l][c]*e[n-c];s[n-l]+=f}}return s},reflectAboutYAxis:function(e){for(var t=e.length-1,r=e.slice(),n=0;n<t+1;n++)n%2&&(r[n]=-r[n]);return r},sturmChain:function(e){function t(e,t){e.length,t.length;var r=e[1]/e[0]-t[1]/t[0];return n(i(a(e[0]/t[0],t),[1,r]),e)}var r=[];r.push(e),r.push(o(e));for(var u=1;r[u].length-1>0;){for(var s=t(r[u-1],r[u]);r[u].length-s.length<1;)s.shift();r.push(s),u++}return r},clip:function e(t,r){r=void 0===r?Number.EPSILON:r;var n=s(t);if(0===n)return[];if(Math.abs(t[0])>r*n)return t;for(var o=t.slice(1);Math.abs(o[0])<r*n;)o=o.slice(1);return e(o,r)},clip0:u,deflate:function(e,t){for(var r=e.length-1,n=[e[0]],o=1;o<r;o++)n.push(e[o]+t*n[o-1]);return n},maxCoefficient:s,toCasStr:function(e){for(var t=e.length-1,r="",n=0;n<t+1;n++){var o=e[n].toString();r+=n===t?o:n===t-1?"x*"+o+" + ":"x^"+(t-n).toString()+"*"+o+" + "}return r}};r.default=l},{}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});e("./core-operators").default.evaluate;var n={hornerErrorBound:function(e,t){var r=Number.EPSILON;return 2*(e.length-1)*r*function(e,t){for(var r=e.length-1,n=0,o=0;o<r;o++)n+=Math.abs(e[o]*Math.pow(t,r-o));return n}(e,t)}};r.default=n},{"./core-operators":44}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./core-operators").default.multiply;r.default=function(e){for(var t=[1],r=0;r<e.length;r++)t=n(t,[1,-e[r]]);return t}},{"./core-operators":44}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./from-roots"),o=123456789,i=4294967296;function a(e){return function(t,r,n,i){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=[],l=0;l<t;l++){var c=e(r,n,i,a,u),f=c.p;a=c.seed,s.push(f)}return s}}function u(e){return(134775813*e+1)%i}function s(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=[],c=0;c<e;c++){n=l(n=u(n),s,n/i*(r-t)+t,a)}return{vs:s=s.slice(0,e),seed:n}}function l(e,t,r,n){return e=u(e),t.push(r),e/i<n&&(e=l(e,t,r,n)),e}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,a=s(e,t,r,i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0);return i=a.seed,{p:n.default(a.vs),seed:i}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,i=s(e,t=void 0===t?-1:t,r=void 0===r?1:r,n=void 0===n?o:n);return n=i.seed,{p:i.vs,seed:n}}var d={flatRoots:c,flatRootsArr:a(c),flatCoefficients:f,flatCoefficientsArr:a(f)};r.default=d},{"./from-roots":46}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./core-operators").default,o=n.invert,i=n.negate,a=n.reflectAboutYAxis;function u(e){return Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e.map(function(e){return Math.abs(e)})))}var s=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152];function l(e){var t=e.length-1;if(t<1)return 0;e[0]<0&&(e=i(e));for(var r=[],n=0;n<t;n++)r.push(1);for(var o=0,a=0;a<=t;a++)if(!(e[a]>=0)){for(var u=Number.POSITIVE_INFINITY,l=!1,c=0;c<a;c++)if(!(e[c]<=0)){var f=r[c],d=void 0;d=f>20?Math.pow(2,f):s[f];var v=Math.pow(-e[a]/(e[c]/d),1/(a-c));r[c]++,u>v&&(u=v),l=!0}l&&o<u&&(o=u)}return o}function c(e){var t=l(o(e));return 0===t?0:1/t}var f={rootMagnitudeUpperBound_fujiwara:function(e){for(var t=e.length-1,r=e[0],n=[],o=1;o<t;o++){var i=Math.pow(Math.abs(e[o]/r),1/o);n.push(i)}return n.push(Math.pow(Math.abs(e[t]/2*r),1/t)),2*Math.max.apply(void 0,n)},positiveRootUpperBound_LMQ:l,positiveRootLowerBound_LMQ:c,negativeRootUpperBound_LMQ:function(e){return-c(a(e))},negativeRootLowerBound_LMQ:function(e){return-l(a(e))},rootMagnitudeUpperBound_rouche:function(e){return e.length,1+1/e[0]*u(e.slice(1))}};r.default=f},{"./core-operators":44}],49:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./core-operators").default,i=o.sturmChain,a=o.evaluate,u=o.signChanges;var s={quadraticRoots:function(e){var t=n(e,3),r=t[0],o=t[1],i=t[2],a=o*o-4*r*i;if(a<0)return[];if(0===a)return[-o/(2*r)];a=Math.sqrt(a);var u=void 0,s=void 0;return o>=0?(u=(-o-a)/(2*r),s=2*i/(-o-a)):(u=2*i/(-o+a),s=(-o+a)/(2*r)),u<s?[u,s]:[s,u]},numRootsWithin:function(e,t,r){var n=i(e),o=(a(e),n.map(function(e){return a(e)(t)})),s=n.map(function(e){return a(e)(r)});return u(o)-u(s)},brent:function(e,t,r){if(t===r)return t;var n=e(t),o=e(r);if(n*o>0)throw new Error("Root not bracketed");var i=void 0;if(Math.abs(n)<Math.abs(o)){i=t,t=r,r=i;var a=n;n=o,o=a}i=t;for(var u=!0,s=void 0;;){var l=2*Number.EPSILON*Math.abs(r),c=e(i),f=void 0;if(n!==c&&o!==c){var d=n-c,v=n-o,p=o-c;f=((t*o*p-r*n*d)*c+i*n*v*o)/(v*d*p)}else f=r-o*((r-t)/(o-n));var g=(3*t+r)/4,h=Math.abs(r-i),y=Math.abs(f-r),b=Math.abs(i-s);!(f>g&&f<r||f<g&&f>r)||u&&(y>=h/2||h<l)||!u&&(y>=b/2||b<l)?(f=(t+r)/2,u=!0):u=!1;var m=e(f);if(s=i,i=r,n*m<0?r=f:t=f,Math.abs(n)<Math.abs(o)){var _=t;t=r,r=_}if(0===o)return r;if(0===m)return f;if(Math.abs(t-r)<=l)return r;n=e(t),o=e(r)}},bisection:function(e,t,r){if(t===r)return t;if(r<t){var n=[r,t];t=n[0],r=n[1]}var o=e(t),i=e(r);if(0===o)return t;if(0===i)return r;if(o*i>0)throw new Error("Root not bracketed");for(;;){var a=t+(r-t)/2,u=e(a);if(0===u)return a;o*u<0?r=a:t=a;var s=2*Number.EPSILON*Math.abs(r);if(Math.abs(t-r)<=s)return r}}};r.default=s},{"./core-operators":44}],50:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=1e-10;function i(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,i=(t[0]-e[0])*(r[1]-e[1])-(t[1]-e[1])*(r[0]-e[0]);return Math.abs(i)<=n?0:i}function a(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function u(e,t){return Math.sqrt(a(e,t))}function s(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function l(e){return e[0]*e[0]+e[1]*e[1]}function c(e,t,r){return e[0]*(t[1]*r[2]-t[2]*r[1])-e[1]*(t[0]*r[2]-t[2]*r[0])+e[2]*(t[0]*r[1]-t[1]*r[0])}function f(e,t){function r(t){return[e[0]+t[0],e[1]+t[1]]}return void 0===t?r:r(t)}r.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},r.cross=function(e,t){return e[0]*t[1]-e[1]*t[0]},r.ccw=i,r.segSegIntersection=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,i=n(e,2),a=i[0],u=i[1],s=n(t,2),l=s[0],c=s[1],f=(u[0]-a[0])*(c[1]-l[1])-(u[1]-a[1])*(c[0]-l[0]),d=(a[1]-l[1])*(c[0]-l[0])-(a[0]-l[0])*(c[1]-l[1]),v=(a[1]-l[1])*(u[0]-a[0])-(a[0]-l[0])*(u[1]-a[1]);if(!(Math.abs(f)<=r)){var p=d/f,g=v/f;return 0<=p&&p<=1&&0<=g&&g<=1?[a[0]+p*(u[0]-a[0]),a[1]+p*(u[1]-a[1])]:void 0}Math.abs(d)},r.doesSegSegIntersect=function(e,t){return!(i(e[0],e[1],t[0])*i(e[0],e[1],t[1])>0||i(t[0],t[1],e[0])*i(t[0],t[1],e[1])>0)},r.squaredDistanceBetween=a,r.scale=function(e,t){return[e[0]*t,e[1]*t]},r.reverse=function(e){return[-e[0],-e[1]]},r.toUnitVector=function(e){var t=1/s(e);return[e[0]*t,e[1]*t]},r.toLength=function(e,t){var r=t/s(e);return[e[0]*r,e[1]*r]},r.fromTo=function(e,t){return[t[0]-e[0],t[1]-e[1]]},r.interpolate=function(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]},r.mean=function(e){var t=e[0],r=e[1];return[(t[0]+r[0])/2,(t[1]+r[1])/2]},r.distanceBetween=u,r.len=s,r.lengthSquared=l,r.manhattanDistanceBetween=function(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])},r.manhattanLength=function(e){return Math.abs(e[0])+Math.abs(e[1])},r.distanceBetweenPointAndLine=function(e,t){var r=n(e,2),o=r[0],i=r[1],a=n(t,2),u=n(a[0],2),s=u[0],l=u[1],c=n(a[1],2),f=c[0],d=c[1],v=d-l,p=f-s,g=v*o-p*i+f*l-d*s,h=Math.sqrt(p*p+v*v);return Math.abs(g/h)},r.squaredDistanceBetweenPointAndLineSegment=function(e,t){var r=a,n=t[0],o=t[1],i=r(n,o);if(0==i)return r(e,n);var u=((e[0]-n[0])*(o[0]-n[0])+(e[1]-n[1])*(o[1]-n[1]))/i;return u=Math.max(0,Math.min(1,u)),r(e,[n[0]+u*(o[0]-n[0]),n[1]+u*(o[1]-n[1])])},r.circumCenter=function(e){var t=e[0],r=e[1],n=e[2],o=l,i=.5*c([o(t),t[1],1],[o(r),r[1],1],[o(n),n[1],1]),a=.5*c([t[0],o(t),1],[r[0],o(r),1],[n[0],o(n),1]),u=c([t[0],t[1],1],[r[0],r[1],1],[n[0],n[1],1]);return c([t[0],t[1],o(t)],[r[0],r[1],o(r)],[n[0],n[1],o(n)]),[i/u,a/u]},r.inCenter=function(e){var t=u,r=e[0],n=e[1],o=e[2],i=t(n,o),a=t(r,o),s=t(r,n),l=i+a+s;return[(i*r[0]+a*n[0]+s*o[0])/l,(i*r[1]+a*n[1]+s*o[1])/l]},r.centroid=function(e){if(3===e.length){var t=e[0],r=e[1],n=e[2];return[(t[0]+r[0]+n[0])/3,(t[1]+r[1]+n[1])/3]}for(var o=0,i=0;i<e.length;i++){var a=e[i],u=i===e.length-1?e[0]:e[i+1];o+=a[0]*u[1]-u[0]*a[1]}o/=2;for(var s=[0,0],l=0;l<e.length;l++){var c=e[l],f=l===e.length-1?e[0]:e[l+1];s[0]=s[0]+(c[0]+f[0])*(c[0]*f[1]-f[0]*c[1]),s[1]=s[1]+(c[1]+f[1])*(c[0]*f[1]-f[0]*c[1])}return[s[0]/(6*o),s[1]/(6*o)]},r.det3=c,r.translate=f;var d,v=(d=f,function(e,t){var r=d(e),n=function(e){return e.map(r)};return void 0===t?n:n(t)});r.translatePs=v;var p=function(e){return function(t,r,n){var o=e(t,r),i=function(e){return e.map(o)};return void 0===n?i:i(n)}}(g);function g(e,t,r){v([1,2]);function n(r){return[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}return void 0===r?n:n(r)}r.rotatePs=p,r.rotate=g,r.equal=function(e,t){return e[0]===t[0]&&e[1]===t[1]},r.reverseRotate=function(e,t,r){return[+r[0]*t+r[1]*e,-r[0]*e+r[1]*t]},r.rotate90Degrees=function(e){return[-e[1],e[0]]},r.rotateNeg90Degrees=function(e){return[e[1],-e[0]]},r.transform=function(e,t){return[t(e[0]),t(e[1])]},r.getClosestTo=function(e,t){for(var r=void 0,n=Number.POSITIVE_INFINITY,o=0;o<t.length;o++){var i=t[o],u=a(e,i);u<n&&(r=i,n=u)}return r},r.getObjClosestTo=function(e,t,r){for(var n=void 0,o=Number.POSITIVE_INFINITY,i=0;i<t.length;i++){var u=t[i],s=a(e,r(u));s<o&&(n=u,o=s)}return n},r.translateThenRotatePs=function(e,t,r,n){var o=f(e);return n.map(function(e){return g(t,r,o(e))})},r.rotateThenTranslatePs=function(e,t,r,n){return n.map(function(n){return f(r,g(e,t,n))})}},{}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BezierPiece=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.curve=t,this.ts=r}},{}],52:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var i=0,a=1;var u=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.box=r,this.p=n}return o(e,null,[{key:"compare",value:function(e,t){var r=e.p[0]-t.p[0];return 0!==r?r:e.box===t.box?e.type===a?-1:1:e.type===i?1:-1}}]),e}();function s(e,t){var r=n(e,2),o=n(r[0],2)[1],i=n(r[1],2)[1],a=n(t,2),u=n(a[0],2)[1],s=n(a[1],2)[1];if(o>i){var l=[i,o];o=l[0],i=l[1]}if(u>s){var c=[s,u];u=c[0],s=c[1]}return o===u?o!==i&&u!==s:o<u?!(i<=u):o>u?!(s<=o):void 0}r.default=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],o=n[0][0]<n[1][0]?0:1,l=0===o?1:0;t.push(new u(0,n,n[o])),t.push(new u(1,n,n[l]))}t.sort(u.compare);for(var c=new Set,f=[],d=0;d<t.length;d++){var v=t[d],p=v.box;if(v.type===i){var g=!0,h=!1,y=void 0;try{for(var b,m=c.values()[Symbol.iterator]();!(g=(b=m.next()).done);g=!0){var _=b.value;s(p,_)&&f.push({box1:p,box2:_})}}catch(e){h=!0,y=e}finally{try{!g&&m.return&&m.return()}finally{if(h)throw y}}c.add(p)}else v.type===a&&c.delete(v.box)}return f}},{}],53:[function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("flo-vector2d"),i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.center=t,this.radius=r}return n(e,null,[{key:"scale",value:function(t,r){return new e(t.center,t.radius*r)}},{key:"engulfsCircle",value:function(e,t){if(e.radius<=t.radius)return!1;var r=o.squaredDistanceBetween(e.center,t.center),n=e.radius-t.radius;return n*n>r}},{key:"toString",value:function(e){return"c: "+e.center+" r: "+e.radius}}]),e}();r.Circle=i},{"flo-vector2d":50}],54:[function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./point-on-shape"),i=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pointOnShape=t,this.circle=r,this.order=n,this.order2=o}return n(e,null,[{key:"compare",value:function(e,t){var r=o.PointOnShape.compare(e.pointOnShape,t.pointOnShape);if(void 0!==r)return 0!==r?r:0!==(r=e.order-t.order)?r:e.order2-t.order2}}]),e}();r.ContactPoint=i},{"./point-on-shape":133}],55:[function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./contact-point"),i=e("./debug/cp-node-for-debugging"),a=["prev","next","prevOnCircle","nextOnCircle"],u=function(){function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cp=t,this.isHoleClosing=r,this.isIntersection=n,this.prev=o,this.next=i,this.prevOnCircle=a,this.nextOnCircle=u,this.matCurve=s}return n(e,[{key:"clone",value:function(){var t=new Map,r=new e(this.cp,this.isHoleClosing,this.isIntersection);r.matCurve=this.matCurve,t.set(this,r);for(var n=[{cpNode:this,newCpNode:r}];n.length;){var o=n.pop(),i=o.cpNode,u=o.newCpNode,s=!0,l=!1,c=void 0;try{for(var f,d=a[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var v=f.value,p=i[v],g=t.get(p);g||((g=new e(p.cp,p.isHoleClosing,p.isIntersection)).matCurve=p.matCurve,t.set(p,g),n.push({cpNode:p,newCpNode:g})),u[v]=g}}catch(e){l=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw c}}}return r}},{key:"remove",value:function(e,t){var r=t.prev,n=t.next;r.next=n,n.prev=r,e.remove(t,!1)}},{key:"getNodes",value:function(){var e=this,t=[];do{t.push(e),e=e.nextOnCircle}while(e!==this);return t}},{key:"isTerminating",value:function(){return this===this.next.prevOnCircle}},{key:"isSharp",value:function(){return 0===this.cp.circle.radius}},{key:"isOneProng",value:function(){if(this.isSharp())return!0;if(this.isThreeProng())return!1;var e=this.nextOnCircle,t=this.cp.pointOnShape.p,r=e.cp.pointOnShape.p;return t[0]===r[0]&&t[1]===r[1]}},{key:"isThreeProng",value:function(){return 3===this.getNodes().length}}],[{key:"insert",value:function(t,r,n,o,a){var u=new e(o,t,r);"undefined"!=typeof _debug_&&_debug_.generated.elems.cpNode.push(new i.CpNodeForDebugging(_debug_.generated,u));var s=void 0,l=void 0;return a?l=(s=a).next:(s=u,l=u),l.prev=u,s.next=u,u.prev=s,u.next=l,n.insert(u),u}},{key:"advanceNSteps",value:function(e,t){for(var r=0;r<t;r++)e=e.next;return e}}]),e}();u.comparator=function(e,t){return o.ContactPoint.compare(e.cp,t.cp)},r.CpNode=u},{"./contact-point":54,"./debug/cp-node-for-debugging":57}],56:[function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("flo-memoize"),i=e("flo-bezier3"),a=e("flo-vector2d"),u=o.default.m1,s=function(){function e(t,r,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loop=t,this.ps=r,this.prev=n,this.next=o,this.idx=i}return n(e,null,[{key:"getCornerAtEnd",value:function(e){return l(e)}}]),e}();r.Curve=s;var l=u(function(e){var t=[i.tangent(e.ps,1),i.tangent(e.next.ps,0)],r=a.cross(t[0],t[1]);return{tans:t,crossTangents:r,isSharp:r<0,isDull:r>0,isQuiteSharp:r<-.0167,isQuiteDull:r>.0167}})},{"flo-bezier3":3,"flo-memoize":41,"flo-vector2d":50}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.CpNodeForDebugging=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.generated=t,this.cpNode=r}},{}],58:[function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=e("flo-vector2d"),a=e("flo-bezier3"),u=e("../svg/svg"),s=e("./functions/general"),l=e("./functions/two-prong"),c=e("./functions/three-prong"),f=e("./functions/draw-elem/draw-elem"),d=function e(t,r){o(this,e),this.path=t,this.g=r,this.elems={twoProng_regular:[],twoProng_failed:[],twoProng_notAdded:[],twoProng_deleted:[],twoProng_holeClosing:[],looseBoundingBox:[],tightBoundingBox:[],oneProng:[],oneProngAtDullCorner:[],sharpCorner:[],dullCorner:[],minY:[],threeProng:[],boundingHull:[],mat:[],sat:[],cpNode:[],loop:[],loops:[],maxVertex:[],leaves:[],culls:[],intersection:[]},this.timing={simplify:[0,0],holeClosers:[0,0],oneAnd2Prongs:[0,0],threeProngs:[0,0],mats:[0,0],sats:[0,0]}};r.Generated=d;var v=function(){function e(t){o(this,e),this.generated=void 0,this.generatedAll=new Map,this.Bezier3=a,this.Vector2d=i,this.Svg=u,this.directives={stopAfterHoleClosers:!1,stopAfterHoleClosersNum:void 0,stopAfterTwoProngs:!1,stopAfterTwoProngsNum:void 0,stopAfterThreeProngs:!1},this.fs=Object.assign({draw:t},s.generalDebugFunctions,{twoProng:l.twoProngDebugFunctions,threeProng:c.threeProngDebugFunctions,drawElem:f.drawElemFunctions})}return n(e,[{key:"createNewGenerated",value:function(e,t,r){this.generated=new d(t,r),this.generatedAll.set(e,this.generated)}}]),e}();r.MatDebug=v},{"../svg/svg":171,"./functions/draw-elem/draw-elem":62,"./functions/general":79,"./functions/three-prong":80,"./functions/two-prong":81,"flo-bezier3":3,"flo-vector2d":50}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.boundingHull=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"thin5 black nofill";return _debug_.fs.draw.polygon(e,t,r)}},{}],60:[function(e,t,r){"use strict";function n(e,t,r,n){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");return o.setAttributeNS(null,"cx",t[0].toString()),o.setAttributeNS(null,"cy",t[1].toString()),o.setAttributeNS(null,"r",r.toString()+"%"),o.setAttributeNS(null,"class",n),e.appendChild(o),o}Object.defineProperty(r,"__esModule",{value:!0}),r.culls=function(e,t){var r=[],o=!0,i=!1,a=void 0;try{for(var u,s=t[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value.center;r.push(n(e,l,.4,"cyan thin5 nofill"))}}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}return r}},{}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.drawCirclePercent=function(e,t,r,n){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");return o.setAttributeNS(null,"cx",t[0].toString()),o.setAttributeNS(null,"cy",t[1].toString()),o.setAttributeNS(null,"r",r.toString()+"%"),o.setAttributeNS(null,"class",n),e.appendChild(o),o}},{}],62:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./one-prong"),o=e("./two-prong"),i=e("./three-prong"),a=e("./vertex"),u=e("./min-y"),s=e("./bounding-hull"),l=e("./loose-bounding-box"),c=e("./tight-bounding-box"),f=e("./sharp-corner"),d=e("./dull-corner"),v=e("./mat"),p=e("./loop"),g=e("./loops"),h=e("./max-vertex"),y=e("./leaves"),b=e("./culls"),m=e("./intersection"),_=e("./one-prong-at-dull-corner"),w={oneProng:n.oneProng,oneProngAtDullCorner:_.oneProngAtDullCorner,twoProng_regular:o.twoProng,twoProng_failed:o.twoProng,twoProng_notAdded:o.twoProng,twoProng_deleted:o.twoProng,twoProng_holeClosing:o.twoProng,threeProng:i.threeProng,minY:u.minY,boundingHull:s.boundingHull,looseBoundingBox:l.looseBoundingBox,tightBoundingBox:c.tightBoundingBox,sharpCorner:f.sharpCorner,dullCorner:d.dullCorner,vertex:a.vertex,mat:v.mat("mat",!0),sat:v.mat("sat",!0),loop:p.loop,loops:g.loops,maxVertex:h.maxVertex,leaves:y.leaves,culls:b.culls,intersection:m.intersection};r.drawElemFunctions=w},{"./bounding-hull":59,"./culls":60,"./dull-corner":63,"./intersection":64,"./leaves":65,"./loop":66,"./loops":67,"./loose-bounding-box":68,"./mat":69,"./max-vertex":70,"./min-y":71,"./one-prong":73,"./one-prong-at-dull-corner":72,"./sharp-corner":74,"./three-prong":75,"./tight-bounding-box":76,"./two-prong":77,"./vertex":78}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.dullCorner=function(e,t){return _debug_.fs.draw.dot(e,t.p,.05,"orange")}},{}],64:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./draw-circle-percent");r.intersection=function(e,t){return[n.drawCirclePercent(e,t.pos.p,.7,"purple thin2 nofill")]}},{"./draw-circle-percent":61}],65:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./draw-circle-percent");r.leaves=function(e,t){var r=[],o=!0,i=!1,a=void 0;try{for(var u,s=t[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value.cp.circle.center;r.push(n.drawCirclePercent(e,l,.5,"pinker thin5 nofill"))}}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}return r}},{"./draw-circle-percent":61}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loop=function(e,t){return[]}},{}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.loops=function(e,t){return[]}},{}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.looseBoundingBox=function(e,t){return _debug_.fs.draw.rect(e,t,"thin5 brown nofill")}},{}],69:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../../mat/traverse-edges");r.mat=function(e,t){var r="mat"===e?"thin5 purple nofill":"thin10 red nofill";return function(e,i){var a=i.cpNode;if(a){var u=_debug_.fs.draw,s=[];return o.traverseEdges(a,function(o){if(!o.isTerminating())if(t){var i=o.matCurve;if(i){var a=[,,u.line,u.quadBezier,u.bezier];s.push.apply(s,n(a[i.length](e,i,r)))}}else{var l=o.cp.circle.center,c=o.next.cp.circle.center;s.push.apply(s,n(u.line(e,[l,c],r)))}}),s}}}},{"../../../mat/traverse-edges":130}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.maxVertex=function(e,t){var r=_debug_.fs.draw,n=t.cp.circle;return r.circle(e,n,"brown thin10 nofill")}},{}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-bezier3");r.minY=function(e,t){var r=n.evaluate(t.curve.ps,t.t);return _debug_.fs.draw.crossHair(e,r,"red thin10 nofill")}},{"flo-bezier3":3}],72:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../../point-on-shape");r.oneProngAtDullCorner=function(e,t){var r=o.PointOnShape.getOsculatingCircle(Number.POSITIVE_INFINITY,t),i=_debug_.fs.draw.dot(e,t.p,.1,"orange"),a=_debug_.fs.draw.dot(e,r.center,.25,"orange"),u=_debug_.fs.draw.circle(e,r,"orange thin10 nofill");return[].concat(n(i),n(a),n(u))}},{"../../../point-on-shape":133}],73:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../../point-on-shape"),i=e("../../../circle"),a=.5;r.oneProng=function(e,t){var r=_debug_.fs.draw,u=i.Circle.scale(o.PointOnShape.getOsculatingCircle(Number.POSITIVE_INFINITY,t),1),s=r.dot(e,t.p,.1*a,"gray"),l=r.dot(e,u.center,.25*a,"gray"),c=r.circle(e,u,"gray thin10 nofill");return[].concat(n(s),n(l),n(c))}},{"../../../circle":53,"../../../point-on-shape":133}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sharpCorner=function(e,t){return _debug_.fs.draw.dot(e,t.p,.06,"green")}},{}],75:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../../circle"),i=.3;r.threeProng=function(e,t){var r=_debug_.fs.draw,a=o.Circle.scale(t.circle,1),u=t.poss,s=r.dot(e,u[0].p,.1*i,"blue"),l=r.dot(e,u[1].p,.2*i,"blue"),c=r.dot(e,u[2].p,.1*3*i,"blue"),f=r.dot(e,a.center,.3*i,"blue"),d=r.circle(e,a,"blue thin2 nofill");return[].concat(n(f),n(s),n(l),n(c),n(d))}},{"../../../circle":53}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.tightBoundingBox=function(e,t){return _debug_.fs.draw.polygon(e,t,"thin5 black nofill")}},{}],77:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../../mat/get-two-prong-type");r.twoProng=function(e,t){var r=[],i=[],a=[],u=[],s=[],l=void 0,c=void 0,f=_debug_.fs.draw;switch(o.getTwoProngType(t)){case"twoProng_regular":l="red ",c="2";break;case"twoProng_failed":return void(r=f.dot(e,t.pos.p,.3,"black"));case"twoProng_notAdded":l="brown ",c="10";break;case"twoProng_deleted":l="gray ",c="2";break;case"twoProng_holeClosing":l="cyan ",c="10"}return t.failed?r=f.dot(e,t.pos.p,.3,"black"):t.failed||(i=f.dot(e,t.circle.center,.015,"yellow"),a=f.circle(e,t.circle,l+"thin"+c+" nofill"),u=f.dot(e,t.pos.p,.0105,l),s=f.dot(e,t.z,.021,l)),[].concat(n(r),n(i),n(a),n(u),n(s))}},{"../../../mat/get-two-prong-type":122}],78:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.vertex=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments[3],i=r?"":" invisible",a=t.cp.circle,u=_debug_.fs.draw,s=t.getNodes();console.log(s);var l,c=u.circle(e,a,"red thin20 nofill "+i,o),f=u.crossHair(e,a.center,"red thin20 nofill "+i,3,o);l=[].concat(n(c),n(f));for(var d=0;d<s.length;d++){var v,p,g=s[d].next.cp.circle,h=u.circle(e,g,"pink thin20 nofill "+i,o),y=u.crossHair(e,g.center,"pink thin20 nofill "+i,3,o);(v=l).push.apply(v,n(h).concat(n(y)));var b=a.center,m=g.center,_=0===d?"thin10":1===d?"thin20":"thin35",w=u.line(e,[b,m],"yellow "+_+" nofill "+i,o);(p=l).push.apply(p,n(w))}return l}},{}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../point-on-shape"),o=0;function i(e){return e.map(function(e){return n.PointOnShape.toHumanString(e.cp.pointOnShape)})}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return e[0].toFixed(t)+", "+e[1].toFixed(t)}var u={"δToString":i,"δsToString":function(e){return e.map(i)},pointToStr:a,pointsToStr:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return e.map(function(e){return a(e,t)})},nameObj:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.name=""+t+o++}};r.generalDebugFunctions=u},{"../../point-on-shape":133}],80:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d"),o=e("../../circle");var i={drawSpokes:function(e){var t=_debug_.generated.elems.threeProng[e],r=t.generated.g,n=t.circle.center,o=t.poss;_debug_.fs.draw.line(r,[o[0].p,n],"thin5 red"),_debug_.fs.draw.line(r,[o[1].p,n],"thin5 red"),_debug_.fs.draw.line(r,[o[2].p,n],"thin5 red")},traceConvergence:function(e,t){var r=void 0,n=void 0;void 0===e?(r=0,n=_debug_.generated.elems.threeProng.length):(r=e,n=e+1);for(var o=r;o<n;o++){var i=_debug_.generated.elems.threeProng[o],a=i.generated.g;console.log(i);var u=i.candidateThreeProngs,s=void 0,l=void 0;void 0===e||-1===t?(s=i.bestIndx,l=i.bestIndx+1):void 0===t?(s=0,l=u.length):(s=t,l=t+1);for(var c=s;c<l;c++){var f=u[c].circle;i.bestIndx===c?(_debug_.fs.draw.dot(a,f.center,.2,"green"),_debug_.fs.draw.circle(a,f,"black thin10 nofill")):(_debug_.fs.draw.dot(a,f.center,.2,"cyan"),_debug_.fs.draw.circle(a,f,"cyan thin5 nofill"))}}},showBoundary:function(e,t){for(var r=_debug_.generated.elems.threeProng[e],o=r.generated.g,i=r.candidateThreeProngs,a=void 0===t?0:t,u=void 0===t?i.length:t,s=r.cpss,l=0,c=1;c<s.length-1;c++)if(l>=a&&l<=u){for(var f=[s[0],s[c],s[s.length-1]],d=0;d<3;d++){var v=f[d],p=v[0],g=v[1],h=p.cp.pointOnShape,y=g.cp.pointOnShape,b=h.p,m=y.p,_=1+.5*d;n.equal(b,m)?_debug_.fs.draw.crossHair(o,b,"red thin10 nofill",_):(_debug_.fs.draw.crossHair(o,b,"green thin10 nofill",_),_debug_.fs.draw.crossHair(o,m,"blue thin10 nofill",_))}l++}else l++},"logδs":function(e){var t=_debug_.generated.elems.threeProng[e];console.log(t.cpss)},logNearest:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2],!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var t=[];_debug_.generatedAll.forEach(function(r){var o=n.getObjClosestTo(e,r.elems.threeProng,function(e){return e.circle.center});t.push(o)});var r=n.getObjClosestTo(e,t,function(e){return e.circle.center}),i=r.circle,a=r.generated.g;console.log(r);var u=new o.Circle(i.center,i.radius||1),s=_debug_.fs.draw;s.circle(a,u,"green thin10 nofill",1e3);var l=r.boundaries,c=l[0],f=l[l.length-1];s.beziers(a,c,"red thin5 nofill");for(var d=1;d<l.length-1;d++){var v=l[d];s.beziers(a,v,"green thin5 nofill")}s.beziers(a,f,"blue thin5 nofill");var p=r.traces,g=!0,h=!1,y=void 0;try{for(var b,m=p[Symbol.iterator]();!(g=(b=m.next()).done);g=!0){var _=b.value;s.polyline(a,_,"red thin5 nofill")}}catch(e){h=!0,y=e}finally{try{!g&&m.return&&m.return()}finally{if(h)throw y}}}};r.threeProngDebugFunctions=i},{"../../circle":53,"flo-vector2d":50}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../circle"),o=e("flo-vector2d");function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"twoProng_regular";if(void 0!==e){var u=_debug_.generated.elems[i][e],s=u.xs,l=u.generated.g;console.log(u),console.log(u.xs.map(function(e){return{x:e.x,y:e.y,z:e.z,d:e.z?o.squaredDistanceBetween(e.y.p,e.z.p):0,t:e.t}}));for(var c=0;c<s.length;c++)if(!(r&&(c<r[0]||c>=r[1])||t&&c!==s.length-1)){var f=u.xs[c],d=new n.Circle(f.x,o.distanceBetween(f.x,f.y.p));_debug_.fs.draw.crossHair(l,f.x,"red thin10 nofill"),_debug_.fs.draw.circle(l,d,"blue thin10 nofill"),void 0!==f.z&&_debug_.fs.draw.crossHair(l,f.z.p,"yellow thin10 nofill",2)}a.drawNormal(e)}}var a={"logδ":function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"twoProng_regular",r=_debug_.generated.elems[t][e].δ;console.log(r)},log:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"twoProng_regular",r=_debug_.generated.elems[t][e];console.log(r)},drawNormal:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"twoProng_regular",n=_debug_.generated.elems[r];if(void 0===t)for(var o=0;o<n.length;o++)e(o);var i=n[t],a=i.generated.g;i&&_debug_.fs.draw.line(a,[i.pos.p,i.circle.center],"thin10 blue")},"logδBasic":function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"twoProng_regular",r=_debug_.generated.elems[t][e].δ;function n(e){var t=e.cp.pointOnShape;return{bez:t.curve.ps,t:t.t}}console.log(n(r[0])),console.log(n(r[1]))},traceConvergence:i,logNearest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"twoProng_regular",r=[];_debug_.generatedAll.forEach(function(n,i){var a=o.getObjClosestTo(e,n.elems[t],function(e){return e.circle.center});r.push(a)});var a=o.getObjClosestTo(e,r,function(e){return e.circle.center}),u=a.generated.g;console.log(a);var s=a.circle,l=new n.Circle(s.center,s.radius||1);_debug_.fs.draw.circle(u,l,"green thin10 nofill",1e3);for(var c=void 0,f=0;f<_debug_.generated.elems[t].length;f++)if(_debug_.generated.elems[t][f]===a){c=f;break}void 0!==c&&i(c,!0)}};r.twoProngDebugFunctions=a},{"../../circle":53,"flo-vector2d":50}],82:[function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../point-on-shape"),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"cpsSimple",get:function(){return this.cpss.map(function(e){return[o.PointOnShape.toHumanString(e[0].cp.pointOnShape),o.PointOnShape.toHumanString(e[1].cp.pointOnShape)]})}}]),e}();r.ThreeProngForDebugging=i},{"../point-on-shape":133}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TwoProngForDebugging=function e(t,r,n,o,i,a,u,s,l,c,f){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.generated=t,this.bezierPieces=r,this.pos=n,this.δ=o,this.z=i,this.circle=a,this.xs=u,this.failed=s,this.holeClosing=l,this.notAdded=c,this.deleted=f}},{}],84:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var i=e("flo-poly"),a=e("./curve"),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=t,this.curves=[];if(0!==t.length){for(var r=void 0,n=null,o=void 0,i=0;i<t.length;i++)o=new a.Curve(this,t[i],n,null,i),this.curves.push(o),n&&(n.next=o),n=o,0===i&&(r=o);r.prev=o,o.next=r,this.head=r}}return o(e,[{key:"toBeziers",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var o,i=this.curves[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;e.push(a.ps)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}return e}}],[{key:"perturb",value:function(t,r){if(!r)return t;for(var o=2311,a=[],u=0;u<t.items.length;u++){var s=i.default.random.flatCoefficients(6,-1,1,o),l=s.p;o=s.seed;var c=l.map(function(e){return e*r});console.log(c);var f=t.items[u],d=n(f,3),v=n(d[0],2),p=v[0],g=v[1],h=n(d[1],2),y=h[0],b=h[1],m=n(d[2],2),_=m[0],w=m[1],P=[[p+c[0],g+c[1]],[y+c[2],b+c[3]],[_+c[4],w+c[5]],[0,0]];if(0!==u){var x=a[a.length-1];x[3][0]=P[0][0],x[3][1]=P[0][1]}a.push(P)}var I=a[a.length-1];return I[3][0]=a[0][0][0],I[3][1]=a[0][0][1],new e(a)}}]),e}();r.Loop=u},{"./curve":56,"flo-poly":42}],85:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.Mat=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cpNode=t,this.cpTrees=r}},{}],86:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../contact-point"),o=e("../cp-node"),i=e("./get-neighboring-cps");r.addToCpGraph=function(e,t,r,a,u){for(var s=a.map(function(a,s){var l=r.get(a.curve.loop),c=new n.ContactPoint(a,e,t[s],0),f=u?u[s]:i.getNeighbouringPoints(l,a,t[s],0);return o.CpNode.insert(!1,!1,l,c,f[0])}),l=a.length,c=0;c<l;c++){var f=0===c?l-1:c-1,d=c===l-1?0:c+1;s[c].prevOnCircle=s[f],s[c].nextOnCircle=s[d]}}},{"../contact-point":54,"../cp-node":55,"./get-neighboring-cps":121}],87:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-ll-rb-tree"),o=e("../cp-node"),i=e("./traverse-edges");r.createNewCpTree=function(e){var t=new Map;return i.traverseEdges(e,function(e){var r=e.cp.pointOnShape.curve.loop,i=t.get(r);i||(i=new n.default(o.CpNode.comparator,[],!0),t.set(r,i)),i.insert(e)}),t}},{"../cp-node":55,"./traverse-edges":130,"flo-ll-rb-tree":37}],88:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../point-on-shape"),o=e("../add-to-cp-graph"),i=e("../is-another-cp-closeby");r.add1Prong=function(e,t,r){if(n.PointOnShape.isDullCorner(r))"undefined"!=typeof _debug_&&_debug_.generated.elems.oneProngAtDullCorner.push(r);else{var a=n.PointOnShape.getOsculatingCircle(e,r),u=n.PointOnShape.calcOrder(a,r);i.isAnotherCpCloseby(t,r,a,u,0,1e3,"magenta")||(o.addToCpGraph(a,[-.5,.5],t,[r,r]),"undefined"!=typeof _debug_&&_debug_.generated.elems.oneProng.push(r))}}},{"../../point-on-shape":133,"../add-to-cp-graph":86,"../is-another-cp-closeby":123}],89:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../cp-node"),o=e("../../contact-point"),i=e("../../point-on-shape"),a=e("../is-another-cp-closeby"),u=e("../get-neighboring-cps");r.add2Prong=function(e,t,r,s,l,c){var f=i.PointOnShape.calcOrder(t,r),d=i.PointOnShape.calcOrder(t,s),v=r.t,p=void 0;if(0===v&&(v=1,p=r.curve.prev,r=new i.PointOnShape(p,v)),!a.isAnotherCpCloseby(e,r,t,f,0,c,"red")&&!a.isAnotherCpCloseby(e,s,t,d,0,c,"red")){var g=new o.ContactPoint(s,t,d,0),h=s.curve.loop,y=e.get(h),b=u.getNeighbouringPoints(y,s,d,0),m=n.CpNode.insert(l,!1,y,g,b[0]),_=new o.ContactPoint(r,t,f,0),w=r.curve.loop,P=e.get(w),x=u.getNeighbouringPoints(P,r,f,0),I=n.CpNode.insert(l,!1,P,_,x[0]);if(I.prevOnCircle=m,I.nextOnCircle=m,m.prevOnCircle=I,m.nextOnCircle=I,l){var O=new o.ContactPoint(s,t,g.order,1),M=n.CpNode.insert(!0,!1,y,O,m),C=new o.ContactPoint(r,t,_.order,-1),T=n.CpNode.insert(!0,!1,P,C,I.prev);T.prevOnCircle=M,T.nextOnCircle=M,M.prevOnCircle=T,M.nextOnCircle=T,m.next=I,I.prev=m,T.next=M,M.prev=T}return I}"undefined"!=typeof _debug_&&(l?_debug_.generated.elems.twoProng_holeClosing.pop():_debug_.generated.elems.twoProng_regular.pop())}},{"../../contact-point":54,"../../cp-node":55,"../../point-on-shape":133,"../get-neighboring-cps":121,"../is-another-cp-closeby":123}],90:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../add-to-cp-graph"),o=e("../is-another-cp-closeby");r.add3Prong=function(e,t,r){var i=r.circle,a=r.ps,u=r.δ3s;return o.isAnotherCpCloseby(e,a[0],i,t[0],0,1e3,"blue"),o.isAnotherCpCloseby(e,a[1],i,t[1],0,1e3,"blue"),o.isAnotherCpCloseby(e,a[2],i,t[2],0,1e3,"blue"),n.addToCpGraph(i,t,e,a,u),i}},{"../add-to-cp-graph":86,"../is-another-cp-closeby":123}],91:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-bezier3"),o=e("../../point-on-shape");r.addDebugInfo1=function(e){var t;if("undefined"!=typeof _debug_){var r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;_debug_.fs.nameObj(s,"l|")}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}var l=_debug_.generated;l.timing.holeClosers[0]=performance.now(),(t=l.elems.loop).push.apply(t,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e)),l.elems.loops.push(e);var c=function(e){e.curves.forEach(function(e){var t=e.ps,r=n.getBoundingHull(t);l.elems.boundingHull.push(r);var o=n.getBoundingBox(t);l.elems.looseBoundingBox.push(o);var i=n.getBoundingBoxTight(t);l.elems.tightBoundingBox.push(i)})},f=!0,d=!1,v=void 0;try{for(var p,g=e[Symbol.iterator]();!(f=(p=g.next()).done);f=!0)c(p.value)}catch(e){d=!0,v=e}finally{try{!f&&g.return&&g.return()}finally{if(d)throw v}}}},r.addDebugInfo2=function(e){if("undefined"!=typeof _debug_){var t=_debug_.generated,r=t.timing,n=performance.now();r.holeClosers[1]+=n-r.holeClosers[0],r.oneAnd2Prongs[0]=n;var i=!0,a=!1,u=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,f=!0,d=!1,v=void 0;try{for(var p,g=c[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var h=p.value;o.PointOnShape.isSharpCorner(h)?t.elems.sharpCorner.push(h):o.PointOnShape.isDullCorner(h)&&t.elems.dullCorner.push(h)}}catch(e){d=!0,v=e}finally{try{!f&&g.return&&g.return()}finally{if(d)throw v}}}}catch(e){a=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw u}}}},r.addDebugInfo3=function(){if("undefined"!=typeof _debug_){var e=_debug_.generated.timing,t=performance.now();e.oneAnd2Prongs[1]+=t-e.oneAnd2Prongs[0],e.threeProngs[0]=t}},r.addDebugInfo4=function(e){if("undefined"!=typeof _debug_){var t=_debug_.generated,r=t.timing;t.elems.mat.push(e),r.threeProngs[1]+=performance.now()-r.threeProngs[0],r.mats[1]=r.holeClosers[1]+r.oneAnd2Prongs[1]+r.threeProngs[1]}}},{"../../point-on-shape":133,"flo-bezier3":3}],92:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../get-contact-circles-at-interface"),i=e("../get-bezier-curvature-extrema"),a=e("../../point-on-shape");r.createGetInterestingPointsOnLoop=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return function(t){for(var r=[],u=0;u<t.curves.length;u++){var s=t.curves[u],l=i.getBezierCurvatureExtrema(s),c=l.maxCurvaturePoss,f=l.maxNegativeCurvaturePoss;r.push.apply(r,n(o.getContactCirclesAtInterface(s)).concat(n(c),n(f)));for(var d=e+1,v=1;v<d;v++)r.push(new a.PointOnShape(s,v/d))}return r.sort(a.PointOnShape.compare),r}}},{"../../point-on-shape":133,"../get-bezier-curvature-extrema":115,"../get-contact-circles-at-interface":118}],93:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-ll-rb-tree"),o=e("../../circle"),i=e("../../cp-node"),a=e("../../contact-point");r.createInitialCpGraph=function(e,t,r,u){for(var s=void 0,l=0;l<r.length;l++){var c=r[l],f=new n.default(i.CpNode.comparator,[],!0),d=void 0,v=void 0,p=!0,g=!1,h=void 0;try{for(var y,b=c[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var m=y.value,_=m.curve.next.ps,w=!!u.get(_),P=new o.Circle(m.p,0),x=new a.ContactPoint(m,P,-1,0),I=new a.ContactPoint(m,P,1,0);d=i.CpNode.insert(!1,w,f,x,v),v=i.CpNode.insert(!1,w,f,I,d),d.prevOnCircle=v,v.prevOnCircle=d,d.nextOnCircle=v,v.nextOnCircle=d}}catch(e){g=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(g)throw h}}s||(s=d);var O=e[l];t.set(O,f)}return s}},{"../../circle":53,"../../contact-point":54,"../../cp-node":55,"flo-ll-rb-tree":37}],94:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../../debug/two-prong-for-debugging"),o=e("../../get-two-prong-type");r.addDebugInfo=function(e,t,r,i,a,u,s,l){var c=new n.TwoProngForDebugging(_debug_.generated,e,r,u,a?a.p:void 0,i,s,t,l,!1,!1),f=o.getTwoProngType(c);_debug_.generated.elems[f].push(c)}},{"../../../debug/two-prong-for-debugging":83,"../../get-two-prong-type":122}],95:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-bezier3"),o=e("../../geometry/get-closest-square-distance-to-rect");r.cullBezierPieces=function(e,t,r){if(e.length<=5)return e;var i=[],a=!0,u=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value,d=f.curve.ps,v=n.getBoundingBox(d);o.getClosestSquareDistanceToRect(v,t)<=1.001*r&&i.push(f)}}catch(e){u=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(u)throw s}}return i}},{"../../geometry/get-closest-square-distance-to-rect":111,"flo-bezier3":3}],96:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d"),o=e("flo-bezier3"),i=e("../../geometry/line-line-intersection"),a=e("../../get-closest-boundary-point"),u=e("../../../circle"),s=e("../../../point-on-shape"),l=e("../add-1-prong"),c=e("./add-debug-info"),f=e("./cull-bezier-pieces"),d=e("./find-equidistant-point-on-line"),v=e("./get-initial-bezier-pieces");function p(e,t,r,o){var a=Math.pow(1e-4*e,2);if(!(n.squaredDistanceBetween(t,o)<a)){var u=[(t[0]+o[0])/2,(t[1]+o[1])/2],s=[o[0]-t[0],o[1]-t[1]],l=[-s[1],s[0]],c=[u[0]+l[0],u[1]+l[1]],f=i.lineLineIntersection([t,r],[u,c]);if(f){var d=[f[0]-t[0],f[1]-t[1]],v=[r[0]-t[0],r[1]-t[1]];if(!(n.dot(d,v)<0))return f}}}r.find2Prong=function(e,t,r,i,g,h,y){var b=Math.pow(1e-6*t,2),m=Math.pow(1e-4,2),_=.01*b,w=r,P=v.getInitialBezierPieces(h,y,e,i,g),x=P.bezierPieces,I=P.δ,O=void 0,M=void 0,C=void 0;h?(O=[(M=[g.p[0],g.p[1]])[0],M[1]-Math.sqrt(w)],C=w):(M=g.p,O=s.PointOnShape.getOsculatingCircle(w,g).center,C=n.squaredDistanceBetween(M,O));var T=function(e,t,r,i){for(var a=.001*e,u=void 0,s=Number.POSITIVE_INFINITY,l=0;l<t.length;l++){var c=t[l],f=c.curve.ps,d=o.evaluate(f),v=d(c.ts[0]),g=Number.POSITIVE_INFINITY;if(!u||u[0]!==v[0]||u[1]!==v[1]){var h=p(e,r,i,v);h&&(g=n.squaredDistanceBetween(r,h))}var y=Number.POSITIVE_INFINITY,b=d(c.ts[1]),m=p(e,r,i,b);m&&(y=n.squaredDistanceBetween(r,m)),u=b;var _=Math.min(g,y);_<s&&(s=_)}return s+a}(t,x,M,O);C>T&&(O=n.interpolate(M,O,Math.sqrt(T/C)));var S=[],N=void 0,j=0,A=0,z=!1,E=x;do{j++;var B=n.squaredDistanceBetween(O,g.p);if(E=f.cullBezierPieces(E,O,B),void 0===(N=a.getClosestBoundaryPoint(E,O,g.curve,g.t))){if("undefined"!=typeof _debug_){var D=_debug_.generated.elems,F=h?D.twoProng_holeClosing:D.twoProng_regular,L=h?"hole-closing: "+F.length:"regular: "+F.length;console.log("failed: no closest point - "+L)}z=!0;break}"undefined"!=typeof _debug_&&S.push({x:O,y:g,z:N,t:g.t});var Y=n.squaredDistanceBetween(O,N.p);if(1===j&&B<Y+m)return void l.add1Prong(Math.sqrt(w),i,g);if(!h&&n.squaredDistanceBetween(g.p,N.p)<=b){if("undefined"!=typeof _debug_){var R=_debug_.generated.elems,k=h?R.twoProng_holeClosing:R.twoProng_regular;k.length}z=!0;break}var q=d.findEquidistantPointOnLine(O,g.p,N.p),H=n.squaredDistanceBetween(O,q);if(O=q,H<_)A++;else if(25===j){z=!0;break}}while(A<1);var V=void 0;return void 0!==N&&(V=new u.Circle(O,n.distanceBetween(O,N.p))),"undefined"!=typeof _debug_&&(S.push({x:O,y:g,z:N,t:g.t}),c.addDebugInfo(x,z,g,V,N,I,S,h)),z?void 0:{circle:V,z:N}}},{"../../../circle":53,"../../../point-on-shape":133,"../../geometry/line-line-intersection":113,"../../get-closest-boundary-point":117,"../add-1-prong":88,"./add-debug-info":94,"./cull-bezier-pieces":95,"./find-equidistant-point-on-line":97,"./get-initial-bezier-pieces":98,"flo-bezier3":3,"flo-vector2d":50}],97:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findEquidistantPointOnLine=function(e,t,r){var n=Math.abs((e[1]-t[1])/(e[0]-t[0]))>1,o=void 0,i=void 0,a=void 0,u=void 0,s=void 0,l=void 0;n?(o=e[1],i=e[0],a=t[1],u=t[0],s=r[1],l=r[0]):(o=e[0],i=e[1],a=t[0],u=t[1],s=r[0],l=r[1]);var c=(i-u)/(o-a),f=u-c*a,d=(a*a+u*u-s*s-l*l+2*f*(l-u))/(2*(a-s+c*(u-l))),v=c*d+f;return n?[v,d]:[d,v]}},{}],98:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../get-neighboring-cps"),i=e("../../get-boundary-piece-beziers"),a=e("../../../bezier-piece"),u=e("../../../point-on-shape");r.getInitialBezierPieces=function(e,t,r,s,l){var c=void 0,f=void 0;if(e){c=[];for(var d=0;d<t;d++){var v,p=r[d].curves.map(function(e){return new a.BezierPiece(e,[0,1])});(v=c).push.apply(v,n(p))}}else{var g=u.PointOnShape.isDullCorner(l)?1===l.t?-1:1:0,h=r[t],y=o.getNeighbouringPoints(s.get(h),l,g,0)[0];f=[y,y],c=y&&y!==y.next.next?i.getBoundaryPieceBeziers(f):h.curves.map(function(e){return new a.BezierPiece(e,[0,1])})}return{bezierPieces:c,"δ":f}}},{"../../../bezier-piece":51,"../../../point-on-shape":133,"../../get-boundary-piece-beziers":116,"../../get-neighboring-cps":121}],99:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d"),o=e("./get-closest-points");r.calcBetterX=function(e,t,r){var i=n.len(r),a=1,u=void 0,s=void 0,l=void 0,c=void 0,f=0;do{var d=n.scale(r,a);s=n.translate(d,t),l=o.getClosestPoints(s,e);var v=n.circumCenter(l.map(function(e){return e.p})),p=n.fromTo(s,v);u=(c=n.len(p))<i,a/=2,f++}while(!u&&f<3);return{newX:s,newV:c,newPs:l}}},{"./get-closest-points":103,"flo-vector2d":50}],100:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d"),o=e("../../get-closest-boundary-point");r.calcInitial3ProngCenter=function(e,t){var r=e[0][0].cp.circle.center,i=o.getClosestBoundaryPoint(t[1],r,void 0,void 0),a=[e[0][0].cp.pointOnShape.p,i.p,e[2][1].cp.pointOnShape.p];return n.circumCenter(a)}},{"../../get-closest-boundary-point":117,"flo-vector2d":50}],101:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d"),o=e("flo-bezier3"),i=e("../../../circle"),a=e("../../../point-on-shape"),u=e("../../get-closest-boundary-point"),s=e("./calc-initial-3-prong-center"),l=e("./get-closest-points"),c=e("./calc-better-x"),f=e("../../../curve"),d=n.fromTo;r.find3ProngForDelta3s=function(e,t,r,v,p){var g=1e-10*p,h=[e[0],e[t],e[e.length-1]],y=[v[0],v[t],v[e.length-1]],b=[[h[0],h[1],h[2]],[h[1],h[2],h[0]],[h[2],h[0],h[1]]][r],m=[[y[0],y[1],y[2]],[y[1],y[2],y[0]],[y[2],y[0],y[1]]][r];if(!b[0][0].isSharp()){var _=void 0,w=void 0,P=0,x=s.calcInitial3ProngCenter(b,m);if("undefined"!=typeof _debug_){var I=_debug_.generated.elems.threeProng,O=I[I.length-1];O.traces[O.traces.length-1].push(x)}for(var M=Number.POSITIVE_INFINITY;M>g&&P<10;){if(P++,_=l.getClosestPoints(x,m),!Number.isFinite(x[0])||!Number.isFinite(x[1]))return;w=n.circumCenter(_.map(function(e){return e.p}));var C=d(x,w);if(!Number.isFinite(C[0])||!Number.isFinite(C[1]))return;var T=c.calcBetterX(m,x,C);if(x=T.newX,_=T.newPs,"undefined"!=typeof _debug_){var S=_debug_.generated.elems.threeProng,N=S[S.length-1];N.traces[N.traces.length-1].push(x)}var j=n.len(C);M=Math.abs(j-T.newV)}for(var A=(n.distanceBetween(x,_[0].p)+n.distanceBetween(x,_[1].p)+n.distanceBetween(x,_[2].p))/3,z=new i.Circle(x,A),E=0,B=0;B<3;B++){var D=_[B],F=n.toUnitVector(n.fromTo(D.p,x)),L=n.rotate90Degrees(F);if(a.PointOnShape.isDullCorner(D)){var Y=f.Curve.getCornerAtEnd(D.curve).tans.map(n.rotate90Degrees),R=Math.asin(n.cross(Y[0],F)),k=Math.asin(n.cross(F,Y[1])),q=0;R>0&&(q+=R),k>0&&(q+=k),E+=q}else{var H=n.toUnitVector(o.tangent(D.curve.ps,D.t));E+=Math.abs(Math.asin(n.cross(L,H)))}}for(var V=[],X=0;X<v.length;X++){var G=u.getClosestBoundaryPoint(v[X],x,void 0,void 0);V.push(n.distanceBetween(G.p,x))}var Q=Math.min.apply(Math,V);return{ps:_,circle:z,error:1*Math.abs(A-Q)+1*E,"δ3s":b}}}},{"../../../circle":53,"../../../curve":56,"../../../point-on-shape":133,"../../get-closest-boundary-point":117,"./calc-better-x":99,"./calc-initial-3-prong-center":100,"./get-closest-points":103,"flo-bezier3":3,"flo-vector2d":50}],102:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-bezier3"),o=e("../../../debug/three-prong-for-debugging"),i=e("./find-3-prong-for-delta3s"),a=e("../../get-boundary-piece-beziers");r.find3Prong=function(e,t){var r=e.map(a.getBoundaryPieceBeziers);if("undefined"!=typeof _debug_){var u=_debug_.generated.elems.threeProng;u.push(new o.ThreeProngForDebugging);var s=u[u.length-1];s.boundaries=[];var l=!0,c=!1,f=void 0;try{for(var d,v=r[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var p=d.value,g=[];s.boundaries.push(g);var h=!0,y=!1,b=void 0;try{for(var m,_=p[Symbol.iterator]();!(h=(m=_.next()).done);h=!0){var w=m.value,P=n.fromTo(w.curve.ps)(w.ts[0],w.ts[1]);g.push(P)}}catch(e){y=!0,b=e}finally{try{!h&&_.return&&_.return()}finally{if(y)throw b}}}}catch(e){c=!0,f=e}finally{try{!l&&v.return&&v.return()}finally{if(c)throw f}}s.traces=[]}for(var x=[],I=void 0,O=void 0,M=Number.POSITIVE_INFINITY,C=1;C<e.length-1;C++)for(var T=0;T<3;T++){if("undefined"!=typeof _debug_){var S=_debug_.generated.elems.threeProng;S[S.length-1].traces.push([])}var N=i.find3ProngForDelta3s(e,C,T,r,t);if(N){var j=N.circle,A=N.ps,z=N.error,E=N.δ3s;"undefined"!=typeof _debug_&&x.push({circle:j,ps:A}),z<M&&(M=z,O=C-1,I={circle:j,ps:A,"δ3s":E})}}if("undefined"!=typeof _debug_){var B=_debug_.generated.elems.threeProng,D=B[B.length-1];D.generated=_debug_.generated,D.circle=I.circle,D.poss=I.ps,D.cp3ss=I.δ3s,D.cpss=e,D.bestIndx=O,D.candidateThreeProngs=x}return I}},{"../../../debug/three-prong-for-debugging":82,"../../get-boundary-piece-beziers":116,"./find-3-prong-for-delta3s":101,"flo-bezier3":3}],103:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../get-closest-boundary-point");r.getClosestPoints=function(e,t){return t.map(function(t){return n.getClosestBoundaryPoint(t,e,void 0,void 0)})}},{"../../get-closest-boundary-point":117}],104:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./find-and-add-2-prongs");r.findAndAdd2ProngsOnAllPaths=function(e,t,r,o){for(var i=void 0,a=0;a<r.length;a++){var u=r[a];i=n.findAndAdd2Prongs(e,t,a,u,o)}return i}},{"./find-and-add-2-prongs":105}],105:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../svg/svg"),o=e("./find-2-prong/find-2-prong"),i=e("./add-2-prong");r.findAndAdd2Prongs=function(e,t,r,a,u){for(var s=a.length,l=function(e){for(var t=[],r=0;r<e;r++)t.push(r);return t}(s),c=void 0,f=n.getShapeBounds(e),d=Math.pow(f.maxX.p[0]-f.minX.p[0],2)+Math.pow(f.maxY.p[1]-f.minY.p[1],2),v=0;v<s;v++){var p,g=a[l[v]];if(p=o.find2Prong(e,u,d,t,g,!1,r)){var h=p,y=h.circle,b=h.z,m=i.add2Prong(t,y,g,b,!1,u);!c&&m&&(c=m)}}return c}},{"../../svg/svg":171,"./add-2-prong":89,"./find-2-prong/find-2-prong":96}],106:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../point-on-shape"),o=e("./find-3-prong/find-3-prong"),i=e("../find-mat/add-3-prong");function a(e,t,r){function n(t,r){var n=e.get(t);n||(n=new Set,e.set(t,n)),n.add(r)}void 0!==t&&(n(t,r),n(r,t))}function u(e,t,r){var n=void 0,o=(n=e.get(t))&&n.has(r),i=(n=e.get(r))&&n.has(t);return o||i}function s(e){var t=e;if(t===t.next.prevOnCircle)return[t];var r=[];do{r.push(t);var n=t.next.prevOnCircle;t=t=t===n?t.next.next:n}while(t!==e);return r}function l(e,t,r){var n=void 0;do{(n=s(t)).length>2&&c(e,n,r)}while(n.length>2);return n}function c(e,t,r){var a=[],u=!0,s=!1,l=void 0;try{for(var c,f=t[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var d=c.value;a.push([d,d.next])}}catch(e){s=!0,l=e}finally{try{!u&&f.return&&f.return()}finally{if(s)throw l}}for(var v=o.find3Prong(a,r),p=[],g=0;g<3;g++)p.push(n.PointOnShape.calcOrder(v.circle,v.ps[g]));var h=i.add3Prong(e,p,v);"undefined"!=typeof _debug_&&function(e,t){var r=_debug_.generated.elems.threeProng,n=r.length,o=r[n-1];o.visitedCps=t,o.circle=e}(h,t)}r.findAndAddAll3Prongs=function(e,t,r){for(var o=new Map,i=[{fromCpNode:void 0,cpStart:t}];i.length;){var s=i.shift(),c=s.fromCpNode,f=s.cpStart;a(o,c,f);var d=!0,v=!1,p=void 0;try{for(var g,h=f.getNodes()[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var y=g.value;n.PointOnShape.isSharpCorner(y.cp.pointOnShape)||l(e,y,r),u(o,y,y.next)||i.push({fromCpNode:f,cpStart:y.next})}}catch(e){v=!0,p=e}finally{try{!d&&h.return&&h.return()}finally{if(v)throw p}}}}},{"../../point-on-shape":133,"../find-mat/add-3-prong":90,"./find-3-prong/find-3-prong":102}],107:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../svg/svg"),o=e("./find-2-prong/find-2-prong"),i=e("./add-2-prong");r.findAndAddHoleClosing2Prongs=function(e,t,r){for(var a=n.getShapeBounds(e),u=Math.pow(a.maxX.p[0]-a.minX.p[0],2)+Math.pow(a.maxY.p[1]-a.minY.p[1],2),s=e.map(n.getMinYPos),l=1;l<s.length;l++){var c=s[l],f=o.find2Prong(e,r,u,t,c,!0,l);if(!f)throw"unable to find hole-closing 2-prong";if(f){var d=f.circle,v=f.z;i.add2Prong(t,d,c,v,!0,r)}}}},{"../../svg/svg":171,"./add-2-prong":89,"./find-2-prong/find-2-prong":96}],108:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-memoize"),o=e("../../mat"),i=e("../../svg/fs/get-loop-bounds"),a=e("../../svg/fs/simplify-paths/simplify-paths"),u=e("../find-mat/find-and-add-3-prongs"),s=e("../find-mat/create-initial-cp-graph"),l=e("../find-mat/add-debug-info"),c=e("../find-mat/get-potential-2-prongs"),f=e("./create-get-interesting-points-on-loop"),d=e("../find-mat/get-sharp-corners"),v=e("../../svg/fs/get-extreme"),p=e("../smoothen/smoothen"),g=e("./find-and-add-2-prongs-on-all-paths"),h=e("./find-and-add-hole-closing-2-prongs");n.default.m1;function y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=v.getExtreme(e);l.addDebugInfo1(e);var i=f.createGetInterestingPointsOnLoop(r),a=e.map(i),y=c.getPotential2Prongs(a),b=d.getSharpCorners(a),m=new Map,_=s.createInitialCpGraph(e,m,b,t);if(h.findAndAddHoleClosing2Prongs(e,m,n),!("undefined"!=typeof _debug_&&_debug_.directives.stopAfterHoleClosers||(l.addDebugInfo2(a),_=g.findAndAdd2ProngsOnAllPaths(e,m,y,n),"undefined"!=typeof _debug_&&_debug_.directives.stopAfterTwoProngs||(l.addDebugInfo3(),void 0===_||(u.findAndAddAll3Prongs(m,_,n),"undefined"!=typeof _debug_&&_debug_.directives.stopAfterThreeProngs))))){var w=new o.Mat(_,m);return p.smoothen(w.cpNode),l.addDebugInfo4(w),w}}function b(e,t){var r=i.getLoopBounds(e),n=i.getLoopBounds(t);return r.minY.p[1]-n.minY.p[1]}r.findMats=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;"undefined"!=typeof _debug_&&(_debug_.generated.timing.simplify[0]=performance.now());var r=a.simplifyPaths(e),n=r.loopss,o=r.xMap;if("undefined"!=typeof _debug_){var i=_debug_.generated.timing;i.simplify[1]+=performance.now()-i.simplify[0]}var u=[],s=!0,l=!1,c=void 0;try{for(var f,d=n[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var v=f.value;v.sort(b);var p=y(v,o,t);p&&u.push(p)}}catch(e){l=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw c}}return u}},{"../../mat":85,"../../svg/fs/get-extreme":139,"../../svg/fs/get-loop-bounds":140,"../../svg/fs/simplify-paths/simplify-paths":157,"../find-mat/add-debug-info":91,"../find-mat/create-initial-cp-graph":93,"../find-mat/find-and-add-3-prongs":106,"../find-mat/get-potential-2-prongs":109,"../find-mat/get-sharp-corners":110,"../smoothen/smoothen":125,"./create-get-interesting-points-on-loop":92,"./find-and-add-2-prongs-on-all-paths":104,"./find-and-add-hole-closing-2-prongs":107,"flo-memoize":41}],109:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../point-on-shape");r.getPotential2Prongs=function(e){var t=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value,l=[],c=!0,f=!1,d=void 0;try{for(var v,p=s[Symbol.iterator]();!(c=(v=p.next()).done);c=!0){var g=v.value;n.PointOnShape.isQuiteSharpCorner(g)||l.push(g)}}catch(e){f=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(f)throw d}}t.push(l)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return t}},{"../../point-on-shape":133}],110:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../point-on-shape");r.getSharpCorners=function(e){var t=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value,l=[],c=!0,f=!1,d=void 0;try{for(var v,p=s[Symbol.iterator]();!(c=(v=p.next()).done);c=!0){var g=v.value;n.PointOnShape.isQuiteSharpCorner(g)&&l.push(g)}}catch(e){f=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(f)throw d}}t.push(l)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return t}},{"../../point-on-shape":133}],111:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("flo-vector2d");r.getClosestSquareDistanceToRect=function(e,t){var r=n(e,2),i=n(r[0],2),a=i[0],u=i[1],s=n(r[1],2),l=s[0],c=s[1],f=n(t,2),d=f[0],v=f[1];if(d<a){if(v<u)return o.squaredDistanceBetween(e[0],t);if(v>c)return o.squaredDistanceBetween([a,c],t);var p=a-d;return p*p}if(d>l){if(v<u)return o.squaredDistanceBetween([l,u],t);if(v>c)return o.squaredDistanceBetween(e[1],t);var g=d-l;return g*g}if(v<u){var h=u-v;return h*h}if(v>c){var y=v-c;return y*y}return 0}},{"flo-vector2d":50}],112:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d");r.getClosestSquaredDistanceToRotatedRect=function(e,t){var r=[0,1,2,3].map(function(r){return n.squaredDistanceBetweenPointAndLineSegment(t,[e[r],e[(r+1)%4]])}),o=n.squaredDistanceBetween(e[0],e[1]),i=n.squaredDistanceBetween(e[0],e[3]);return r[0]<=i&&r[2]<=i&&r[1]<=o&&r[3]<=o?0:Math.min.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(r))}},{"flo-vector2d":50}],113:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0}),r.lineLineIntersection=function(e,t){var r=n(e,2),o=n(r[0],2),i=o[0],a=o[1],u=n(r[1],2),s=u[0],l=u[1],c=n(t,2),f=n(c[0],2),d=f[0],v=f[1],p=n(c[1],2),g=s-i,h=l-a,y=p[0]-d,b=p[1]-v,m=y*h-b*g;if(0!==m){var _=((v-a)*g-(d-i)*h)/m;return[d+_*y,v+_*b]}}},{}],114:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=1e-6;function i(e){var t=n(e,2),r=t[0],o=t[1];if(!(r<0&&o<0||r>1&&o>1))return r<0&&(r=0),r>1&&(r=1),o<0&&(o=0),o>1&&(o=1),[r,o]}r.calcBezierCurvatureExtremaBrackets=function(e){var t=n(e,4),r=n(t[0],2),a=r[0],u=r[1],s=n(t[1],2),l=s[0],c=s[1],f=n(t[2],2),d=f[0],v=f[1],p=n(t[3],2),g=[],h=l-a,y=c-u,b=d-a,m=v-u,_=p[0]-a,w=p[1]-u,P=h,x=b-h,I=_-b,O=y,M=m-y,C=w-m;Math.abs(P-2*x+I)<o&&Math.abs(O-2*M+C);var T=_-3*b+3*h,S=w-3*m+3*y,N=T*T,j=S*S,A=Math.sqrt(N/j+1),z=1/A,E=void 0,B=h*z-y*(E=0===z?1:T/(S*A)),D=h*E+y*z,F=b*z-m*E,L=b*E+m*z,Y=_*z-w*E;P=B,x=F-B,I=Y-F;var R=3*((O=D)-2*(M=L-D)+(C=_*E+w*z-L)),k=F-2*B;if(0===k){if(0===P)return[]}else{k<0&&(B=-B,F=-F,Y=-Y,P=-P,x=-x,I=-I,k=-k);var q=6*k,H=3*R*P/(q*q),V=3*(M-O)/q,X=H*H-2*V*H+3*R*O/(q*q),G=2*(V-H),Q=function(e,t,r){return function(n){return n.map(function(e,t,r){return function(n){return t/r*(n-e)}}(e,t,r))}}(H,q,R);if(X>0){var U=Math.sqrt(X),Z=-U,K=U;g=[[Number.NEGATIVE_INFINITY,Z],[Z,K],[K,Number.POSITIVE_INFINITY]].map(Q).map(i)}else if(X<0){var W=2*G*G-8*X-3;if(W<0)g=[[0,Math.sqrt(-3*X)]].map(Q).map(i);else{var J=Math.sqrt(5*W),$=(-5*G-J)/10,ee=(-5*G+J)/10;g=[[Number.NEGATIVE_INFINITY,$],[$,Math.min(0,ee)],[Math.max(0,ee),Math.sqrt(-3*X)]].map(Q).map(i)}}}return g}},{}],115:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("flo-poly"),i=e("flo-bezier3"),a=e("../point-on-shape"),u=e("./get-bezier-curvature-extrema-brackets");function s(e,t){var r=n(t,2),a=r[0],u=r[1],s=i.dκMod(e);if(!(s(a)*s(u)>=0))return o.default.brent(s,a,u)}r.getBezierCurvatureExtrema=function(e){for(var t=[],r=[],n=e.ps,o=u.calcBezierCurvatureExtremaBrackets(n),l=i.κ(n),c=o.length,f=0;f<c;f++){var d=o[f];if(d){var v=s(n,d);if(v){var p=-l(v),g=-l(d[0]),h=-l(d[1]);p>g&&p>h?p>0&&t.push(new a.PointOnShape(e,v)):p<=g&&p<=h&&p<0&&r.push(new a.PointOnShape(e,v))}}}return{maxCurvaturePoss:t,maxNegativeCurvaturePoss:r}}},{"../point-on-shape":133,"./get-bezier-curvature-extrema-brackets":114,"flo-bezier3":3,"flo-poly":42}],116:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../bezier-piece"),o=e("../point-on-shape"),i=e("../contact-point");function a(e,t,r,o){var i=t;do{var a=(i=i.next)===r?o:1;e.push(new n.BezierPiece(i,[0,a]))}while(i!==r)}r.getBoundaryPieceBeziers=function(e){var t=e[0],r=e[1],u=[],s=!0;do{if(s){s=!1;var l=t.cp.pointOnShape,c=t.next.cp.pointOnShape;c.curve===l.curve&&o.PointOnShape.isQuiteSharpCorner(l)&&o.PointOnShape.isQuiteSharpCorner(c)||(c.curve===l.curve&&i.ContactPoint.compare(t.next.cp,t.cp)>0?u.push(new n.BezierPiece(l.curve,[l.t,c.t])):(u.push(new n.BezierPiece(l.curve,[l.t,1])),a(u,l.curve,c.curve,c.t))),t=t.next}else s=!0,t=t.prevOnCircle}while(t!==r);return u}},{"../bezier-piece":51,"../contact-point":54,"../point-on-shape":133}],117:[function(e,t,r){"use strict";var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("flo-poly"),i=e("flo-vector2d"),a=e("flo-bezier3"),u=e("../point-on-shape"),s=e("./geometry/get-closest-squared-distance-to-rotated-rect"),l=e("./geometry/get-closest-square-distance-to-rect");function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,1],u=arguments[3],s=arguments[4],l=n(e.ps,4),c=n(l[0],2),f=c[0],d=c[1],v=n(l[1],2),p=v[0],g=v[1],h=n(l[2],2),y=h[0],b=h[1],m=n(l[3],2),_=m[0],w=m[1],P=n(t,2),x=P[0],I=P[1],O=f-x,M=p-x,C=y-x,T=_-x,S=d-I,N=g-I,j=b-I,A=w-I,z=O*O,E=6*O*M,B=6*O*C,D=2*O*T,F=9*M*M,L=18*M*C,Y=6*M*T,R=9*C*C,k=6*C*T,q=S*S,H=6*S*N,V=6*S*j,X=2*S*A,G=9*N*N,Q=18*N*j,U=6*N*A,Z=9*j*j,K=6*j*A,W=[6*(T*T-k+Y-D+R-L+B+F-E+z+(A*A-K+U-X+Z-Q+V+G-H+q)),5*(k-2*Y+3*D-2*R+3*L-4*B-4*F+5*E-6*z+(K-2*U+3*X-2*Z+3*Q-4*V-4*G+5*H-6*q)),4*(Y-3*D+R-3*L+6*B+6*F-10*E+15*z+(U-3*X+Z-3*Q+6*V+6*G-10*H+15*q)),3*(D+L-4*B-4*F+10*E-20*z+(X+Q-4*V-4*G+10*H-20*q)),2*(B+F-5*E+15*z+(V+G-5*H+15*q)),E-6*z+(H-6*q)];e===u&&(W=o.default.deflate(W,s));var J=o.default.allRoots(W,r[0],r[1]),$=!0,ee=!0;(1===s&&e===u.next||e===u&&0===s)&&($=!1),(0===s&&e===u.prev||e===u&&1===s)&&(ee=!1),0===r[0]?$&&J.push(r[0]):1===r[0]?ee&&J.push(r[0]):J.push(r[0]),0===r[1]?$&&J.push(r[1]):1===r[1]?ee&&J.push(r[1]):J.push(r[1]);var te=a.evaluate(e.ps),re=J.map(function(e){return{p:te(e),t:e}});return i.getObjClosestTo(t,re,function(e){return e.p})}r.getClosestBoundaryPoint=function(e,t,r,n){e=function(e,t){if(e.length>0){var r=function(e,t){for(var r=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var o=e[n],u=o.curve.ps,s=a.evaluate(u),l=s(o.ts[0]),c=s(o.ts[1]),f=Math.min(i.squaredDistanceBetween(t,l),i.squaredDistanceBetween(t,c));f<r&&(r=f)}return 1.01*r}(e,t);e=function(e,t,r){for(var n=[],o=0;o<e.length;o++){var i=e[o],u=i.curve.ps,l=a.getBoundingBoxTight(u),c=s.getClosestSquaredDistanceToRotatedRect(l,t);c<=r&&n.push(i)}return n}(e=function(e,t,r){for(var n=[],o=0;o<e.length;o++){var i=e[o],u=i.curve.ps,s=a.getBoundingBox(u),c=l.getClosestSquareDistanceToRect(s,t);c<=r&&n.push(i)}return n}(e,t,r),t,r)}return e}(e,t);for(var o=Number.POSITIVE_INFINITY,f=void 0,d=0;d<e.length;d++){var v=e[d],p=c(v.curve,t,v.ts,r,n);if(void 0!==p){var g=i.distanceBetween(p.p,t),h=v.curve,y=p.t;g<o&&(0===y&&(y=1,h=v.curve.prev),f=new u.PointOnShape(h,y),o=g)}}return f},r.closestPointOnBezier=c},{"../point-on-shape":133,"./geometry/get-closest-square-distance-to-rect":111,"./geometry/get-closest-squared-distance-to-rotated-rect":112,"flo-bezier3":3,"flo-poly":42,"flo-vector2d":50}],118:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../curve"),o=e("../point-on-shape");r.getContactCirclesAtInterface=function(e){var t=n.Curve.getCornerAtEnd(e),r=t.isQuiteSharp,i=(t.isDull,t.isQuiteDull);return r?[new o.PointOnShape(e,1)]:i?[new o.PointOnShape(e,1),new o.PointOnShape(e.next,0)]:[]}},{"../curve":56,"../point-on-shape":133}],119:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getLargestVertex=function(e){return e.reduce(function(e,t){return e.cp.circle.radius>=t.cp.circle.radius?e:t},e[0])}},{}],120:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./traverse-edges");r.getLeaves=function(e){var t=[];return n.traverseEdges(e,function(e,r){r&&t.push(e)},!0),t}},{"./traverse-edges":130}],121:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../cp-node"),o=e("../contact-point");r.getNeighbouringPoints=function(e,t,r,i){var a=e.findBounds(new n.CpNode(new o.ContactPoint(t,void 0,r,i),!1,!1));return a[0]||a[1]?a[0]&&a[1]?[a[0].data,a[1].data]:[e.max(e.root),e.min(e.root)]:[void 0,void 0]}},{"../contact-point":54,"../cp-node":55}],122:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getTwoProngType=function(e){return e.failed?"twoProng_failed":e.notAdded?"twoProng_notAdded":e.deleted?"twoProng_deleted":e.holeClosing?"twoProng_holeClosing":"twoProng_regular"}},{}],123:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d"),o=e("./get-neighboring-cps"),i=.9986295347545738;r.isAnotherCpCloseby=function(e,t,r,a,u,s,l){var c=1e-4*s,f=e.get(t.curve.loop),d=o.getNeighbouringPoints(f,t,a,u);if(!d[0])return!1;var v=!0,p=!1,g=void 0;try{for(var h,y=d[Symbol.iterator]();!(v=(h=y.next()).done);v=!0){var b=h.value,m=b.cp.pointOnShape,_=t.p,w=m.p;if(!(n.distanceBetween(_,w)>c)){var P=n.toUnitVector(n.fromTo(b.cp.pointOnShape.p,b.cp.circle.center)),x=n.toUnitVector(n.fromTo(_,r.center));if(n.dot(P,x)>i)return!0}}}catch(e){p=!0,g=e}finally{try{!v&&y.return&&y.return()}finally{if(p)throw g}}return!1}},{"./get-neighboring-cps":121,"flo-vector2d":50}],124:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d"),o=e("flo-bezier3"),i=e("../../point-on-shape");r.getEdgeDirection=function(e){var t=e.cp.circle.center,r=e,a=e.nextOnCircle,u=r.cp.pointOnShape,s=a.cp.pointOnShape,l=u.p,c=s.p,f=void 0;if(i.PointOnShape.isSharpCorner(u)){var d=void 0,v=void 0;0===u.t?(d=u.curve,v=u.curve.prev):1===u.t&&(d=u.curve.next,v=u.curve);var p=o.tangent(d.ps)(0),g=n.reverse(o.tangent(v.ps)(1)),h=n.dot(p,g),y=Math.sqrt((1+h)/2),b=Math.sqrt((1-h)/2);f=n.rotate(b,y,g)}else f=l[0]===c[0]&&l[1]===c[1]?n.fromTo(l,t):n.rotate90Degrees(n.fromTo(l,c));return[t,n.translate(n.toUnitVector(f),t)]}},{"../../point-on-shape":133,"flo-bezier3":3,"flo-vector2d":50}],125:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d"),o=e("../geometry/line-line-intersection"),i=e("../traverse-edges"),a=e("./get-edge-direction"),u=.01,s=1e-4;r.smoothen=function(e){i.traverseEdges(e,function(e){var t=e.cp.circle.center,r=a.getEdgeDirection(e),i=e.next.cp.circle.center,l=a.getEdgeDirection(e.next.prevOnCircle),c=o.lineLineIntersection(r,l),f=n.fromTo(t,i),d=void 0;if(c){var v=n.fromTo(t,c),p=n.fromTo(i,c);d=n.dot(v,f)<0||n.dot(p,f)>0}else d=!0;if(!d)return e.matCurve=[t,c,i],void(e.next.prevOnCircle.matCurve=[i,c,t]);var g=n.rotate90Degrees(f),h=n.fromTo(r[0],r[1]),y=n.fromTo(l[0],l[1]),b=Math.abs(n.cross(f,h))/9,m=Math.abs(n.cross(f,y))/9;if(b>u||m>u)return e.matCurve=[t,i],void(e.next.prevOnCircle.matCurve=[i,t]);if(b>s||m>s){var _=n.interpolate(t,i,1/3),w=n.interpolate(t,i,2/3),P=n.translate(g,_),x=n.translate(g,w),I=[_,P],O=[w,x],M=o.lineLineIntersection(r,I),C=o.lineLineIntersection(l,O);return e.matCurve=[t,M,C,i],void(e.next.prevOnCircle.matCurve=[i,C,M,t])}e.matCurve=[t,i],e.next.prevOnCircle.matCurve=[i,t]})}},{"../geometry/line-line-intersection":113,"../traverse-edges":130,"./get-edge-direction":124,"flo-vector2d":50}],126:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.addDebugInfo=function(e){if("undefined"!=typeof _debug_){var t=_debug_.generated;t.elems.sat.push(e);var r=t.timing;r.sats[1]+=performance.now()-r.sats[0]}}},{}],127:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../get-leaves");r.cullNonCycles=function(e){for(var t=e,r=n.getLeaves(e);r.length;){var o=r.pop();if(!o.isHoleClosing&&!o.isIntersection)for(var i=o.next;;){var a=!1,u=(i=i.next).prevOnCircle;if(i.isThreeProng()){var s=u.prevOnCircle;e===i||e===u||e===s?a=!0:i.next===s?i=s:s.next!==u&&(a=!0)}else if(i.isTerminating()&&!i.isIntersection)return void(t=i);if(a){u.next=i,i.prev=u,t=i;break}}}return t}},{"../get-leaves":120}],128:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../get-leaves");r.cull=function(e,t){for(var r=n.getLeaves(t);r.length;){var o=r.pop();if(!o.isHoleClosing&&!o.isIntersection&&e.has(o.cp.circle))for(var i=o.next;;){var a=!1,u=(i=i.next).prevOnCircle;if(e.has(i.cp.circle)){if(i.isThreeProng()){var s=u.prevOnCircle;t===i||t===u||t===s?a=!0:i.next===s?i=s:s.next!==u&&(a=!0)}}else a=!0;if(a){u.next=i,i.prev=u;break}}}}},{"../get-leaves":120}],129:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-bezier3"),o=e("../../mat"),i=e("../traverse-edges"),a=e("../traverse-vertices"),u=e("../smoothen/smoothen"),s=e("../get-largest-vertex"),l=e("./cull"),c=e("../create-new-cp-tree"),f=e("./add-debug-info"),d=e("../get-leaves");r.toScaleAxis=function(e,t){if("undefined"!=typeof _debug_){_debug_.generated.timing.sats[0]=performance.now();var r=d.getLeaves(e.cpNode);_debug_.generated.elems.leaves.push(r)}var v=s.getLargestVertex(a.traverseVertices(e.cpNode.clone()));"undefined"!=typeof _debug_&&_debug_.generated.elems.maxVertex.push(v);var p=new Set,g=new Map;i.traverseEdges(v,function(e){var r=g.get(e)||t*e.cp.circle.radius,o=e.next,i=n.len([0,1],e.matCurve);if(r-i>t*o.cp.circle.radius){var a=!0,u=!1,s=void 0;try{for(var l,c=o.getNodes()[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;g.set(f,r-i)}}catch(e){u=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(u)throw s}}p.add(o.cp.circle)}}),l.cull(p,v),"undefined"!=typeof _debug_&&_debug_.generated.elems.culls.push(Array.from(p)),u.smoothen(v);var h=new o.Mat(v,c.createNewCpTree(v));return f.addDebugInfo(h),h}},{"../../mat":85,"../create-new-cp-tree":87,"../get-largest-vertex":119,"../get-leaves":120,"../smoothen/smoothen":125,"../traverse-edges":130,"../traverse-vertices":131,"./add-debug-info":126,"./cull":128,"flo-bezier3":3}],130:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.traverseEdges=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.getNodes();n.length;){for(var o=n.pop();!o.isTerminating();)t(o,!1),(o=o.next).isThreeProng()&&n.push(o.nextOnCircle);r&&t(o,!0)}}},{}],131:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.traverseVertices=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return!0},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];if(t(e)&&(n.push(e),r))return n;for(var o=e.getNodes();o.length;)for(var i=o.pop();!i.isTerminating();){if(t(i=i.next)&&(n.push(i),r))return n;i.isThreeProng()&&o.push(i.nextOnCircle)}return n}},{}],132:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../mat"),o=e("./smoothen/smoothen"),i=e("./create-new-cp-tree"),a=e("./to-scale-axis/cull-non-cycles");r.trimMat=function(e){var t=a.cullNonCycles(e.cpNode.clone());if(t)return o.smoothen(t),new n.Mat(t,i.createNewCpTree(t))}},{"../mat":85,"./create-new-cp-tree":87,"./smoothen/smoothen":125,"./to-scale-axis/cull-non-cycles":127}],133:[function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("flo-vector2d"),i=e("flo-memoize"),a=e("flo-bezier3"),u=e("./curve"),s=e("./circle"),l=i.default.m1,c=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.p_=void 0,this.curve=t,this.t=r}return n(e,[{key:"p",get:function(){return void 0===this.p_?this.p_=a.evaluate(this.curve.ps,this.t):this.p_}}],[{key:"getOsculatingCircle",value:function(t,r){if(e.isSharpCorner(r))return new s.Circle(r.p,0);var n=e.calcOsculatingCircleRadius(r);n<0&&(n=Number.POSITIVE_INFINITY),n=Math.min(n,t);var o=r.curve.ps,i=r.t,u=a.normal(o,i),l=a.evaluate(o,i),c=[l[0]+u[0]*n,l[1]+u[1]*n];return new s.Circle(c,n)}},{key:"calcOrder",value:function(t,r){if(!e.isDullCorner(r))return 0;var n=e.getCorner(r),i=o.rotateNeg90Degrees(n.tans[0]),a=o.toUnitVector(o.fromTo(r.p,t.center));return-o.dot(i,a)}}]),e}();c.calcOsculatingCircleRadius=l(function(e){var t=e.curve.ps,r=e.t;return 1/-a.κ(t,r)}),c.compare=function(e,t){if(void 0!==e&&void 0!==t){var r=void 0;return 0!==(r=e.curve.idx-t.curve.idx)?r:r=e.t-t.t}},c.compareInclOrder=function(e,t,r,n){var o=c.compare(e,t);if(void 0!==o)return 0!==o?o:o=r-n},c.getCorner=l(function(e){if(0===e.t||1===e.t)return u.Curve.getCornerAtEnd(1===e.t?e.curve:e.curve.prev)}),c.isSharpCorner=l(function(e){var t=c.getCorner(e);return t&&t.isSharp}),c.isDullCorner=l(function(e){var t=c.getCorner(e);return t&&t.isDull}),c.isQuiteSharpCorner=l(function(e){var t=c.getCorner(e);return t&&t.isQuiteSharp}),c.isQuiteDullCorner=l(function(e){var t=c.getCorner(e);return t&&t.isQuiteDull}),c.toHumanString=function(e){return e.p[0]+", "+e.p[1]+" | bz: "+e.curve.idx+" | t: "+e.t},r.PointOnShape=c},{"./circle":53,"./curve":56,"flo-bezier3":3,"flo-memoize":41,"flo-vector2d":50}],134:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.beziersToSvgPathStr=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="",n=0;n<e.length;n++){var o=e[n];0===n&&(r="M "+o[0][0].toFixed(t)+" "+o[0][1].toFixed(t)+"\n"),r+="C "+o[1][0].toFixed(t)+" "+o[1][1].toFixed(t)+" "+o[2][0].toFixed(t)+" "+o[2][1].toFixed(t)+" "+o[3][0].toFixed(t)+" "+o[3][1].toFixed(t)+" \n"}return r+" z\n"}},{}],135:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=.55191502449;r.circleToCubicBeziers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],t=arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e[0],i=e[1],a=t*n,u=[[[o,i+t],[o+a,i+t],[o+t,i+a],[o+t,i]],[[o+t,i],[o+t,i-a],[o+a,i-t],[o,i-t]],[[o,i-t],[o-a,i-t],[o-t,i-a],[o-t,i]],[[o-t,i],[o-t,i+a],[o-a,i+t],[o,i+t]]];return r?u.map(function(e){return e.slice().reverse()}).slice().reverse():u}},{}],136:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d");r.dePathologify=function(e,t){var r=t/1e4,o=[[0,n.manhattanDistanceBetween(e[0],e[1]),n.manhattanDistanceBetween(e[0],e[2]),n.manhattanDistanceBetween(e[0],e[3])],[n.manhattanDistanceBetween(e[1],e[0]),0,n.manhattanDistanceBetween(e[1],e[2]),n.manhattanDistanceBetween(e[1],e[3])],[n.manhattanDistanceBetween(e[2],e[0]),n.manhattanDistanceBetween(e[2],e[1]),0,n.manhattanDistanceBetween(e[2],e[3])],[n.manhattanDistanceBetween(e[3],e[0]),n.manhattanDistanceBetween(e[3],e[1]),n.manhattanDistanceBetween(e[3],e[2]),0]],i=e;return(o[0][1]<r&&o[1][2]<r||o[1][2]<r&&o[2][3]<r)&&(i=[e[0],n.interpolate(e[0],e[3],1/3),n.interpolate(e[0],e[3],2/3),e[3]]),o[0][1]<r&&(i[1]=n.interpolate(e[0],e[2],.02)),o[2][3]<r&&(i[2]=n.interpolate(e[1],e[3],.98)),o[1][2]<r&&(i[1]=n.interpolate(e[0],e[1],.98),i[2]=n.interpolate(e[2],e[3],.02)),i}},{"flo-vector2d":50}],137:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../fs/push-bezier"),o=e("../path-state"),i=e("../path-segment/z"),a=e("../path-segment/c"),u=e("../path-segment/s"),s=e("../path-segment/l"),l=e("../path-segment/h"),c=e("../path-segment/v"),f=e("../path-segment/q"),d=e("../path-segment/t"),v={a:e("../path-segment/a").a,c:a.c,h:l.h,l:s.l,q:f.q,s:u.s,t:d.t,v:c.v,z:i.z};r.getBeziersFromRawPaths=function(e){if(0===e.length)return[];if("m"!==e[0].type.toLowerCase())throw new Error("Invalid SVG - every new path must start with an M or m.");for(var t=new o.PathState,r=[],a=[],u=Number.NEGATIVE_INFINITY,s=0;s<e.length;s++)for(var l=e[s],c=0;c<l.values.length;c++){var f=l.values[c];u<f&&(u=f)}for(var d=void 0,p=void 0,g=0;g<e.length;g++){p=d;var h=e[g];if(d=h.type.toLowerCase(),t.vals=h.values,h.type===h.type.toLowerCase())if("v"===d)t.vals[0]+=t.p[1];else if("a"===d)t.vals[5]+=t.p[0],t.vals[6]+=t.p[1];else for(var y=0;y<t.vals.length;y++)t.vals[y]+=t.p[y%2];if("m"!==d){var b=v[d];if(!b)throw new Error("Invalid SVG - command not recognized.");var m=b(t);t.p=m[3],n.pushBezier(a,m,t,u)}else a.length&&("z"!==p&&n.pushBezier(a,i.z(t),t,u),r.push(a),a=[]),t.initialPoint=t.p=t.vals}return a.length&&("z"!==p&&n.pushBezier(a,i.z(t),t,u),r.push(a)),r}},{"../fs/push-bezier":147,"../path-segment/a":161,"../path-segment/c":162,"../path-segment/h":163,"../path-segment/l":164,"../path-segment/q":165,"../path-segment/s":166,"../path-segment/t":167,"../path-segment/v":168,"../path-segment/z":169,"../path-state":170}],138:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-bezier3"),o=e("flo-vector2d");r.getCurvatureAtInterface=function(e){var t=[e.ps,e.next.ps],r=[n.tangent(t[0])(1),n.tangent(t[0])(0)],i=o.dot(r[0],r[1]),a=o.cross(r[0],r[1]),u=(s=i,s>1?0:s<-1?Math.PI:Math.acos(s));var s;return a>=0?u:-u}},{"flo-bezier3":3,"flo-vector2d":50}],139:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./get-shape-bounds");r.getExtreme=function(e){var t=n.getShapeBounds(e);return Math.max(Math.abs(t.minX.p[0]),Math.abs(t.minY.p[1]),Math.abs(t.maxX.p[0]),Math.abs(t.maxY.p[1]))}},{"./get-shape-bounds":144}],140:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-memoize"),o=e("flo-bezier3"),i=e("../../point-on-shape"),a=n.default.m1,u=Number.POSITIVE_INFINITY,s=a(function(e){var t=[[{bezier:void 0,t:void 0,val:u},{bezier:void 0,t:void 0,val:u}],[{bezier:void 0,t:void 0,val:-u},{bezier:void 0,t:void 0,val:-u}]];return e.curves.forEach(function(e){for(var r=e.ps,n=o.getBounds(r),i=0;i<2;i++)for(var a=0;a<2;a++){var u=n.box[i][a],s=0===i?-1:1,l=t[i][a].val;(s*u>s*l||u===l&&n.ts[i][a]>t[i][a].t)&&(t[i][a]={bezier:e,t:n.ts[i][a],val:u})}}),{minX:new i.PointOnShape(t[0][0].bezier,t[0][0].t),minY:new i.PointOnShape(t[0][1].bezier,t[0][1].t),maxX:new i.PointOnShape(t[1][0].bezier,t[1][0].t),maxY:new i.PointOnShape(t[1][1].bezier,t[1][1].t)}});r.getLoopBounds=s},{"../../point-on-shape":133,"flo-bezier3":3,"flo-memoize":41}],141:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./get-loop-bounds");r.getMinYPos=function(e){var t=n.getLoopBounds(e).minY;return"undefined"!=typeof _debug_&&_debug_.generated.elems.minY.push(t),t}},{"./get-loop-bounds":140}],142:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./get-beziers-from-raw-paths"),o=e("../../loop"),i=e("../path-data-polyfill/parse-path-data-string");r.getPathsFromStr=function(e){return n.getBeziersFromRawPaths(i.parsePathDataString(e)).map(function(e){return new o.Loop(e)})}},{"../../loop":84,"../path-data-polyfill/parse-path-data-string":159,"./get-beziers-from-raw-paths":137}],143:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./get-paths-from-str");r.getPathsFromSvgPathElem=function(e){return n.getPathsFromStr(e.getAttribute("d"))}},{"./get-paths-from-str":142}],144:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-memoize"),o=e("./get-loop-bounds"),i=n.default.m1,a=i(function(e){var t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=void 0,u=void 0,s=void 0,l=void 0,c=!0,f=!1,d=void 0;try{for(var v,p=e[Symbol.iterator]();!(c=(v=p.next()).done);c=!0){var g=v.value,h=o.getLoopBounds(g);h.minX.p[0]<t&&(a=h.minX,t=h.minX.p[0]),h.maxX.p[0]>r&&(u=h.maxX,r=h.maxX.p[0]),h.minY.p[1]<n&&(s=h.minY,n=h.minY.p[1]),h.maxY.p[1]>i&&(l=h.maxY,i=h.maxY.p[1])}}catch(e){f=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(f)throw d}}return{minX:a,minY:s,maxX:u,maxY:l}});r.getShapeBounds=a;var u=i(function(e){var t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,i=void 0,u=void 0,s=void 0,l=void 0,c=!0,f=!1,d=void 0;try{for(var v,p=e[Symbol.iterator]();!(c=(v=p.next()).done);c=!0){var g=v.value,h=a(g);h.minX.p[0]<t&&(i=h.minX,t=h.minX.p[0]),h.maxX.p[0]>r&&(u=h.maxX,r=h.maxX.p[0]),h.minY.p[1]<n&&(s=h.minY,n=h.minY.p[1]),h.maxY.p[1]>o&&(l=h.maxY,o=h.maxY.p[1])}}catch(e){f=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(f)throw d}}return{minX:i,minY:s,maxX:u,maxY:l}});r.getShapesBounds=u},{"./get-loop-bounds":140,"flo-memoize":41}],145:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-vector2d"),o=1e-6;r.isAlmostZeroLength=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,r=1;r<e.length;r++){var i=e[r-1],a=e[r];if(n.manhattanDistanceBetween(i,a)>t)return!1}return!0}},{"flo-vector2d":50}],146:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-bezier3"),o=e("flo-memoize"),i=e("flo-vector2d"),a=e("./get-loop-bounds"),u=(0,o.default.m1)(function(e){var t=a.getLoopBounds(e).minX,r=t.t,o=void 0;0===r?(o=t.curve.prev,r=1):o=t.curve;var u=o.ps,s=n.tangent(u)(r);if(1!==r)return s[1]<0;var l=o.next.ps,c=n.tangent(l)(0);return s[1]*c[1]>0?s[1]<0:i.cross(s,c)>0});r.isPathPositivelyOrientated=u},{"./get-loop-bounds":140,"flo-bezier3":3,"flo-memoize":41,"flo-vector2d":50}],147:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./de-pathologify"),o=e("./is-almost-zero-length"),i=1e4;r.pushBezier=function(e,t,r,a){if(o.isAlmostZeroLength(t,a/i)){var u=e.length;0===u?r.initialPoint=t[3]:e[u-1][3]=t[3]}else{var s=n.dePathologify(t,a);e.push(s)}}},{"./de-pathologify":136,"./is-almost-zero-length":145}],148:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-bezier3"),o=e("./get-next-x");function i(e,t,r){t&&!t.isDummy&&((e?t:t.opposite).outPs=r,t=void 0)}r.completeLoop=function(e,t,r,a,u){for(var s=[],l=0===a.windingNum&&-1===a.orientation||0!==a.windingNum&&1===a.orientation,c=l?u.pos:u.opposite.pos,f=c.curve,d=c.t,v=f,p=d,g=u.isDummy?void 0:l?u.opposite:u,h=!0;;){var y=e.get(v),b=y?o.getNextX(y,p,!l,h):void 0;if(b){if(h=!0,p!==b.pos.t){var m=l?n.reverse(n.fromTo(v.ps)(b.pos.t,p)):n.fromTo(v.ps)(p,b.pos.t);s.push(m),i(l,g,m),g=b}v=b.opposite.pos.curve,p=b.opposite.pos.t;var _=l?b.opposite:b;_.loopTree=a,t.has(_.opposite)||r.push(_.opposite),t.add(_)}else{if(h=!1,p!==(l?0:1)){var w=l?n.reverse(n.fromTo(v.ps)(0,p)):n.fromTo(v.ps)(p,1);s.push(w),i(l,g,w),g=void 0}v=l?v.prev:v.next,p=l?1:0}if(v===f&&p===d)break}return s}},{"./get-next-x":153,"flo-bezier3":3}],149:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../../loop"),o=e("./complete-loop"),i=e("./get-initial-x"),a=e("./get-loop-metrics");r.completePath=function(e,t,r,u){var s=i.getInitialX(e,r,u),l=s.pos.curve,c=e.get(l)||[];0===c.length&&e.set(l,c),c.push(s);for(var f=[s],d=new Set;f.length;){var v=f.pop();if(t.add(v.pos.curve.loop),!d.has(v)){var p=a.getLoopMetrics(v);p.beziers=o.completeLoop(e,d,f,p,v),p.loop=new n.Loop(p.beziers)}}}},{"../../../loop":84,"./complete-loop":148,"./get-initial-x":150,"./get-loop-metrics":152}],150:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../../point-on-shape"),o=e("../../fs/is-path-positively-oriented"),i=e("../get-loop-bounds"),a=e("../../../x");r.getInitialX=function(e,t,r){var u={parent:t,children:new Set,beziers:[],loop:void 0,orientation:o.isPathPositivelyOrientated(r)?-1:1,windingNum:t.windingNum},s=i.getLoopBounds(r).minX;e.get(s.curve)||(s=new n.PointOnShape(s.curve,0));var l=new a.X(s,!0,void 0,u);return l.opposite=l,l}},{"../../../point-on-shape":133,"../../../x":172,"../../fs/is-path-positively-oriented":146,"../get-loop-bounds":140}],151:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-bezier3"),o=e("../../../x"),i=e("../../../point-on-shape"),a=e("./pair-set"),u=e("../../../bounding-box/find-bb-intersections"),s=1e-10;function l(e,t,r){var n=t.slice();if((!(Math.abs(r[0])<s&&Math.abs(r[1]-1)<s||Math.abs(r[0]-1)<s&&Math.abs(r[1])<s||Math.abs(r[0])<s&&Math.abs(r[1])<s||Math.abs(r[0]-1)<s&&Math.abs(r[1]-1)<s)||n[0].next!==n[1]&&n[1].next!==n[0])&&!(Math.abs(r[0]-1)<s&&(n[0]=n[0].next,r[0]=0,a.pairSet_has(e,[n[0],n[1]]))||Math.abs(r[1]-1)<s&&(n[1]=n[1].next,r[1]=0,a.pairSet_has(e,[n[0],n[1]]))))return n}r.getIntersections=function(e){for(var t=function(e){var t=new Map,r=[],o=function(e){e.curves.forEach(function(o){var i=n.getBoundingBox(o.ps);r.push(i),t.set(i,{box:i,loop:e,curve:o})})},i=!0,a=!1,u=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;o(c)}}catch(e){a=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw u}}return{boxes:r,boxInfoMap:t}}(e),r=t.boxes,s=t.boxInfoMap,c=u.default(r),f=new Map,d=new Map,v=0;v<c.length;v++){var p=c[v],g=p.box1,h=p.box2,y=[s.get(g).curve,s.get(h).curve];if(!a.pairSet_has(d,y)){a.pairSet_add(d,y);var b=y.map(function(e){return e.ps}),m=n.bezier3Intersection(b[0],b[1]);if(m.length){var _=!0,w=!1,P=void 0;try{for(var x,I=m[Symbol.iterator]();!(_=(x=I.next()).done);_=!0){var O=x.value,M=l(d,y,O);if(void 0!==M){for(var C=[],T=[0,1],S=0;S<T.length;S++){var N=T[S],j=M[N],A=new o.X(new i.PointOnShape(j,O[N])),z=f.get(j)||[];z.length||f.set(j,z),z.push(A),C.push(A)}C[0].opposite=C[1],C[1].opposite=C[0]}}}catch(e){w=!0,P=e}finally{try{!_&&I.return&&I.return()}finally{if(w)throw P}}}}}return f}},{"../../../bounding-box/find-bb-intersections":52,"../../../point-on-shape":133,"../../../x":172,"./pair-set":156,"flo-bezier3":3}],152:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("flo-bezier3"),o=e("flo-vector2d");r.getLoopMetrics=function(e){var t=e.opposite.loopTree,r=t.orientation,i=t.windingNum,a=e.opposite.pos.curve.ps,u=e.pos.curve.ps,s=void 0,l=void 0,c=void 0;if(a!==u){var f=n.tangent(a,e.opposite.pos.t),d=n.tangent(u,e.pos.t),v=o.cross(f,d)>0,p=v&&1===r||!v&&-1===r;s=p?-1*r:1*r,l=i+(p?-2*r:r),c=p?t.parent:t}else l=i+(s=1===r?-1:1),c=t.parent;var g={parent:c,children:new Set,beziers:void 0,loop:void 0,orientation:s,windingNum:l};return c.children.add(g),g}},{"flo-bezier3":3,"flo-vector2d":50}],153:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getNextX=function(e,t,r,n){for(var o=void 0,i=Number.POSITIVE_INFINITY,a=0;a<e.length;a++){var u=e[a],s=u.pos.t,l=r?s-t:t-s;(l>0||0===l&&!n)&&l<i&&(o=u,i=l)}return o},r.getThisX=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.pos.t-t==0)return n}}},{}],154:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./is-loop-in-loop");r.getTightestContainingLoop=function(e,t){for(var r=void 0,o=[e];o.length;)i(o.pop());return r;function i(i){if(i===e||n.isLoopInLoop([t,i.loop])){r=i;var a=!0,u=!1,s=void 0;try{for(var l,c=i.children[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var f=l.value;o.push(f)}}catch(e){u=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(u)throw s}}}}}},{"./is-loop-in-loop":155}],155:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(r,"__esModule",{value:!0});var i=e("flo-poly"),a=e("flo-bezier3"),u=e("../../../point-on-shape"),s=e("../get-loop-bounds"),l=1e-6;r.isLoopInLoop=function(e){var t=0,r=1231;do{t++;var c=i.default.random.flatCoefficients(1,0,1,r),f=c.p[0];r=c.seed;var d=e[0].curves.length,v=i.default.random.flatCoefficients(1,0,d,r),p=Math.floor(v.p[0]);r=v.seed;var g=e[0].curves[p].ps,h=y(e,a.evaluate(g,f));if(void 0!==h)return h}while(t<10);return;function y(e,t){if(function(e){var t=e.map(s.getLoopBounds).map(function(e){return{minX:e.minX.p[0],maxX:e.maxX.p[0],minY:e.minY.p[1],maxY:e.maxY.p[1]}});return t[0].minX<t[1].minX||t[0].maxX>t[1].maxX||t[0].minY<t[1].minY||t[0].maxY>t[1].maxY}(e))return!1;var r=function(e,t,r){for(var s=o(t,2),c=s[0],f=s[1],d=e.curves,v=[],p=function(e){var n=d[e],s=n.ps,p=a.getBoundingBox(s),g=o(p,2),h=o(g[0],2),y=h[0],b=h[1],m=o(g[1],2),_=m[0],w=m[1],P=("left"===r||"right"===r)&&(b>f||w<f)||("up"===r||"down"===r)&&(y>c||_<c);if(P=P||"left"===r&&y>c||"right"===r&&_<c||"down"===r&&b>f||"up"===r&&w<f)return"continue";var x=[],I=void 0,O=void 0,M=void 0,C="left"===r||"up"===r;"left"===r||"right"===r?(I=a.getY,O=[0,-f],M=0):(I=a.getX,O=[-c,0],M=1);for(var T=a.translate(O,s),S=I(T),N=a.evaluate(T),j=i.default.allRoots(S,0-l,1+l),A=0;A<j.length;A++){var z=j[A];if(Math.abs(z)<l||Math.abs(z-1)<l)return{v:void 0};var E=N(z);(C&&t[M]>=E[M]||!C&&t[M]<=E[M])&&x.push(z)}if(1===x.length||3===x.length){var B=!0,D=!1,F=void 0;try{for(var L,Y=x[Symbol.iterator]();!(B=(L=Y.next()).done);B=!0){var R=L.value,k=a.tangent(s,R);if(("left"===r||"right"===r)&&Math.abs(k[1])<l||("down"===r||"up"===r)&&Math.abs(k[0])<l)return{v:void 0}}}catch(e){D=!0,F=e}finally{try{!B&&Y.return&&Y.return()}finally{if(D)throw F}}}v.push.apply(v,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(x.map(function(e){return new u.PointOnShape(n,e)})))},g=0;g<d.length;g++){var h=p(g);switch(h){case"continue":continue;default:if("object"===(void 0===h?"undefined":n(h)))return h.v}}return v}(e[1],t,"left");return r?r.length%2!=0:void 0}}},{"../../../point-on-shape":133,"../get-loop-bounds":140,"flo-bezier3":3,"flo-poly":42}],156:[function(e,t,r){"use strict";function n(e,t){function r(t,r){var n=e.get(t);n||(n=new Set,e.set(t,n)),n.add(r)}o(e,t)||(r(t[0],t[1]),r(t[1],t[0]))}function o(e,t){var r=void 0,n=(r=e.get(t[0]))&&r.has(t[1]),o=(r=e.get(t[1]))&&r.has(t[0]);return n||o}Object.defineProperty(r,"__esModule",{value:!0}),r.pairSet_add=n,r.pairSet_has=o,r.pairSet_asArray=function(e){var t=[],r=new Map,i=!0,a=!1,u=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,f=!0,d=!1,v=void 0;try{for(var p,g=c[1][Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var h=p.value,y=[c[0],h];o(r,y)||(t.push(y),n(r,y))}}catch(e){d=!0,v=e}finally{try{!f&&g.return&&g.return()}finally{if(d)throw v}}}}catch(e){a=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw u}}return t}},{}],157:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../../loop"),o=e("../get-loop-bounds"),i=e("./get-intersections"),a=e("./complete-path"),u=e("./get-tightest-containing-loop");function s(e){return new n.Loop(e.beziers)}function l(e){for(var t=[],r=[e];r.length;){n(r.pop())}return t;function n(e){Math.abs(e.windingNum)<=1&&t.push(e);var n=!0,o=!1,i=void 0;try{for(var a,u=e.children[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=a.value;r.push(s)}}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}}}function c(e,t){var r=o.getLoopBounds(e),n=o.getLoopBounds(t);return r.minY.p[1]-n.minY.p[1]}r.simplifyPaths=function(e){var t=i.getIntersections(e),r=new Set,n={parent:void 0,children:new Set,beziers:void 0,loop:void 0,orientation:void 0,windingNum:0};if(e.sort(c),"undefined"!=typeof _debug_){var o=!0,f=!1,d=void 0;try{for(var v,p=e[Symbol.iterator]();!(o=(v=p.next()).done);o=!0){var g=v.value;_debug_.fs.nameObj(g)}}catch(e){f=!0,d=e}finally{try{!o&&p.return&&p.return()}finally{if(f)throw d}}}var h=!0,y=!1,b=void 0;try{for(var m,_=e[Symbol.iterator]();!(h=(m=_.next()).done);h=!0){var w=m.value;if(!(w.curves.length<=1||r.has(w))){r.add(w);var P=u.getTightestContainingLoop(n,w);a.completePath(t,r,P,w)}}}catch(e){y=!0,b=e}finally{try{!h&&_.return&&_.return()}finally{if(y)throw b}}var x=function(e){for(var t=[],r=[e];r.length;){var n=r.pop(),o=!0,i=!1,a=void 0;try{for(var u,s=n.children[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value;0===n.windingNum&&t.push(l),r.push(l)}}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}0===n.windingNum&&(n.children=new Set)}return t}(n).map(l).map(function(e){return e.map(s)}),I=new Map,O=!0,M=!1,C=void 0;try{for(var T,S=t[Symbol.iterator]();!(O=(T=S.next()).done);O=!0){var N=T.value,j=!0,A=!1,z=void 0;try{for(var E,B=N[1][Symbol.iterator]();!(j=(E=B.next()).done);j=!0){var D=E.value;D.isDummy||(I.set(D.outPs,{ps:D.opposite.outPs}),"undefined"!=typeof _debug_&&_debug_.generated.elems.intersection.push(D))}}catch(e){A=!0,z=e}finally{try{!j&&B.return&&B.return()}finally{if(A)throw z}}}}catch(e){M=!0,C=e}finally{try{!O&&S.return&&S.return()}finally{if(M)throw C}}return{loopss:x,xMap:I}}},{"../../../loop":84,"../get-loop-bounds":140,"./complete-path":149,"./get-intersections":151,"./get-tightest-containing-loop":154}],158:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseNumber=function(e){var t=0,r=0,n=1,o=0,i=1,a=1,u=e._currentIndex;if(e._skipOptionalSpaces(),e._currentIndex<e._endIndex&&"+"===e._string[e._currentIndex]?e._currentIndex+=1:e._currentIndex<e._endIndex&&"-"===e._string[e._currentIndex]&&(e._currentIndex+=1,i=-1),e._currentIndex===e._endIndex||(e._string[e._currentIndex]<"0"||e._string[e._currentIndex]>"9")&&"."!==e._string[e._currentIndex])return null;for(var s=e._currentIndex;e._currentIndex<e._endIndex&&e._string[e._currentIndex]>="0"&&e._string[e._currentIndex]<="9";)e._currentIndex+=1;if(e._currentIndex!==s)for(var l=e._currentIndex-1,c=1;l>=s;)r+=c*(Number(e._string[l])-0),l-=1,c*=10;if(e._currentIndex<e._endIndex&&"."===e._string[e._currentIndex]){if(e._currentIndex+=1,e._currentIndex>=e._endIndex||e._string[e._currentIndex]<"0"||e._string[e._currentIndex]>"9")return null;for(;e._currentIndex<e._endIndex&&e._string[e._currentIndex]>="0"&&e._string[e._currentIndex]<="9";)n*=10,o+=Number(e._string.charAt(e._currentIndex))/n,e._currentIndex+=1}if(e._currentIndex!==u&&e._currentIndex+1<e._endIndex&&("e"===e._string[e._currentIndex]||"E"===e._string[e._currentIndex])&&"x"!==e._string[e._currentIndex+1]&&"m"!==e._string[e._currentIndex+1]){if(e._currentIndex+=1,"+"===e._string[e._currentIndex]?e._currentIndex+=1:"-"===e._string[e._currentIndex]&&(e._currentIndex+=1,a=-1),e._currentIndex>=e._endIndex||e._string[e._currentIndex]<"0"||e._string[e._currentIndex]>"9")return null;for(;e._currentIndex<e._endIndex&&e._string[e._currentIndex]>="0"&&e._string[e._currentIndex]<="9";)t*=10,t+=Number(e._string[e._currentIndex]),e._currentIndex+=1}var f=r+o;return f*=i,t&&(f*=Math.pow(10,a*t)),u===e._currentIndex?null:(e._skipOptionalSpacesOrDelimiter(),f)}},{}],159:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./source");r.parsePathDataString=function(e){if(!e.length)return[];var t=new n.Source(e),r=[];if(!t.initialCommandIsMoveTo())return[];for(;t.hasMoreData();){var o=t.parseSegment();if(null===o)break;r.push(o)}return r}},{"./source":160}],160:[function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./parse-number"),i={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()}return n(e,[{key:"parseSegment",value:function(){var e=this._string[this._currentIndex],t=i[e]?i[e]:null;if(null===t){if(null===this._prevCommand)return null;if(null===(t=("+"===e||"-"===e||"."===e||e>="0"&&e<="9")&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null))return null}else this._currentIndex+=1;this._prevCommand=t;var r=null,n=t.toUpperCase();return"H"===n||"V"===n?r=[o.parseNumber(this)]:"M"===n||"L"===n||"T"===n?r=[o.parseNumber(this),o.parseNumber(this)]:"S"===n||"Q"===n?r=[o.parseNumber(this),o.parseNumber(this),o.parseNumber(this),o.parseNumber(this)]:"C"===n?r=[o.parseNumber(this),o.parseNumber(this),o.parseNumber(this),o.parseNumber(this),o.parseNumber(this),o.parseNumber(this)]:"A"===n?r=[o.parseNumber(this),o.parseNumber(this),o.parseNumber(this),this._parseArcFlag(),this._parseArcFlag(),o.parseNumber(this),o.parseNumber(this)]:"Z"===n&&(this._skipOptionalSpaces(),r=[]),null===r||r.indexOf(null)>=0?null:{type:t,values:r}}},{key:"hasMoreData",value:function(){return this._currentIndex<this._endIndex}},{key:"peekSegmentType",value:function(){var e=this._string[this._currentIndex];return i[e]?i[e]:null}},{key:"initialCommandIsMoveTo",value:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return"M"===e||"m"===e}},{key:"_isCurrentSpace",value:function(){var e=this._string[this._currentIndex];return e<=" "&&(" "===e||"\n"===e||"\t"===e||"\r"===e||"\f"===e)}},{key:"_skipOptionalSpaces",value:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex}},{key:"_skipOptionalSpacesOrDelimiter",value:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex])&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)}},{key:"_parseArcFlag",value:function(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===t)e=0;else{if("1"!==t)return null;e=1}return this._skipOptionalSpacesOrDelimiter(),e}}]),e}();r.Source=a},{"./parse-number":158}],161:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.a=function(e){e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=void 0}},{}],162:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.c=function(e){var t=[e.p,[e.vals[0],e.vals[1]],[e.vals[2],e.vals[3]],[e.vals[4],e.vals[5]]];return e.prev2ndCubicControlPoint=t[2],e.prev2ndQuadraticControlPoint=void 0,t}},{}],163:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.h=function(e){var t=(e.vals[0]-e.p[0])/3,r=[e.p,[e.p[0]+1*t,e.p[1]],[e.p[0]+2*t,e.p[1]],[e.p[0]+3*t,e.p[1]]];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=void 0,r}},{}],164:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.l=function(e){var t=(e.vals[0]-e.p[0])/3,r=(e.vals[1]-e.p[1])/3,n=[e.p,[e.p[0]+1*t,e.p[1]+1*r],[e.p[0]+2*t,e.p[1]+2*r],[e.p[0]+3*t,e.p[1]+3*r]];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=void 0,n}},{}],165:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.q=function(e){var t=e.p,r=[e.vals[0],e.vals[1]],n=[e.vals[2],e.vals[3]],o=n,i=[t,[t[0]+2/3*(r[0]-t[0]),t[1]+2/3*(r[1]-t[1])],[n[0]+2/3*(r[0]-n[0]),n[1]+2/3*(r[1]-n[1])],o];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=r,i}},{}],166:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.s=function(e){var t=[void 0,void 0];e.prev2ndCubicControlPoint?(t[0]=e.p[0]-e.prev2ndCubicControlPoint[0]+e.p[0],t[1]=e.p[1]-e.prev2ndCubicControlPoint[1]+e.p[1]):t=e.p;var r=[e.p,t,[e.vals[0],e.vals[1]],[e.vals[2],e.vals[3]]];return e.prev2ndCubicControlPoint=r[2],e.prev2ndQuadraticControlPoint=void 0,r}},{}],167:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.t=function(e){var t=[void 0,void 0];e.prev2ndQuadraticControlPoint?(t[0]=e.p[0]-e.prev2ndQuadraticControlPoint[0]+e.p[0],t[1]=e.p[1]-e.prev2ndQuadraticControlPoint[1]+e.p[1]):t=e.p;var r=e.p,n=t,o=[e.vals[0],e.vals[1]],i=[r,[r[0]+2/3*(n[0]-r[0]),r[1]+2/3*(n[1]-r[1])],[o[0]+2/3*(n[0]-o[0]),o[1]+2/3*(n[1]-o[1])],o];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=n,i}},{}],168:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.v=function(e){var t=(e.vals[0]-e.p[1])/3,r=[e.p,[e.p[0],e.p[1]+1*t],[e.p[0],e.p[1]+2*t],[e.p[0],e.p[1]+3*t]];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=void 0,r}},{}],169:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.z=function(e){var t=(e.initialPoint[0]-e.p[0])/3,r=(e.initialPoint[1]-e.p[1])/3,n=[e.p,[e.p[0]+t,e.p[1]+r],[e.p[0]+2*t,e.p[1]+2*r],[e.p[0]+3*t,e.p[1]+3*r]];return e.prev2ndCubicControlPoint=void 0,e.prev2ndQuadraticControlPoint=void 0,n}},{}],170:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PathState=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialPoint=void 0,this.prev2ndCubicControlPoint=void 0,this.prev2ndQuadraticControlPoint=void 0,this.p=[0,0]}},{}],171:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./fs/get-min-y-pos");r.getMinYPos=n.getMinYPos;var o=e("./fs/get-paths-from-svg-path-elem");r.getPathsFromSvgPathElem=o.getPathsFromSvgPathElem;var i=e("./fs/get-paths-from-str");r.getPathsFromStr=i.getPathsFromStr;var a=e("./fs/get-loop-bounds");r.getLoopBounds=a.getLoopBounds;var u=e("./fs/is-path-positively-oriented");r.isPathPositivelyOrientated=u.isPathPositivelyOrientated;var s=e("./fs/get-curvature-at-interface");r.getCurvatureAtInterface=s.getCurvatureAtInterface;var l=e("./fs/simplify-paths/simplify-paths");r.simplifyPaths=l.simplifyPaths;var c=e("./fs/circle-to-cubic-beziers");r.circleToCubicBeziers=c.circleToCubicBeziers;var f=e("./fs/beziers-to-svg-path-str");r.beziersToSvgPathStr=f.beziersToSvgPathStr;var d=e("./fs/get-shape-bounds");r.getShapeBounds=d.getShapeBounds,r.getShapesBounds=d.getShapesBounds},{"./fs/beziers-to-svg-path-str":134,"./fs/circle-to-cubic-beziers":135,"./fs/get-curvature-at-interface":138,"./fs/get-loop-bounds":140,"./fs/get-min-y-pos":141,"./fs/get-paths-from-str":142,"./fs/get-paths-from-svg-path-elem":143,"./fs/get-shape-bounds":144,"./fs/is-path-positively-oriented":146,"./fs/simplify-paths/simplify-paths":157}],172:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.X=function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2],o=arguments[3],i=arguments[4];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pos=t,this.isDummy=r,this.opposite=n,this.loopTree=o,this.outPs=i}},{}]},{},[1])(1)});
//# sourceMappingURL=index.min.js.map

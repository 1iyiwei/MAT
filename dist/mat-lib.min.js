!function e(t,r,n){function i(s,o){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";function n(e,t,r,n,i){this.bezierNode=e,this.t=t,this.type=r,this.order=n,this.order2=i;var a=l.evaluate(e.item)(t);this.p=a,this[0]=a[0],this[1]=a[1]}function i(e,t){var r=-l.κ(e)(t),n=void 0;n=r<=1/o.maxOsculatingCircleRadius?o.maxOsculatingCircleRadius:Math.min(1/r,o.maxOsculatingCircleRadius);var i=l.normal(e)(t),a=l.evaluate(e)(t),s=[a[0]+i[0]*n,a[1]+i[1]*n];return new v(s,n)}function a(e,t){var r=e.dullCornerHash,i=n.makeSimpleKey(t);return r[i]||null}function s(e){for(var t in o.pointType)if(o.pointType[t]===e)return t}var o=e("../../mat-constants.js"),u=e("../../vector/vector.js"),c=e("../../memoize.js"),l=e("./bezier.js"),v=e("./circle.js");n.getOsculatingCircle=c.m1(function(e){if(e.type===o.pointType.sharp)return new v(e.p,0);if(e.type===o.pointType.extreme){var t=o.maxOsculatingCircleRadius,r=[e.p[0],e.p[1]-t];return new v(r,t)}return i(e.bezierNode.item,e.t)}),n.compare=function(e,t){if(void 0!==e&&void 0!==t){var r=void 0;return r=e.bezierNode.item.indx-t.bezierNode.item.indx,0!==r?r:(r=e.t-t.t,0!==r?r:(r=e.order-t.order,0!==r?r:r=e.order2-t.order2))}},n.isPointingStraightUp=function(e){var t=n.getOsculatingCircle(e);if(!t)return!1;var r=u.toUnitVector(u.fromTo(e,t.center));return!(Math.abs(r[0])>1e-6||r[1]>0)},n.setPointOrder=function(e,t,r){var n=a(e,r);if(n){var i=n.beziers[0],s=l.tangent(i)(1),o=[s[1],-s[0]],c=u.toUnitVector(u.fromTo(r,t.center));return r.order=-u.dot(o,c),r.order}},n.copy=function(e){return new n(e.bezierNode,e.t,e.type,e.order,e.order2)},n.makeSimpleKey=function(e){return""+e[0]+", "+e[1]},n.toHumanString=function(e){return""+e[0]+", "+e[1]+" | bz: "+e.bezierNode.item.indx+" | t: "+e.t+" | ord: "+e.order+" | ord2: "+e.order2+" | "+s(e.type)},t.exports=n},{"../../mat-constants.js":16,"../../memoize.js":36,"../../vector/vector.js":43,"./bezier.js":4,"./circle.js":5}],2:[function(e,t,r){"use strict";var n=function(e,t,r,n,i,a,s){this.circle=e,this.sinAngle1=t,this.sinAngle2=n,this.cosAngle1=r,this.cosAngle2=i,this.startpoint=a,this.endpoint=s};n.closestPointOnArc=function(e,t){if(null!==t.circle){var r=t.circle.center[0],i=t.circle.center[1],a=new n(new Circle([0,0],t.circle.radius),Vector.translate(t.startpoint,[-r,-i]),Vector.translate(t.endpoint,[-r,-i]),t.sinAngle1,t.cosAngle1,t.sinAngle2,t.cosAngle2),s=Vector.translate(e,[-r,-i]),o=Vector.length(s),u=-s[1]/o,c=s[0]/o;if(Geometry.isAngleBetween(u,c,a.sinAngle1,a.cosAngle1,a.sinAngle2,a.cosAngle2)){var l=a.circle.radius,v={p:Vector.translate([l*c,l*-u],[r,i]),position:0};return v}var h=t.startpoint,d=t.endpoint,f=Vector.distanceBetween(h,e),p=Vector.distanceBetween(d,e);return f<p?{p:h,position:1}:{p:d,position:2}}var h=t.startpoint,d=t.endpoint,f=Vector.distanceBetween(h,e),p=Vector.distanceBetween(d,e),m=Math.sqrt(Vector.distanceBetweenPointAndLineSegment(e,[h,d]));if(f<=p&&f<=m)return{p:h,position:1};if(p<=f&&p<=m)return{p:d,position:2};var g=Vector.fromTo(h,d),y=[e[0]+g[1],e[1]+-g[0]],v={p:Geometry.lineLineIntersection([e,y],[h,d]),position:0};return v},t.exports=n},{}],3:[function(e,t,r){"use strict";function n(e,t){this.bezierNode=e,this.tRange=t}t.exports=n},{}],4:[function(e,t,r){"use strict";function n(e,t){this.indx=t,this.bezierPoints=e;var r=a(e,4),n=a(r[0],2),i=n[0],o=n[1],u=a(r[1],2),c=u[0],l=u[1],v=a(r[2],2),h=v[0],d=v[1],f=a(r[3],2),p=f[0],m=f[1];this.x=[p-3*h+3*c-i,3*h-6*c+3*i,3*c-3*i,i],this.y=[m-3*d+3*l-o,3*d-6*l+3*o,3*l-3*o,o],this.dx=s.differentiate(this.x),this.dy=s.differentiate(this.y),this.ddx=s.differentiate(this.dx),this.ddy=s.differentiate(this.dy),this.dddx=s.differentiate(this.ddx),this.dddy=s.differentiate(this.ddy)}function i(e,t,r){var i=o.transform(e[0],function(e){return-e}),a=new n(o.translateThenRotatePoints(e,i,-t,r));return n.getBoundingBox(a)}var a=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=(e("../../utils.js"),e("../../polynomial/polynomial.js")),o=e("../../vector/vector.js"),u=e("../../memoize.js"),c=e("../../numerical/functions/gaussian-quadrature.js");n.evaluate=u.m1(function(e){var t=a(e.bezierPoints,4),r=a(t[0],2),i=r[0],s=r[1],o=a(t[1],2),u=(o[0],o[1],a(t[2],2)),c=(u[0],u[1],a(t[3],2)),l=c[0],v=c[1];return function(t){return 0===t?[i,s]:1===t?[l,v]:[n.evaluateX(e)(t),n.evaluateY(e)(t)]}}),n.κ=u.m1(function(e){return function(t){var r=n.evaluateDx(e)(t),i=n.evaluateDy(e)(t),a=n.evaluateDdx(e)(t),s=n.evaluateDdy(e)(t),o=r*s-i*a,u=r*r+i*i,c=Math.sqrt(u*u*u);return o/c}});var l=u.m1(function(e){return function(t){var r=n.evaluateDx(e)(t),i=n.evaluateDy(e)(t),a=n.evaluateDdx(e)(t),s=n.evaluateDdy(e)(t),o=r*s-i*a,u=r*r+i*i;return o/u}});n.dκ=u.m1(function(e){var t=a(e.bezierPoints,4),r=a(t[0],2),n=r[0],i=r[1],s=a(t[1],2),o=s[0],u=s[1],c=a(t[2],2),l=c[0],v=c[1],h=a(t[3],2),d=h[0],f=h[1];return function(e){var t=e*e,r=1-e,a=t*d,s=t*f,c=2*e-3*t,h=(3*e-1)*r,p=r*r,m=3*(a+c*l-h*o-p*n),g=3*(s+c*v-h*u-p*i),y=6*(e*f-(3*e-1)*v+(3*e-2)*u+r*i),b=6*(e*d-(3*e-1)*l+(3*e-2)*o+r*n);return 4*(m*(f-3*v+3*u-i)-g*(d-3*l+3*o-n))*Math.pow(g*g+m*m,1.5)-(m*y-b*g)*(2*y*g+2*b*m)*Math.sqrt(g*g+m*m)}}),n.tangent=u.m1(function(e){return function(t){var r=n.evaluateDx(e)(t),i=n.evaluateDy(e)(t),a=Math.sqrt(r*r+i*i);return[r/a,i/a]}}),n.normal=u.m1(function(e){return function(t){var r=n.tangent(e)(t);return[r[1],-r[0]]}}),n.getTotalCurvature=u.m1(function(e){return c(l(e),[0,1])}),n.getTotalAbsoluteCurvature=u.m1(function(e){var t={};return function(r){var n=r||[0,1],i=""+n[0]+", "+n[1];if(t[i])return t[i];var a=c(function(t){return Math.abs(l(e)(t))},n);return t[i]=a,a}}),n.getCurveLength=u.m1(function(e){return c(n.ds(e),[0,1])}),n.ds=u.m1(function(e){return function(t){var r=n.evaluateDx(e)(t),i=n.evaluateDy(e)(t);return Math.sqrt(r*r+i*i)}}),n.evaluateX=u.m1(function(e){return s.evaluate(e.x)}),n.evaluateY=u.m1(function(e){return s.evaluate(e.y)}),n.evaluateDx=u.m1(function(e){return s.evaluate(e.dx)}),n.evaluateDy=u.m1(function(e){return s.evaluate(e.dy)}),n.evaluateDdx=u.m1(function(e){return s.evaluate(e.ddx)}),n.evaluateDdy=u.m1(function(e){return s.evaluate(e.ddy)}),n.evaluateDddx=u.m1(function(e){return s.evaluate(e.dddx)}),n.evaluateDddy=u.m1(function(e){return s.evaluate(e.dddy)}),n.getBoundingBoxTight=u.m1(function(e){var t=e.bezierPoints,r=a(t,4),n=a(r[0],2),s=n[0],u=n[1],c=a(r[1],2),l=(c[0],c[1],a(r[2],2)),v=(l[0],l[1],a(r[3],2)),h=v[0],d=v[1],f=Math.sqrt((h-s)*(h-s)+(d-u)*(d-u)),p=(d-u)/f,m=(h-s)/f,g=i(t,p,m),y=g[0][0],b=g[0][1],j=g[1][0],x=g[1][1],_=[g[0],[j,b],g[1],[y,x]];return o.rotateThenTranslatePoints(_,t[0],p,m)}),n.getBounds=u.m1(function(e){var t=[e.dx,e.dy].map(s.findQuadraticRoots01);t[0].push(0,1),t[1].push(0,1);for(var r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,u=void 0,c=void 0,l=void 0,v=void 0,h=0;h<t[0].length;h++){var d=t[0][h],f=n.evaluateX(e)(d);f<r&&(r=f,u=d),f>i&&(i=f,l=d)}for(var p=0;p<t[1].length;p++){var m=t[1][p],g=n.evaluateY(e)(m);g<a&&(a=g,c=m),g>o&&(o=g,v=m)}var y=[[u,c],[l,v]],b=[[r,a],[i,o]];return{ts:y,box:b}}),n.getBoundingBox=u.m1(function(e){return n.getBounds(e).box}),n.findIntersection=function(e,t){var r=e.bezierPoints,n=(t.bezierPoints,a(r,4)),i=a(n[0],2),s=(i[0],i[1],a(n[1],2)),o=(s[0],s[1],a(n[2],2)),u=(o[0],o[1],a(n[3],2)),c=(u[0],u[1],a(r,4)),l=a(c[0],2),v=(l[0],l[1],a(c[1],2)),h=(v[0],v[1],a(c[2],2)),d=(h[0],h[1],a(c[3],2));d[0],d[1]},n.splitAt=function(e,t){var r=e.bezierPoints,i=a(r,4),s=a(i[0],2),o=s[0],u=s[1],c=a(i[1],2),l=c[0],v=c[1],h=a(i[2],2),d=h[0],f=h[1],p=a(i[3],2),m=p[0],g=p[1],y=1-t,b=t*t,j=b*t,x=y*y,_=x*y,w=[[o,u],[t*l+y*o,t*v+y*u],[b*d+2*y*t*l+x*o,b*f+2*y*t*v+x*u],[j*m+3*y*b*d+3*x*t*l+_*o,j*g+3*y*b*f+3*x*t*v+_*u]],I=[w[3],[b*m+2*t*y*d+x*l,b*g+2*t*y*f+x*v],[t*m+y*d,t*g+y*f],[m,g]];return[new n(w),new n(I)]},t.exports=n},{"../../memoize.js":36,"../../numerical/functions/gaussian-quadrature.js":37,"../../polynomial/polynomial.js":39,"../../utils.js":42,"../../vector/vector.js":43}],5:[function(e,t,r){"use strict";function n(e,t){this.center=e,this.radius=t}var i=e("../../vector/vector.js");n.scale=function(e,t){return new n(e.center,e.radius*t)},n.engulfsCircle=function(e,t){if(e.radius<=t.radius)return!1;var r=i.squaredDistanceBetween(e.center,t.center),n=e.radius-t.radius,a=n*n;return a>r},n.prototype.toString=function(){return"c: "+this.center+" radius: "+this.radius},t.exports=n},{"../../vector/vector.js":43}],6:[function(e,t,r){"use strict";function n(e,t,r,n,i){this.bezierNode=e,this.t=t,this.type=r,this.order=n,this.order2=i;var a=l.evaluate(e.item)(t);this.p=a,this[0]=a[0],this[1]=a[1]}function i(e,t){var r=-l.κ(e)(t),n=void 0;n=r<=1/o.maxOsculatingCircleRadius?o.maxOsculatingCircleRadius:Math.min(1/r,o.maxOsculatingCircleRadius);var i=l.normal(e)(t),a=l.evaluate(e)(t),s=[a[0]+i[0]*n,a[1]+i[1]*n];return new v(s,n)}function a(e,t){var r=e.dullCornerHash,i=n.makeSimpleKey(t);return r[i]||null}function s(e){for(var t in o.pointType)if(o.pointType[t]===e)return t}var o=e("../../mat-constants.js"),u=e("../../vector/vector.js"),c=e("../../memoize.js"),l=e("./bezier.js"),v=e("./circle.js");n.getOsculatingCircle=c.m1(function(e){if(e.type===o.pointType.sharp)return new v(e.p,0);if(e.type===o.pointType.extreme){var t=o.maxOsculatingCircleRadius,r=[e.p[0],e.p[1]-t];return new v(r,t)}return i(e.bezierNode.item,e.t)}),n.compare=function(e,t){if(void 0!==e&&void 0!==t){var r=void 0;return r=e.bezierNode.item.indx-t.bezierNode.item.indx,0!==r?r:(r=e.t-t.t,0!==r?r:(r=e.order-t.order,0!==r?r:r=e.order2-t.order2))}},n.isPointingStraightUp=function(e){var t=n.getOsculatingCircle(e);if(!t)return!1;var r=u.toUnitVector(u.fromTo(e,t.center));return!(Math.abs(r[0])>1e-6||r[1]>0)},n.setPointOrder=function(e,t,r){var n=a(e,r);if(n){var i=n.beziers[0],s=l.tangent(i)(1),o=[s[1],-s[0]],c=u.toUnitVector(u.fromTo(r,t.center));return r.order=-u.dot(o,c),r.order}},n.copy=function(e){return new n(e.bezierNode,e.t,e.type,e.order,e.order2)},n.makeSimpleKey=function(e){return""+e[0]+", "+e[1]},n.toHumanString=function(e){return""+e[0]+", "+e[1]+" | bz: "+e.bezierNode.item.indx+" | t: "+e.t+" | ord: "+e.order+" | ord2: "+e.order2+" | "+s(e.type)},t.exports=n},{"../../mat-constants.js":16,"../../memoize.js":36,"../../vector/vector.js":43,"./bezier.js":4,"./circle.js":5}],7:[function(e,t,r){"use strict";function n(e,t){for(var r=[],n=function(e,t){return x.compare(e.item,t.item)},i=0;i<t.length;i++){for(var a=t[i],s=new y([],n,i),o=void 0,u=0;u<a.length;u++){var c=a[u],l=new x(c,(void 0));o=y.insert(s,l,o);w.create(_.getOsculatingCircle(c),[o]);o.prevOnCircle=o,o.nextOnCircle=o}r.push(s)}return r}function i(e){var t=e.map(z);if(t[0]){var r=e.map(function(e,t){return a(e,t)});return r}return e}function a(e,t){for(var r=[],n=y.getAsArray(e),i=0,a=n.length-1;a>=0;a--){var o=s(n[a],i);i++,r.push(o)}return new y(r,(void 0),t)}function s(e,t){for(var r=[],n=3;n>=0;n--)r.push(e.bezierPoints[n]);var i=new b(r,t);return i}function o(e,t){for(var r=new y([],(void 0),t),n=void 0,i=0;i<e.length;i++){var a=e[i];n=y.insert(r,a,n,void 0)}return r}function u(e){for(var t=e.pointsOnShapePerLoop,r=[],n=[],i=0;i<t.length;i++){var a=t[i],s=[],o=[],u=a.head;do{var c=u.item;c.type===d.pointType.sharp?s.push(c):o.push(u),u=u.next}while(u!==a.head);r.push(s),n.push(o)}return{sharpCornersArray:r,for2ProngsArray:n}}function c(e){for(var t=e.bezierLoops,r=[],n=0;n<t.length;n++){var i=t[n];r.push(l(e,i))}return r}function l(e,t){var r=e.dullCornerHash,n=[],i=t.head;do{var a=(i.item,I([i.prev,i],r));Array.prototype.push.apply(n,a);var s=M(i);Array.prototype.push.apply(n,s),i=i.next}while(i!==t.head);var o=n[0],u=n[n.length-1];_.compare(o,u)>0&&(n.push(o),n.splice(0,1));for(var c=!1,l=0;l<n.length;l++)if(n[l].type!==d.pointType.sharp){c=!0;break}if(0===t.indx&&!c){var v=t.head,h=new _(v,.4999995,d.pointType.standard,0,0);n.push(h)}return n}function v(e){var t=[];t.push(e.item),t.push(e.next.item);var r=[b.tangent(t[0])(1),b.tangent(t[1])(0)],n=p.dot(r[0],r[1]),i=p.cross(r[0],r[1]),a=f.acos(n),s=i>=0?a:-a;return s}function h(e){return function(t){var r=t.head,n=0;do n+=e(r),r=r.next;while(r!==t.head);return n}}var d=(function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e("../../mat-constants.js")),f=e("../../utils.js"),p=(e("../../polynomial/polynomial.js"),e("../../vector/vector.js")),m=e("../../memoize.js"),g=e("../../ll-rb-tree//ll-rb-tree.js"),y=e("../../linked-loop/linked-loop.js"),b=e("../../geometry/classes/bezier.js"),j=e("../../geometry/classes/bezier-piece.js"),x=e("../../mat/classes/contact-point.js"),_=e("../../geometry/classes/point-on-shape.js"),w=(e("../../svg/svg.js"),e("../../mat/classes/mat-circle.js")),I=e("../functions/get-contact-circles-at-bezier-bezier-interface.js"),M=e("../functions/get-bezier-osculating-circles.js"),P=function e(t){var r=this;this.straightUpHash={},this.skip2ProngHash={},this.dullCornerHash={};var a=t.map(function(e,t){return new y(e,(void 0),t)});this.bezierLoops=i(a),this.extremes=this.bezierLoops.map(S),this.extremes.sort(function(e,t){return e.p[1]-t.p[1]}),this.bezierLoops.sort(function(e,t){var r=S(e),n=S(t);return r.p[1]-n.p[1]});for(var s=0;s<this.bezierLoops.length;s++)this.bezierLoops[s].indx=s;this.metrics=N(a[0]);var l=c(this);this.pointsOnShapePerLoop=l.map(function(e,t){return o(e,t)});var v=u(this),h=v.sharpCornersArray,f=v.for2ProngsArray;this.for2ProngsArray=f,e.forEachPointOnShape(this,function(e){if(e.type===d.pointType.sharp)MatLib._debug_&&MatLib._debug_.generated.sharpCorners.push({pos:e});else{if(_.isPointingStraightUp(e)){var t=_.makeSimpleKey(e);r.straightUpHash[t]=e}MatLib._debug_&&e.type===d.pointType.dull&&MatLib._debug_.generated.dullCorners.push({pos:e})}}),this.contactPointsPerLoop=n(this,h)},N=m.m1(function(e){var t=Number.POSITIVE_INFINITY,r=[[t,t],[-t,-t]],n=[[void 0,void 0],[void 0,void 0]];return y.forEach(e,function(e){for(var t=e.item,i=b.getBoundingBox(t),a=0;a<2;a++)for(var s=0;s<2;s++){var o=i[a][s],u=0===a?1:-1;u*o<u*r[a][s]&&(r[a][s]=o,n[a][s]=e)}}),{metrics:r,extremeBeziers:n}}),z=function(e){var t=N(e),r=t.extremeBeziers,n=r[1][0],i=b.getBounds(n.item).ts,a=i[1][0],s=b.tangent(n.item)(a);if(1!==a)return s[1]>0;var o=b.tangent(n.next.item)(0);return s[1]*o[1]>0?s[1]>0:p.cross(s,o)>0},S=m.m1(function(e){var t=N(e),r=t.extremeBeziers,n=r[0][1],i=b.getBounds(n.item).ts,a=i[0][1],s=b.evaluate(n.item)(a);return{p:s,bezierNode:n,t:a}});P.forEachPointOnShape=function(e,t){for(var r=e.pointsOnShapePerLoop,n=0;n<r.length;n++){var i=r[n],a=i.head;do{var s=a.item;t(s),a=a.next}while(a!==i.head)}},P.getNeighbouringPoints=function(e,t){var r=t.bezierNode.loop.indx,n=e.contactPointsPerLoop[r].cptree,i=g.findBounds(n,{item:new x(t)});return null===i?[void 0,void 0]:i[0]&&i[1]?[i[0].data,i[1].data]:[g.max(n.root),g.min(n.root)]},P.getTotalCurvature=h(function(e){var t=b.getTotalCurvature(e.item),r=v(e);return t+r}),P.getTotalAbsoluteCurvature=h(function(e){return b.getTotalAbsoluteCurvature(e.item)()+Math.abs(v(e))}),P.forAllBeziers=function(e,t){for(var r=t.bezierLoops,n=0;n<r.length;n++){var i=r[n],a=i.head;do{var s=a.item;e(s),a=a.next}while(a!==i.head)}},P.getBoundaryBeziers=function(e,t){var r=e.bezierLoops[t],n=[];return y.forEach(r,function(e){var t=new j(e,[0,1]);n.push(t)}),n},P.getBoundaryPieceBeziers=function(e){function t(e,t,r,n){var i=0,a=t;do if(i++,a=a.next,a===r){var s=new j(a,[0,n]);e.push(s)}else{var o=new j(a,[0,1]);e.push(o)}while(a!==r&&i<100);100===i&&console.log("maxed")}var r=e[0],n=e[1],i=[],a=!0;do if(a){a=!1;var s=r.item.pointOnShape,o=r.next.item.pointOnShape;if(o.bezierNode===s.bezierNode&&(o.t>s.t||o.t===s.t&&o.order>s.order)){var u=r.item.pointOnShape,c=new j(u.bezierNode,[u.t,o.t]);i.push(c)}else{var l=r.item.pointOnShape,v=new j(l.bezierNode,[l.t,1]);i.push(v),t(i,s.bezierNode,o.bezierNode,o.t)}r=r.next}else a=!0,r=r.prevOnCircle;while(r!==n);return i},t.exports=P},{"../../geometry/classes/bezier-piece.js":3,"../../geometry/classes/bezier.js":4,"../../geometry/classes/point-on-shape.js":6,"../../linked-loop/linked-loop.js":13,"../../ll-rb-tree//ll-rb-tree.js":15,"../../mat-constants.js":16,"../../mat/classes/contact-point.js":18,"../../mat/classes/mat-circle.js":21,"../../memoize.js":36,"../../polynomial/polynomial.js":39,"../../svg/svg.js":41,"../../utils.js":42,"../../vector/vector.js":43,"../functions/get-bezier-osculating-circles.js":9,"../functions/get-contact-circles-at-bezier-bezier-interface.js":11}],8:[function(e,t,r){"use strict";function n(e){var t=o(e.bezierPoints,4),r=o(t[0],2),n=r[0],a=r[1],c=o(t[1],2),l=c[0],v=c[1],h=o(t[2],2),d=h[0],f=h[1],p=o(t[3],2),m=p[0],g=p[1],y=[],b=l-n,j=v-a,x=d-n,_=f-a,w=m-n,I=g-a,M=b,P=x-b,N=w-x,z=j,S=_-j,C=I-_;Math.abs(M-2*P+N)<u&&Math.abs(z-2*S+C)<u;var T=w-3*x+3*b,O=I-3*_+3*j,B=T*T,A=O*O,L=B/A+1,D=Math.sqrt(L),k=1/D,q=void 0;q=0===k?1:T/(O*D);var E=b*k-j*q,R=b*q+j*k,V=x*k-_*q,F=x*q+_*k,H=w*k-I*q,U=w*q+I*k;M=E,P=V-E,N=H-V,z=R,S=F-R,C=U-F;var Y=3*(z-2*S+C),G=V-2*E;if(0===G){if(0===M)return[]}else{G<0&&(E=-E,V=-V,H=-H,M=-M,P=-P,N=-N,G=-G);var K=6*G,Q=3*Y*M/(K*K),Z=3*Y*z/(K*K),X=3*(S-z)/K,W=Q*Q-2*X*Q+Z,J=2*(X-Q),$=s(Q,K,Y);if(W>0){var ee=Math.sqrt(W),te=-ee,re=ee;y=[[Number.NEGATIVE_INFINITY,te],[te,re],[re,Number.POSITIVE_INFINITY]].map($).map(i)}else if(W<0){var ne=2*J*J-8*W-3;if(ne<0)y=[[0,Math.sqrt(-3*W)]].map($).map(i);else{var ie=Math.sqrt(5*ne),ae=(-5*J-ie)/10,se=(-5*J+ie)/10;y=[[Number.NEGATIVE_INFINITY,ae],[ae,Math.min(0,se)],[Math.max(0,se),Math.sqrt(-3*W)]].map($).map(i)}}}return y}function i(e){var t=e[0],r=e[1];return!(t<0&&r<0||t>1&&r>1)&&(t<0&&(t=0),t>1&&(t=1),r<0&&(r=0),r>1&&(r=1),[t,r])}function a(e,t,r){return function(n){return(n-e)*(t/r)}}function s(e,t,r){return function(n){return n.map(a(e,t,r))}}var o=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=(e("../classes/bezier.js"),1e-6);t.exports=n},{"../classes/bezier.js":4}],9:[function(e,t,r){"use strict";function n(e){for(var t=[],r=e.item,n=l(r),a=n.length,c=0;c<a;c++){var v=n[c];if(v){var h=i(r,v);if(h){var d=-o.κ(r)(h),f=-o.κ(r)(v[0]),p=-o.κ(r)(v[1]);if(d>f&&d>p);else if(d<=f&&d<=p)continue;var m=new u(e,h,s.pointType.standard,0,0);t.push(m)}}}return t.sort(u.compare),t}function i(e,t){var r=a(t,2),n=r[0],i=r[1],s=o.dκ(e)(n),u=o.dκ(e)(i);if(!(s*u>=0)){var l=c.brent(o.dκ(e),n,i);return l}}var a=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=e("../../mat-constants.js"),o=e("../classes/bezier.js"),u=(e("../../geometry/classes/circle.js"),e("../../geometry/classes/point-on-shape.js")),c=e("../../polynomial/polynomial.js"),l=e("./calc-bezier-curvature-extrema.js");t.exports=n},{"../../geometry/classes/circle.js":5,"../../geometry/classes/point-on-shape.js":6,"../../mat-constants.js":16,"../../polynomial/polynomial.js":39,"../classes/bezier.js":4,"./calc-bezier-curvature-extrema.js":8}],10:[function(e,t,r){"use strict";function n(e,t,r,n){var a=i(e,t),s=Number.POSITIVE_INFINITY,o=void 0,c=!0,v=!1,h=void 0;try{for(var f,m=a[Symbol.iterator]();!(c=(f=m.next()).done);c=!0){var g=f.value,y=(g.bezierNode.item,u(g.bezierNode,t,g.tRange,r,n)),b=void 0===y?Number.POSITIVE_INFINITY:d.distanceBetween(y.p,t);b<s&&(o=new p(g.bezierNode,y.t,l.pointType.standard,0,0),s=b)}}catch(e){v=!0,h=e}finally{try{!c&&m.return&&m.return()}finally{if(v)throw h}}return o}function i(e,t){var r=5,n=e.length>r;if(n){var i=a(e,t);e=s(e,t,i),e=o(e,t,i)}return e}function a(e,t){var r=Number.POSITIVE_INFINITY,n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value,c=u.bezierNode.item,l=f.evaluate(c)(u.tRange[0]),v=f.evaluate(c)(u.tRange[1]),h=d.squaredDistanceBetween(t,l),p=d.squaredDistanceBetween(t,v),m=Math.min(h,p);m<r&&(r=m)}}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r+.01}function s(e,t,r){var n=[],i=!0,a=!1,s=void 0;try{for(var o,u=e[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var c=o.value,l=c.bezierNode.item,v=f.getBoundingBox(l),d=h.getClosestSquareDistanceToRect(v,t);d<=r&&n.push(c)}}catch(e){a=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}return n}function o(e,t,r){var n=[],i=!0,a=!1,s=void 0;try{for(var o,u=e[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var c=o.value,l=c.bezierNode.item,v=(f.getBoundingBoxTight(l),h.closestSquaredDistanceToRotatedRect(l,t));v<=r&&n.push(c)}}catch(e){a=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}return n}function u(e,t,r,n,i){var a=e.item,s=n?n.item:void 0,o=c(a.bezierPoints,4),u=c(o[0],2),l=u[0],h=u[1],p=c(o[1],2),m=p[0],g=p[1],y=c(o[2],2),b=y[0],j=y[1],x=c(o[3],2),_=x[0],w=x[1],I=c(t,2),M=I[0],P=I[1],N=l-M,z=m-M,S=b-M,C=_-M,T=h-P,O=g-P,B=j-P,A=w-P,L=N*N,D=6*N*z,k=6*N*S,q=2*N*C,E=9*z*z,R=18*z*S,V=6*z*C,F=9*S*S,H=6*S*C,U=C*C,Y=T*T,G=6*T*O,K=6*T*B,Q=2*T*A,Z=9*O*O,X=18*O*B,W=6*O*A,J=9*B*B,$=6*B*A,ee=A*A,te=6*(U-H+V-q+F-R+k+E-D+L+(ee-$+W-Q+J-X+K+Z-G+Y)),re=5*(H-2*V+3*q-2*F+3*R-4*k-4*E+5*D-6*L+($-2*W+3*Q-2*J+3*X-4*K-4*Z+5*G-6*Y)),ne=4*(V-3*q+F-3*R+6*k+6*E-10*D+15*L+(W-3*Q+J-3*X+6*K+6*Z-10*G+15*Y)),ie=3*(q+R-4*k-4*E+10*D-20*L+(Q+X-4*K-4*Z+10*G-20*Y)),ae=2*(k+E-5*D+15*L+(K+Z-5*G+15*Y)),se=D-6*L+(G-6*Y),oe=[te,re,ne,ie,ae,se];if(a===s){var ue=v.deflate(oe,i);oe=ue}var ce=v.allRoots01(oe),le=ce.filter(function(e){return e>=r[0]&&e<=r[1]}),ve=!0,he=!0;(1===i&&e===n.next||a===s&&0===i)&&(ve=!1),(0===i&&e===n.prev||a===s&&1===i)&&(he=!1),0===r[0]?ve&&le.push(r[0]):1===r[0]?he&&le.push(r[0]):le.push(r[0]),0===r[1]?ve&&le.push(r[1]):1===r[1]?he&&le.push(r[1]):le.push(r[1]);var de=le.map(function(e){return{p:f.evaluate(a)(e),t:e}}),fe=d.getClosestTo(t,de,function(e,t){return d.squaredDistanceBetween(e,t.p)});return fe}var c=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=e("../../mat-constants.js"),v=e("../../polynomial/polynomial.js"),h=e("../geometry.js"),d=e("../../vector/vector.js"),f=e("../classes/bezier.js"),p=e("../classes/Point-on-shape.js");t.exports=n},{"../../mat-constants.js":16,"../../polynomial/polynomial.js":39,"../../vector/vector.js":43,"../classes/Point-on-shape.js":1,"../classes/bezier.js":4,"../geometry.js":12}],11:[function(e,t,r){"use strict";function n(e,t){var r=[1,0],n=[0,1].map(function(t){return e[t].item}),u=[0,1].map(function(e){return o.tangent(n[e])(r[e])}),l=+s.cross(u[0],u[1]),v=-s.dot(u[0],u[1]);if(0===l||v===-1)return[];var h=n[0].bezierPoints[3];if(l<-c){var d=new a(e[0],1,i.pointType.sharp,0,0);return[d]}if(l>0){var f=a.makeSimpleKey(h);t[f]={beziers:n,tans:u}}if(l<=c){var p=new a(e[0],.9,i.pointType.standard,0,0);return[p]}for(var m=[],g=[-1,v],y=0;y<2;y++){var b=new a(e[y],r[y],i.pointType.dull,g[y],0);m.push(b)}return m}var i=e("../../mat-constants.js"),a=(e("../../geometry/classes/circle.js"),e("../../geometry/classes/point-on-shape.js")),s=e("../../vector/vector.js"),o=e("../classes/bezier.js"),u={0:0,.25:.005,1:.0167,4:.0698,15:.2588,16:.2756},c=u[.25];t.exports=n},{"../../geometry/classes/circle.js":5,"../../geometry/classes/point-on-shape.js":6,"../../mat-constants.js":16,"../../vector/vector.js":43,"../classes/bezier.js":4}],12:[function(e,t,r){"use strict";var n=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=e("../utils.js"),a=e("../polynomial/polynomial.js"),s=(e("../memoize.js"),e("../vector/vector.js")),o=e("./classes/circle.js"),u=e("./classes/shape.js"),c=e("./classes/arc.js"),l=(e("./classes/point-on-shape.js"),e("./classes/bezier.js")),v={};v.getLineShapeIntersectionPoints=function(e,t,r){for(var n=[],i=u.getBoundaryPieceBeziers(r),a=0;a<i.length;a++){bezierPiece=i[a];for(var s=bezierPiece.bezierNode.item,o=v.getLineBezierIntersectionPoints(e,s,bezierPiece.tRange),c=0;c<o.length;c++)n.push(o[c].p)}return n},v.closestSquaredDistanceToRotatedRect=function(e,t){var r=l.getBoundingBoxTight(e),n=[0,1,2,3].map(function(e){return s.squaredDistanceBetweenPointAndLineSegment(t,[r[e],r[(e+1)%4]])});return i.min(n)},v.getClosestSquareDistanceToRect=function(e,t){var r=e[0][0],n=e[0][1],i=e[1][0],a=e[1][1],o=t[0],u=t[1];if(o<r){if(u<n)return s.squaredDistanceBetween(e[0],t);if(u>a)return s.squaredDistanceBetween([r,a],t);var c=r-o;return c*c}if(o>i){if(u<n)return s.squaredDistanceBetween([i,n],t);if(u>a)return s.squaredDistanceBetween(e[1],t);var l=o-i;return l*l}if(u<n){var v=n-u;return v*v}if(u>a){var h=u-a;return h*h}return 0},v.degAngleFromSinCos=function(e,t){function r(e){return e*(180/Math.PI)}return 0===t?e>0?90:270:t>0?r(Math.atan(e/t)):180+r(Math.atan(e/t))},v.arcFrom3Points=function(e){var t=s.mean([e[0],e[1]]),r=s.mean([e[1],e[2]]),n=s.fromTo(e[0],e[1]),i=s.fromTo(e[1],e[2]),a=[n[1],-n[0]],u=[i[1],-i[0]],l=[t,s.translate(a,t)],h=[r,s.translate(u,r)],d=v.lineLineIntersection(l,h),f=void 0;if(null===d)return s.equal(e[0],e[2])?null:f=new c(null,e[0],e[2]);var p=s.fromTo(d,e[0]),m=s.fromTo(d,e[1]),g=s.fromTo(d,e[2]),y=s.length(p),b=-p[1]/y,j=p[0]/y,x=-g[1]/y,_=g[0]/y,w=-m[1]/y,I=m[0]/y;return f=v.isAngleBetween(w,I,b,j,x,_)?new c(new o(d,y),e[0],e[2],b,j,x,_):new c(new o(d,y),e[2],e[0],x,_,b,j)},v.quadrant=function(e,t){return e>=0?t>=0?1:2:t>=0?4:3},v.isAngle1LargerOrEqual=function(e,t,r,n){var i=v.quadrant(e,t),a=v.quadrant(r,n);return i>a||!(i<a)&&(1===i||4===i?e>=r:e<=r)},v.isAngleBetween=function(e,t,r,n,i,a){var s=v.isAngle1LargerOrEqual(r,n,i,a),o=v.isAngle1LargerOrEqual(e,t,i,a),u=v.isAngle1LargerOrEqual(e,t,r,n);return s?u||!o:u&&!o},v.lineLineIntersection=function(e,t){var r=n(e,2),i=n(r[0],2),a=i[0],s=i[1],o=n(r[1],2),u=o[0],c=o[1],l=n(t,2),v=n(l[0],2),h=v[0],d=v[1],f=n(l[1],2),p=f[0],m=f[1],g=u-a,y=c-s,b=p-h,j=m-d,x=b*y-j*g;if(0!==x){var _=((d-s)*g-(h-a)*y)/x;return[h+_*b,d+_*j]}},v.lineThroughPointAtRightAngleTo=function(e,t){var r=[-t[1],t[0]],n=e[0]+r[0],i=e[1]+r[1];return[e,[n,i]]},v.getLineBezierIntersectionPoints=function(e,t,r){var n=[-e[0][0],-e[0][1]],i=[e[1][0]+n[0],e[1][1]+n[1]],o=s.length(i),u=-i[1]/o,c=i[0]/o,v=s.translateThenRotatePoints(t.bezierPoints,n,u,c),h=new l(v),d=a.findCubicRoots01(h.y);return d.map(function(e){return{p:l.evaluate(t)(e),t:e}})},t.exports=v},{"../memoize.js":36,"../polynomial/polynomial.js":39,"../utils.js":42,"../vector/vector.js":43,"./classes/arc.js":2,"./classes/bezier.js":4,"./classes/circle.js":5,"./classes/point-on-shape.js":6,"./classes/shape.js":7}],13:[function(e,t,r){"use strict";function n(e,t,r){t&&(this.cptree=new i(t)),this.indx=r,this.addAllFromScratch(e||[])}var i=e("../ll-rb-tree/ll-rb-tree.js"),a=e("./list-node.js");n.insert=function(e,t,r,n){var s=new a(e,t,(void 0),(void 0)),o=void 0,u=void 0;return e.head?(o=r,u=o.next):(o=s,u=s,e.head=s),u.prev=s,o.next=s,s.prev=o,s.next=u,s.coupledNode=n,e.cptree&&i.insert(e.cptree,s),s},n.remove=function(e,t){var r=t.prev,n=t.next;t===e.head&&(e.head=n),r.next=n,n.prev=r,e.cptree&&i.remove(e.cptree,t)},n.getAsArray=function(e){var t=[],r=e.head;do t.push(r.item),r=r.next;while(r!==e.head);return t},n.forEach=function(e,t){var r=e.head;do t(r),r=r.next;while(r!==e.head)},n.getByIndx=function(e,t){return a.advanceNSteps(e.head,t)},n.prototype.addAllFromScratch=function(e){if(0!==e.length){for(var t,r=null,n=void 0,s=0;s<e.length;s++)n=new a(this,e[s],r,null,s),r&&(r.next=n),r=n,0===s&&(t=n),this.cptree&&i.insert(this.cptree,n);t.prev=n,n.next=t,this.head=t}},t.exports=n},{"../ll-rb-tree/ll-rb-tree.js":15,"./list-node.js":14}],14:[function(e,t,r){"use strict";function n(e,t,r,n){this.loop=e,this.item=t,this.prev=r,this.next=n}n.advanceNSteps=function(e,t){for(var r=0;r<t;r++)e=e.next;return e},t.exports=n},{}],15:[function(e,t,r){"use strict";function n(e){this.data=e,this.red=!0}function i(e){this.comparator=e,this.root=null}function a(e,t){return function(t){for(;t[e];)t=t[e];return t}}function s(e,t){var r=t[!e];return t[!e]=r[e],r[e]=t,r.red=t.red,t.red=!0,r}function o(e){e.red=!e.red,e[v].red=!e[v].red,e[h].red=!e[h].red}function u(e){return o(e),n.isRed(e[h][v])&&(e[h]=s(h,e[h]),e=s(v,e),o(e)),e}function c(e){return o(e),n.isRed(e[v][v])&&(e=s(h,e),o(e)),e}function l(e){return n.isRed(e[h])&&(e=s(v,e)),n.isRed(e[v])&&n.isRed(e[v][v])&&(e=s(h,e)),n.isRed(e[v])&&n.isRed(e[h])&&o(e),e}var v=!1,h=!0;n.isRed=function(e){return e&&e.red},i.getMinNode=a(v),i.getMaxNode=a(h),i.min=function(e){return i.getMinNode(e).data},i.max=function(e){return i.getMaxNode(e).data},i.findBounds=function(e,t){var r=e.root;if(null===r)return null;for(var n=[];r;){var i=e.comparator(t,r.data);i>=0?n[0]=r:n[1]=r,r=r[i>=0]}return n},i.find=function(e,t){for(var r=e.root;r;){var n=e.comparator(t,r.data);if(0===n)return r;r=r[n>0]}return null},i.insert=function(e,t){function r(t,i){if(null==t)return new n(i);n.isRed(t[v])&&n.isRed(t[h])&&o(t);var a=e.comparator(i,t.data);return 0===a?t.data=i:a<0?t[v]=r(t[v],i):t[h]=r(t[h],i),n.isRed(t[h])&&!n.isRed(t[v])&&(t=s(v,t)),n.isRed(t[v])&&n.isRed(t[v][v])&&(t=s(h,t)),t}e.root=r(e.root,t),e.root.red=!1},i.remove=function(e,t){function r(t,o){return e.comparator(o,t.data)<0?(n.isRed(t[v])||n.isRed(t[v][v])||(t=u(t)),t[v]=r(t[v],o),l(t)):(n.isRed(t[v])&&(t=s(h,t)),t[h]||0!==e.comparator(o,t.data)?(n.isRed(t[h])||n.isRed(t[h][v])||(t=c(t)),0===e.comparator(o,t.data)?(t.data=i.min(t[h]),t[h]=a(t[h])):t[h]=r(t[h],o),l(t)):null)}function a(e){return e[v]?(n.isRed(e[v])||n.isRed(e[v][v])||(e=u(e)),e[v]=a(e[v]),l(e)):null}e.root=r(e.root,t),e.root&&(e.root.red=!1)},t.exports=i},{}],16:[function(e,t,r){"use strict";var n={maxOsculatingCircleRadius:800,pointType:{standard:0,sharp:1,dull:2,extreme:3}};t.exports=n},{}],17:[function(e,t,r){"use strict";var n=(e("./mat-constants.js"),e("./mat/functions/smoothen.js")),i=e("./mat/functions/find-mat.js"),a=e("./mat/functions/to-scale-axis.js"),s=e("./geometry/classes/bezier.js"),o=(e("./mat/classes/mat-node.js"),
e("./mat/classes/mat.js")),u=e("./mat/classes/mat-circle.js"),c=e("./mat/classes/contact-point.js"),l=e("./mat/functions/get-nodes-as-array.js"),v=e("./geometry/classes/point-on-shape.js"),h=e("./linked-loop/linked-loop.js"),d=e("./ll-rb-tree//ll-rb-tree.js"),f=e("./geometry/classes/shape.js"),p=e("./geometry/classes/circle.js"),m=e("./svg/svg.js"),g=e("./geometry/geometry.js"),y=e("./utils.js"),b=e("./vector/vector.js"),j=e("./polynomial/polynomial.js"),x=window.MatLib||{};x=Object.assign(x,{_debug_:void 0,findMat:i,smoothen:n,toScaleAxis:a,Bezier:s,Mat:o,MatCircle:u,ContactPoint:c,PointOnShape:v,LinkedLoop:h,LlRbTree:d,Shape:f,Circle:p,Svg:m,Geometry:g,Util:y,Vector:b,Poly:j,fs:{getNodesAsArray:l}}),window.MatLib=x},{"./geometry/classes/bezier.js":4,"./geometry/classes/circle.js":5,"./geometry/classes/point-on-shape.js":6,"./geometry/classes/shape.js":7,"./geometry/geometry.js":12,"./linked-loop/linked-loop.js":13,"./ll-rb-tree//ll-rb-tree.js":15,"./mat-constants.js":16,"./mat/classes/contact-point.js":18,"./mat/classes/mat-circle.js":21,"./mat/classes/mat-node.js":22,"./mat/classes/mat.js":23,"./mat/functions/find-mat.js":30,"./mat/functions/get-nodes-as-array.js":31,"./mat/functions/smoothen.js":33,"./mat/functions/to-scale-axis.js":34,"./polynomial/polynomial.js":39,"./svg/svg.js":41,"./utils.js":42,"./vector/vector.js":43}],18:[function(e,t,r){"use strict";function n(e,t){this.pointOnShape=e,this.matCircle=t,this.key=i.toHumanString(e),this[0]=e[0],this[1]=e[1]}var i=e("../../geometry/classes/point-on-shape.js"),a=e("../../vector/vector.js");n.compare=function(e,t){return i.compare(e.pointOnShape,t.pointOnShape)},n.equal=function(e,t){return a.equal(e,t)},t.exports=n},{"../../geometry/classes/point-on-shape.js":6,"../../vector/vector.js":43}],19:[function(e,t,r){"use strict";function n(e,t,r,n){this.threeProng=e,this.deltas=t,this.bestIndx=r,this.candidateThreeProngs=n,this.deltasSimple=t.map(function(e){return[i.toHumanString(e[0].item.pointOnShape),i.toHumanString(e[1].item.pointOnShape)]})}var i=e("../../../geometry/classes/point-on-shape.js");t.exports=n},{"../../../geometry/classes/point-on-shape.js":6}],20:[function(e,t,r){"use strict";function n(e,t,r,n,i,a,s,o,u){this.pos=e,this.δ=t,this.y=r,this.z=n,this.x=i,this.circle=a,this.xs=s,this.failed=o,this.holeClosing=u}t.exports=n},{}],21:[function(e,t,r){"use strict";function n(e,t){this.circle=e,this.cpNodes=t,this.visited=0}e("../../geometry/classes/circle.js");n.create=function(e,t){for(var r=new n(e,(void 0)),i=0;i<t.length;i++)t[i].item.matCircle=r;return r.cpNodes=t,r},t.exports=n},{"../../geometry/classes/circle.js":5}],22:[function(e,t,r){"use strict";function n(e,t){this.matCircle=e,this.branches=t}e("./mat-circle.js");n.copy=function(e){function t(e,r,i){var a=[],s=new n(e.matCircle,a),o=!0,u=!1,c=void 0;try{for(var l,v=e.branches[Symbol.iterator]();!(o=(l=v.next()).done);o=!0){var h=l.value;h!==r?a.push(t(h,e,s)):a.push(i)}}catch(e){u=!0,c=e}finally{try{!o&&v.return&&v.return()}finally{if(u)throw c}}return s}return t(e,void 0)},t.exports=n},{"./mat-circle.js":21}],23:[function(e,t,r){"use strict";function n(e){this.startNode=e}var i=e("../../mat/functions/traverse.js");n=Object.assign(n,{traverse:i}),t.exports=n},{"../../mat/functions/traverse.js":35}],24:[function(e,t,r){"use strict";function n(e,t,r,n,l){l&&(r.order2=1,n.order2=-1);var v=new a(n,(void 0)),h=u.getNeighbouringPoints(e,n),d=void 0===h[0]?void 0:a.compare(h[0].item,v),f=void 0===h[1]?void 0:a.compare(v,h[1].item);if(MatLib._debug_,0!==d&&0!==f){var p=n.bezierNode.loop.indx,m=s.insert(e.contactPointsPerLoop[p],v,h[0]),g=new a(r,(void 0)),y=u.getNeighbouringPoints(e,r),b=void 0===y[0]?void 0:a.compare(y[0].item,g),j=void 0===y[1]?void 0:a.compare(g,y[1].item);if(MatLib._debug_,0===b||0===j)return void s.remove(e.contactPointsPerLoop[p],m);var x=r.bezierNode.loop.indx,_=s.insert(e.contactPointsPerLoop[x],g,y[0]);o.create(t,[_,m]);if(_.prevOnCircle=m,_.nextOnCircle=m,m.prevOnCircle=_,m.nextOnCircle=_,l){var w=n,I=c.copy(w);I.order2=1;var M=new a(I,(void 0)),P=s.insert(e.contactPointsPerLoop[p],M,m),N=r,z=c.copy(N);z.order2=-1;var S=new a(z,(void 0)),C=s.insert(e.contactPointsPerLoop[x],S,_.prev);o.create(t,[C,P]),C.prevOnCircle=P,C.nextOnCircle=P,P.prevOnCircle=C,P.nextOnCircle=C,m.next=_,_.prev=m,C.next=P,P.prev=C}MatLib._debug_&&(i(_),i(m))}}function i(e){var t=c.makeSimpleKey(e.item.pointOnShape),r=MatLib._debug_.generated.cpHash,n=MatLib._debug_.generated.cpArr;r[t]||(r[t]={cp:e,arrIndx:n.length},n.push(e));var i=r[t];i.visitedPointsArr=i.visitedPointsArr||[]}var a=(e("../../geometry/classes/circle.js"),e("../../mat/classes/contact-point.js")),s=e("../../linked-loop/linked-loop.js"),o=e("../../mat/classes/mat-circle.js"),u=e("../../geometry/classes/shape.js"),c=e("../../geometry/classes/point-on-shape.js");t.exports=n},{"../../geometry/classes/circle.js":5,"../../geometry/classes/point-on-shape.js":6,"../../geometry/classes/shape.js":7,"../../linked-loop/linked-loop.js":13,"../../mat/classes/contact-point.js":18,"../../mat/classes/mat-circle.js":21}],25:[function(e,t,r){"use strict";function n(e,t){var r=t.circle,n=t.ps,o=t.delta3s,u=[0,1,2].map(function(e){return new a(n[e],(void 0))});MatLib._debug_;for(var c=[],l=0;l<3;l++){var v=n[l],h=v.bezierNode.loop.indx;c.push(s.insert(e.contactPointsPerLoop[h],u[l],o[l][0]))}for(var d=i.create(r,c),f=[2,0,1],p=[1,2,0],m=0;m<3;m++)c[m].prevOnCircle=c[f[m]],c[m].nextOnCircle=c[p[m]];return d}var i=e("../../mat/classes/mat-circle.js"),a=e("../../mat/classes/contact-point.js"),s=e("../../linked-loop/linked-loop.js");t.exports=n},{"../../linked-loop/linked-loop.js":13,"../../mat/classes/contact-point.js":18,"../../mat/classes/mat-circle.js":21}],26:[function(e,t,r){"use strict";function n(e,t,r,o,u){var c=void 0;do c=a(t),MatLib._debug_,c.length>2&&s(e,c);while(c.length>2);if(1===t.item.matCircle.cpNodes.length){var l=i(t,r?[r]:[]);return l}if(1===c.length){var v=i(t,r?[r]:[]);return v}if(2===c.length){for(var h=r?[r]:[],d=i(t,h),f=t,p=0;f.nextOnCircle!==t&&f.next!==f.nextOnCircle;){p++;var m=void 0;if(1===p)m=f.next,t.item.matCircle.visited++;else if(2===p&&(m=f,1!==f.item.matCircle.visited))break;var g=n(e,m,d,f,!1);h.push(g),f=f.nextOnCircle}return d}}function i(e,t){var r=new l(e.item.matCircle,t);return MatLib._debug_&&o(e,r),r}function a(e){var t=void 0,r=e;t=[];do{t.push(r);var n=r.next;r=n.prevOnCircle}while(r!==e);return t}function s(e,t){for(var r=[],n=0;n<t.length;n++){var i=t[n];r.push([i,i.next])}for(var a=!1,s=0;s<r.length;s++){var o=s+1;o===r.length&&(o=0);var l=r[s][1].item,d=r[o][0].item;if(v.equal(l,d)){a=!0;break}}for(var f=u(e,r),p=0;p<3;p++)h.setPointOrder(e,f.circle,f.ps[p]);c(e,f)}function o(e,t){var r=e.item.matCircle.circle,n=h.makeSimpleKey(r.center),i=MatLib._debug_.generated.nodeHash;i[n]=i[n]||{},i[n].matNode=t;var a=h.makeSimpleKey(e.item.pointOnShape),s=MatLib._debug_.generated.cpHash,o=MatLib._debug_.generated.cpArr;s[a]||(s[a]={cp:e,arrIndx:o.length},o.push(e));var u=s[a];u.visitedPointsArr=u.visitedPointsArr||[]}var u=e("./find-3-prong.js"),c=e("./add-3-prong.js"),l=e("../../mat/classes/mat-node.js"),v=e("../../mat/classes/contact-point.js"),h=e("../../geometry/classes/point-on-shape.js");t.exports=n},{"../../geometry/classes/point-on-shape.js":6,"../../mat/classes/contact-point.js":18,"../../mat/classes/mat-node.js":22,"./add-3-prong.js":25,"./find-3-prong.js":29}],27:[function(e,t,r){"use strict";function n(e){return new a(i.copy(e.startNode))}var i=e("../../mat/classes/mat-node.js"),a=e("../classes/mat.js");t.exports=n},{"../../mat/classes/mat-node.js":22,"../classes/mat.js":23}],28:[function(e,t,r){"use strict";function n(e,t,r){var n=!1,c=t.bezierNode,v=t.t,d=_.getOsculatingCircle(t),p=d.center,g=d.radius,y=g*g,j=void 0,w=void 0,I=t.bezierNode.loop.indx;if(r){w=[];for(var P=0;P<I;P++){var z=b.getBoundaryBeziers(e,P);Array.prototype.push.apply(w,z)}}else{var S=b.getNeighbouringPoints(e,t);j=[S[0],S[0]],w=b.getBoundaryPieceBeziers(j)}var C=[],T=void 0,O=void 0,B=0;N++;do{B++;var A=x.squaredDistanceBetween(p,t);w=s(w,p,A),T=M(w,p,c,v),T||console.log(N),MatLib._debug_&&C.push({x:p,y:t,z:T,t:v});var L=x.squaredDistanceBetween(p,T);if(1===B&&L+h>=A)return void i(e,t);var D=x.squaredDistanceBetween(t,T);if(D<=l){n=!0;break}var k=o(p,t,T);O=x.squaredDistanceBetween(p,k);var q=x.squaredDistanceBetween(t,k);q<y&&(y=q),p=k}while(O>f&&B<u);MatLib._debug_&&C.push({x:p,y:t,z:T,t:v}),B===u&&(n=!0);var E=new m(p,x.distanceBetween(p,T));if(_.setPointOrder(e,E,t),_.setPointOrder(e,E,T),MatLib._debug_&&a(n,t,E,t,T,j,C,r),!n)return{circle:E,z:T}}function i(e,t){if(t.type!==p.pointType.dull){var r=new w(t,(void 0)),n=b.getNeighbouringPoints(e,t),i=w.compare(n[0].item,r),a=w.compare(r,n[1].item);if(MatLib._debug_,0!==i&&0!==a){var s=t.bezierNode.loop.indx,o=j.insert(e.contactPointsPerLoop[s],r,n[0]);I.create(_.getOsculatingCircle(t),[o]);o.prevOnCircle=o,o.nextOnCircle=o,MatLib._debug_&&MatLib._debug_.generated.oneProngs.push({pos:t})}}else if(MatLib._debug_){var u=_.getOsculatingCircle(t);Number.isNaN(u.center[0])||MatLib._debug_.generated.oneProngsAtDullCorner.push({pos:t})}}function a(e,t,r,n,i,a,s,o){var u=new P(t,a,n,i,r.center,r,s,e,o);MatLib._debug_.generated.twoProngs.push(u)}function s(e,t,r){var n=5;if(e.length<=n)return e;var i=[],a=!0,s=!1,o=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value,v=l.bezierNode.item,h=g.getBoundingBox(v),d=y.getClosestSquareDistanceToRect(h,t);d<=r+.1&&i.push(l)}}catch(e){s=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw o}}return i}function o(e,t,r){var n=Math.abs((e[1]-t[1])/(e[0]-t[0]))>1,i=void 0,a=void 0,s=void 0,o=void 0,u=void 0,c=void 0;n?(i=e[1],a=e[0],s=t[1],o=t[0],u=r[1],c=r[0]):(i=e[0],a=e[1],s=t[0],o=t[1],u=r[0],c=r[1]);var l=(a-o)/(i-s),v=o-l*s,h=s*s+o*o-u*u-c*c+2*v*(c-o),d=s-u+l*(o-c),f=h/(2*d),p=l*f+v;return n?[p,f]:[f,p]}var u=50,c=.001,l=c*c,v=1e-4,h=v*v,d=c/10,f=d*d,p=e("../../mat-constants.js"),m=e("../../geometry/classes/circle.js"),g=e("../../geometry/classes/bezier.js"),y=e("../../geometry/geometry.js"),b=e("../../geometry/classes/shape.js"),j=e("../../linked-loop/linked-loop.js"),x=e("../../vector/vector.js"),_=e("../../geometry/classes/Point-on-shape.js"),w=e("../../mat/classes/contact-point.js"),I=e("../../mat/classes/mat-circle.js"),M=e("../../geometry/functions/get-closest-boundary-point-to-point.js"),P=e("../classes/debug/two-prong-for-debugging.js"),N=0;t.exports=n},{"../../geometry/classes/Point-on-shape.js":1,"../../geometry/classes/bezier.js":4,"../../geometry/classes/circle.js":5,"../../geometry/classes/shape.js":7,"../../geometry/functions/get-closest-boundary-point-to-point.js":10,"../../geometry/geometry.js":12,"../../linked-loop/linked-loop.js":13,"../../mat-constants.js":16,"../../mat/classes/contact-point.js":18,"../../mat/classes/mat-circle.js":21,"../../vector/vector.js":43,"../classes/debug/two-prong-for-debugging.js":20}],29:[function(e,t,r){"use strict";function n(e,t){for(var r=t.map(function(e){return p.getBoundaryPieceBeziers(e)}),n=[],a=void 0,s=void 0,o=Number.POSITIVE_INFINITY,u=1;u<t.length-1;u++){var c=i(e,t,u,r),l=c.circle,v=c.ps,h=c.error;MatLib._debug_&&n.push({circle:l,ps:v}),h<o&&(o=h,s=u-1,a={circle:l,ps:v})}var d=[t[0],t[s+1],t[t.length-1]];if(a.delta3s=d,MatLib._debug_){var f=new g(a,t,s,n);MatLib._debug_.generated.threeProngs.push(f)}return a}function i(e,t,r,n){for(var i=1e-7,o=[t[0],t[r],t[t.length-1]],c=[n[0],n[r],n[t.length-1]],p=void 0,g=void 0,b=0,j=s(e,o,c),x=Number.POSITIVE_INFINITY;x>i&&b<10;){b++,p=u(j,c),g=v.circumCenter(p);var _=y(j,g),w=a(c,j,_);j=w.newX;var I=v.length(_);p=w.newPs,x=Math.abs(I-w.newV)}for(var M=(v.distanceBetween(j,p[0])+v.distanceBetween(j,p[1])+v.distanceBetween(j,p[2]))/3,P=new h(j,M),N=0,z=0;z<3;z++){var S=p[z],C=v.toUnitVector(v.fromTo(S,j)),T=v.rotateBy90Degrees(C),O=f.makeSimpleKey(S),B=e.dullCornerHash[O];if(B){var A=B.tans,L=A.map(v.rotateBy90Degrees);MatLib._debug_&&MatLib._debug_.log,MatLib._debug_&&MatLib._debug_.log;var D=v.cross(L[0],C),k=v.cross(C,L[1]),q=Math.asin(D),E=Math.asin(k),R=0;q>0&&(R+=q),E>0&&(R+=E),N+=R}else{var V=S.bezierNode.item,F=v.toUnitVector(d.tangent(V)(S.t)),H=Math.abs(Math.asin(v.cross(T,F)));N+=H}}for(var U=[],Y=0;Y<n.length;Y++){var G=m(n[Y],j,void 0,void 0);U.push(v.distanceBetween(G,j))}var K=l.min(U),Q=Math.abs(M-K),Z=1,X=1,W=Z*Q+X*N;return{ps:p,circle:P,error:W}}function a(e,t,r){var n=v.length(r),i=1,a=void 0,s=void 0,o=void 0,c=void 0,l=0;do{var h=v.scale(r,i);s=v.translate(t,h),o=u(s,e);var d=v.circumCenter(o),f=v.fromTo(s,d);c=v.length(f),a=c<n,i/=2,l++}while(!a&&l<3);return{newX:s,newV:c,newPs:o}}function s(e,t,r){var n=v.mean([t[0][0].item,t[2][1].item]),i=m(r[1],n,void 0,void 0),a=[t[0][0].item,i,t[2][1].item],s=void 0;if(s=t[0][0].item.pointOnShape.type===c.pointType.sharp?v.mean([a[0],a[1]]):v.circumCenter(a),Number.isFinite(s[0])||MatLib._debug_,!Number.isFinite(s[0])){var u=o(a);return v.mean([a[u[0]],a[u[1]]])}return s}function o(e){return e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0,2]:e[1][0]===e[2][0]&&e[1][1]===e[2][1]?[0,2]:e[2][0]===e[0][0]&&e[2][1]===e[0][1]?[1,2]:[]}function u(e,t){return t.map(function(t){var r=m(t,e,void 0,void 0);return r})}var c=e("../../mat-constants.js"),l=e("../../utils.js"),v=(e("../../geometry/geometry.js"),e("../../vector/vector.js")),h=e("../../geometry/classes/circle.js"),d=e("../../geometry/classes/bezier.js"),f=e("../../geometry/classes/point-on-shape.js"),p=e("../../geometry/classes/shape.js"),m=e("../../geometry/functions/get-closest-boundary-point-to-point.js"),g=e("../classes/debug/three-prong-for-debugging.js"),y=v.fromTo;t.exports=n},{"../../geometry/classes/bezier.js":4,"../../geometry/classes/circle.js":5,"../../geometry/classes/point-on-shape.js":6,"../../geometry/classes/shape.js":7,"../../geometry/functions/get-closest-boundary-point-to-point.js":10,"../../geometry/geometry.js":12,"../../mat-constants.js":16,"../../utils.js":42,"../../vector/vector.js":43,"../classes/debug/three-prong-for-debugging.js":19}],30:[function(e,t,r){"use strict";function n(e){var t=void 0;t=performance.now(),i(e),a(e);var r=performance.now();MatLib._debug_&&(MatLib._debug_.add2ProngsDuration=r-t),console.log("    2-prongs took "+(r-t).toFixed(0)+" milliseconds.");var n=void 0;n=performance.now();var s=e.contactPointsPerLoop[0],u=s.head;do{if(2===u.item.matCircle.cpNodes.length&&u.next.prevOnCircle!==u)break;u=u.next}while(u!==s.head);var c=u.prevOnCircle,v=p(e,c,void 0,void 0,!1),h=p(e,c.prevOnCircle,void 0,void 0,!1);v.branches.push(h.branches[0]),h.branches[0].branches[0]=v;var d=new l(v),f=performance.now();return MatLib._debug_&&(MatLib._debug_.add2ProngsDuration=f-n),console.log("    3-prongs took "+(f-n).toFixed(0)+" milliseconds."),o(d)}function i(e){for(var t=e.extremes,r=1;r<t.length;r++){var n=t[r],i=c.maxOsculatingCircleRadius,a=[n.p[0],n.p[1]-i],s=(new v(a,i),new h(n.bezierNode,n.t,c.pointType.extreme,0,0)),o=f(e,s,!0),u=o.circle,l=o.z,p=l,m=h.makeSimpleKey(s);e.straightUpHash[m]&&(e.skip2ProngHash[m]=s),d(e,u,s,p,!0)}}function a(e){for(var t=e.for2ProngsArray,r=0;r<t.length;r++){var n=t[r];s(e,r,n)}}function s(e,t,r){for(var n=r.length,i=u(n),a=0;a<n;a++){var s=r[i[a]],o=s.item,c=h.makeSimpleKey(o);if(!e.skip2ProngHash[c]){var l=f(e,o,!1);if(l){var v=l.circle,p=l.z;d(e,v,o,p,!1)}}}}function o(e){function t(e,r){if(3===e.branches.length&&e.branches[2].matCircle===e.matCircle){var n=e.branches[2],i=n.branches[1];e.branches[2]=i,i.branches[0]=e}var a=!0,s=!1,o=void 0;try{for(var u,c=e.branches[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;l!==r&&t(l,e)}}catch(e){s=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw o}}}return t(e.startNode,void 0),e}function u(e){for(var t=[],r=0;r<e;r++)t.push(r);return t}var c=e("../../mat-constants.js"),l=e("../classes/mat.js"),v=(e("../classes/contact-point.js"),e("../../linked-loop/linked-loop.js"),e("../../geometry/classes/circle.js")),h=e("../../geometry/classes/Point-on-shape.js"),d=e("./add-2-prong.js"),f=e("./find-2-prong.js"),p=e("./build-mat.js");t.exports=n},{"../../geometry/classes/Point-on-shape.js":1,"../../geometry/classes/circle.js":5,"../../linked-loop/linked-loop.js":13,"../../mat-constants.js":16,"../classes/contact-point.js":18,"../classes/mat.js":23,"./add-2-prong.js":24,"./build-mat.js":26,"./find-2-prong.js":28}],31:[function(e,t,r){"use strict";function n(e){var t=[];return i(e,function(e){t.push(e)}),t}var i=e("./traverse.js");t.exports=n},{"./traverse.js":35}],32:[function(e,t,r){"use strict";function n(e){var t={};return a(e,function(e){var r=i.makeSimpleKey(e.matCircle.circle.center);t[r]=e}),t}var i=e("../../geometry/classes/point-on-shape.js"),a=e("./traverse.js");t.exports=n},{"../../geometry/classes/point-on-shape.js":6,"./traverse.js":35}],33:[function(e,t,r){"use strict";function n(e){function t(e){for(var t=i(e,2),r=t[0],n=t[1],a=0;a<r.length;a++)for(var s=r[a],o=0;o<n.length;o++){var u=n[o];if(s.next===u)return[s,u]}}var r=[],n=[],l=[];return u.traverse(e,function(e,u){function v(e,t,r){var n=e.item,i=r?e.nextOnCircle.item:e.prevOnCircle.item,a=void 0;if(n!==i){var u=o.fromTo(n,i);a=o.rotateBy90Degrees(u)}else if(n.pointOnShape.type===c.pointType.sharp){var l=void 0,v=void 0;0===n.pointOnShape.t?(l=n.pointOnShape.bezierNode,v=n.pointOnShape.bezierNode.prev):1===n.pointOnShape.t&&(l=n.pointOnShape.bezierNode.next,v=n.pointOnShape.bezierNode);var h=s.tangent(l.item)(0),d=o.reverse(s.tangent(v.item)(1)),f=o.dot(h,d),p=Math.sqrt((1+f)/2),m=Math.sqrt((1-f)/2);a=o.rotate(d,m,p)}else a=o.fromTo(n,t);var g=o.translate(t,o.toLength(a,1)),y=[t,g];return y}if(u){var h=u.matCircle,d=h.circle.center,f=h.cpNodes,p=e.matCircle,m=p.circle.center,g=p.cpNodes,y=t([f,g]),b=i(y,2),j=b[0],x=b[1],_=v(j,d,!0),w=v(x,m,!1),I=a.lineLineIntersection(_,w),M=void 0;if(I){var P=o.fromTo(d,I),N=o.fromTo(m,I),z=o.fromTo(d,m),S=o.dot(P,z),C=o.dot(N,z);M=S<0||C>0}if(I)if(M){var T=o.mean([d,m]),O=o.fromTo(d,m),B=o.rotateBy90Degrees(O),A=o.translate(T,B),L=[T,A],D=a.lineLineIntersection(_,L),k=a.lineLineIntersection(w,L);l.push([d,D,k,m])}else n.push([d,I,m]);else r.push([d,m])}}),{lines:r,quads:n,cubes:l}}var i=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=e("../../geometry/geometry.js"),s=e("../../geometry/classes/bezier.js"),o=e("../../vector/vector.js"),u=e("../classes/mat.js"),c=e("../../mat-constants.js");t.exports=n},{"../../geometry/classes/bezier.js":4,"../../geometry/geometry.js":12,"../../mat-constants.js":16,"../../vector/vector.js":43,"../classes/mat.js":23}],34:[function(e,t,r){"use strict";function n(e,t){var r=f(e),n=p(r),i=-Number.POSITIVE_INFINITY,u=void 0;for(var l in n){var h=n[l],d=h.matCircle.circle.radius;d>i&&(u=h,i=d)}var m=(performance.now(),a(t,n));performance.now();MatLib._debug_&&(MatLib._debug_.generated.sat.tree=m);var y=new g(u),b={};o(m,s,{s:t,tree:m,cullHash:b});var j=[];return c(b,j,y.startNode),v(j),y}function i(e,t,r,n,a,s,o){var u=6,c=a.matCircle.circle,l=h(e,r,n,c),v=l.groups,d=l.newLimits;if(1===v.length&&o!==u){var f=v[0];t[f]||(t[f]={});var p=t[f],m=r?0:1;return void i(e,p,m,d,a,s,o+1)}t[5]||(t[5]=new Map);var g=t[5];g.set(s,a)}function a(e,t){var r=0,n=[[0,y],[0,b]],a={};for(var s in t){var o=t[s];i(e,a,r,n,o,s,0)}return a}function s(e,t,r){var n=r.s,i=r.tree,a=r.cullHash;if(0!==e.matCircle.circle.radius&&!a[t]){var s=u(n,i,e);for(var o in s)a[o]||(a[o]=e)}}function o(e,t,r){function n(e){if(e){if(e.size)return void e.forEach(function(e,n){t(e,n,r)});e[5]&&n(e[5]),e[0]&&n(e[0]),e[2]&&n(e[2]),e[4]&&n(e[4]),e[1]&&n(e[1]),e[3]&&n(e[3])}}n(e)}function u(e,t,r){function n(t){var r=t[5];r&&r.forEach(function(t,n){var i=d.scale(t.matCircle.circle,e);d.engulfsCircle(a,i)&&(s[n]=t,r.delete(n))})}function i(t,r,a,s){if(null!==a){var o=h(e,r,a,u),c=o.groups,l=o.newLimits;if(1!==c.length){n(t);for(var v=0;v<=4;v++){var d=t[v];d&&i(d,0,null,s+1)}}else{n(t);var f=c[0],p=r?0:1;if(1===f||3===f){var m=t[f];m&&i(m,p,l,s+1)}else{var g=[];g.push(t[f]),f>0&&g.push(t[f-1]),f<4&&g.push(t[f+1]);var y=!0,b=!1,j=void 0;try{for(var x,_=g[Symbol.iterator]();!(y=(x=_.next()).done);y=!0){var w=x.value;w&&i(w,p,l,s+1)}}catch(e){b=!0,j=e}finally{try{!y&&_.return&&_.return()}finally{if(b)throw j}}}}}else{n(t);for(var I=0;I<=4;I++){var M=t[I];M&&i(M,0,null,s+1)}}}var a=d.scale(r.matCircle.circle,e),s={},o=[[0,y],[0,b]],u=r.matCircle.circle;return i(t,0,o,0),s}function c(e,t,r,n){var i=m.makeSimpleKey(r.matCircle.circle.center),a=!e[i],s=!0,o=!1,u=void 0;try{for(var l,v=r.branches[Symbol.iterator]();!(s=(l=v.next()).done);s=!0){var h=l.value;h!==n&&c(e,t,h,r)&&(a=!0)}}catch(e){o=!0,u=e}finally{try{!s&&v.return&&v.return()}finally{if(o)throw u}}return!!a||(t.push({satNode:r,priorNode:n}),!1)}function l(e){var t=e.satNode,r=e.priorNode,n=r.branches.indexOf(t);n>=0&&r.branches.splice(n,1)}function v(e){var t=!0,r=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;l(s)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}function h(e,t,r,n){var i=r[t],a=i[0],s=i[1],o=(s-a)/4,u=o+o,c=n.radius,l=n.center[t]-a,v=l-c*e,h=l+c*e,d=[,],f=[],p=Math.floor(v/o),m=Math.floor(h/o)+1,g=m-p,y=void 0;if(1===g){y=2*Math.floor(p/2)+1,f.push(y);var b=a+o*(y-1);d=[b,b+u]}else if(2===g){y=p+1,f.push(y);var j=a+o*(y-1);d=[j,j+u]}var x=[,];if(1===f.length){var _=t?0:1;x[_]=r[_],x[t]=d}return{groups:f,newLimits:x}}var d=e("../../geometry/classes/circle.js"),f=e("./copy-mat.js"),p=e("./get-nodes-as-hash.js"),m=(e("../../geometry/geometry.js"),e("../../geometry/classes/point-on-shape.js")),g=e("../classes/mat.js"),y=1620,b=1560;t.exports=n},{"../../geometry/classes/circle.js":5,"../../geometry/classes/point-on-shape.js":6,"../../geometry/geometry.js":12,"../classes/mat.js":23,"./copy-mat.js":27,"./get-nodes-as-hash.js":32}],35:[function(e,t,r){"use strict";function n(e,t){function r(e,n){t(e,n);for(var i=0;i<e.branches.length;i++){var a=e.branches[i];a!==n&&r(a,e,i)}}r(e.startNode,void 0,void 0)}e("../../geometry/classes/point-on-shape.js");t.exports=n},{"../../geometry/classes/point-on-shape.js":6}],36:[function(e,t,r){"use strict";var n={},i=!(!window.Map||!window.WeakMap),a=void 0;i&&(a=new Map),n.m1=function(e){if(!i)return e;var t=new WeakMap;return function(r){var n=t.get(r);return void 0!==n?n:(n=e(r),t.set(r,n),n)}},t.exports=n},{}],37:[function(e,t,r){"use strict";function n(e,t,r){for(var n=r||16,s=a[n],o=s.weights,u=s.abscissas,c=i(t,2),l=c[0],v=c[1],h=0,d=(v-l)/2,f=(v+l)/2,p=0;p<=n-1;p++)h+=o[p]*e(d*u[p]+f);return d*h}var i=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a={2:{weights:[1,1],abscissas:[-.5773502691896257,.5773502691896257]},4:{weights:[.6521451548625461,.6521451548625461,.3478548451374538,.3478548451374538],abscissas:[-.3399810435848563,.3399810435848563,-.8611363115940526,.8611363115940526]},8:{weights:[.362683783378362,.362683783378362,.3137066458778873,.3137066458778873,.2223810344533745,.2223810344533745,.1012285362903763,.1012285362903763],abscissas:[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363]},16:{abscissas:[-.9894009349916499,-.9445750230732326,-.8656312023878318,-.755404408355003,-.6178762444026438,-.45801677765722737,-.2816035507792589,-.09501250983763744,.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],weights:[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685,.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]}};t.exports=n},{}],38:[function(e,t,r){"use strict";function n(e){function t(e){return e<0?-Math.pow(-e,1/3):Math.pow(e,1/3)}function r(e){return e>=0&&e<=1}var n,i,a,s,o,u=e[0],c=e[1]/u,l=e[2]/u,v=e[3]/u,h=(3*l-c*c)/3,d=h/3,f=(2*c*c*c-9*c*l+27*v)/27,p=f/2,m=p*p+d*d*d;if(m<0){var g=-h/3,y=g*g*g,b=Math.sqrt(y),j=-f/(2*b),x=j<-1?-1:j>1?1:j,_=Math.acos(x),w=t(b),I=2*w;return a=I*Math.cos(_/3)-c/3,s=I*Math.cos((_+2*Math.PI)/3)-c/3,o=I*Math.cos((_+4*Math.PI)/3)-c/3,[a,s,o].filter(r)}if(0===m)return n=p<0?t(-p):-t(p),a=2*n-c/3,s=-n-c/3,[a,s].filter(r);var M=Math.sqrt(m);return n=t(M-p),i=t(M+p),a=n-i-c/3,[a].filter(r)}t.exports=n},{}],39:[function(e,t,r){"use strict";function n(e){for(var t=[],r=e.length-1,n=r;0!==n;n--){var i=e[r-n]*n;n===r&&0===i||t.push(i)}return 0===t.length?[0]:t}function i(e,t){if(0===e)return[];for(var r=t.length-1,n=[],i=r;i>=0;i--)n.push(e*t[r-i]);return n}function a(e){return z.multiplyByConst(-1,e)}function s(e,t){for(var r=e.length-1,n=t.length-1,i=Math.max(r,n),a=[],s=0;s<i+1;s++)a.push(0);for(var o=i;o>=0;o--){var u=e[i-o],c=t[i-o];a[i-o]=(u?u:0)-(c?c:0)}return a}function o(e,t){for(var r=e.length-1,n=t.length-1,i=r+n,a=[],s=0;s<i+1;s++)a.push(0);for(var o=r;o>=0;o--)for(var u=n;u>=0;u--)a[i-(o+u)]+=e[r-o]*t[n-u];return a}function u(e){return e.length-1}function c(e){return function(t){for(var r=e[0],n=1;n<e.length;n++)r=e[n]+r*t;return r}}function l(e){return e[e.length-1]}function v(e){for(var t=0,r=e.length-1,n=0,i=r;i>=0;i--){var a=Math.sign(e[r-i]);0!==a&&(0!==n&&n!==a&&t++,n=a)}return t}function h(e,t){for(var r=e.length-1,n=t.length-1,i=r-n,a=0;a<i-1;a++)t.unshift(0);n=r-1;var s=e[1]/e[0]-t[1]/t[0],o=e,u=z.multiplyByConst(e[0]/t[0],t),c=z.multiply(u,[1,s]),l=z.minus(c,o);return l.slice(2)}function d(e,t){for(var r=(e.length-1,[e[0]]),n=1;n<e.length-1;n++)r.push(e[n]+t*r[n-1]);return r}function f(e){var t=[];t.push(e),t.push(z.differentiate(e));for(var r=1;z.degree(t[r])>0;)t.push(z.remainder(t[r-1],t[r])),r++;return t}function p(e,t,r){var n=z.sturmChain(e),i=n.map(function(e){return z.evaluate(e)(t)}),a=n.map(function(e){return z.evaluate(e)(r)});return z.signChanges(i)-z.signChanges(a)}function m(e,t){for(var r=z.differentiate(e),n=t,i=1;i<=10;i++)n-=z.evaluate(e)(n)/z.evaluate(r)(n);return n}function g(e){var t=e.length-1;if(t<1)return 0;e[0]<0&&(e=z.negate(e));for(var r=[],n=0;n<t;n++)r.push(1);for(var i=0,a=0;a<=t;a++)if(!(e[a]>=0)){for(var s=Number.POSITIVE_INFINITY,o=!1,u=0;u<a;u++)if(!(e[u]<=0)){var c=Math.pow(-e[a]/(e[u]/Math.pow(2,r[u])),1/(a-u));r[u]++,s>c&&(s=c),o=!0}o&&i<s&&(i=s)}return i}function y(e){for(var t=e.length,r=[],n=t-1;n>=0;n--)r.push(e[n]);return r}function b(e,t,r){for(var n=e.length-1,i=new Array(n+1).fill(0),a=[],s=0;s<n+1;s++)a.push(new Array(n+1).fill(0));a[0][0]=1;for(var o=1;o<=n;o++){a[0][o]=r*a[0][o-1];for(var u=1;u<=o;u++)a[u][o]=r*a[u][o-1]+t*a[u-1][o-1]}for(var c=0;c<=n;c++){i[n-c]=0;for(var l=c;l<=n;l++){var v=a[c][l]*e[n-l];i[n-c]+=v}}return i}function j(e){return 1/z.positiveRootUpperBound(z.invert(e))}function x(e){for(var t=e.slice(),r=0;0===z.evaluateAt0(t);){var n=t.length;t.splice(n-1,1),r++}return{p:t,numZeros:r}}function _(e){var t=e.length-1;if(2===t)return z.findQuadraticRoots01(e);if(3===t)return z.findCubicRoots01(e).sort(function(e,t){return e-t});var r=z.differentiate(e),n=_(r);return 0!==n[0]&&n.unshift(0),1!==n[n.length-1]&&n.push(1),w(e,n)}function w(e,t){for(var r=t.length,n=[],i=z.evaluate(e),a=0;a<r-1;a++){var s=t[a],o=t[a+1],u=i(s),c=i(o);if(0===u||0===c)return 0===u&&n.push(s),0===c&&n.push(o),n;var l=u/c;if(l<0){var v=z.brent(i,s,o);n.push(v)}}return n}function I(e){if(0!==e.length){if(1===e.length)return 0===e[0]?[]:[];if(2===e.length){if(0===e[0])return 0===e[1]?[]:[];var t=-e[1]/e[0];return t>=0&&t<=1?[t]:[]}if(!(e.length>3)){var r=P(e,3),n=r[0],i=r[1],a=r[2],s=void 0,o=void 0,u=i*i-4*n*a;if(u<0)return[];if(0===u)return s=-i/(2*n),s>=0&&s<=1?[s]:[];u=Math.sqrt(u),i>=0?(s=(-i-u)/(2*n),o=2*a/(-i-u)):(s=2*a/(-i+u),o=(-i+u)/(2*n));var c=s>=0&&s<=1,l=o>=0&&o<=1;return c?l?s<o?[s,o]:[o,s]:[s]:l?[o]:[]}}}function M(e,t,r,n){if(t===r)return t;var i=e(t),a=e(r);if(i*a>=0)throw"Root not bracketed";var s=void 0;Math.abs(i)<Math.abs(a)&&(s=t,t=r,r=s),s=t;for(var o=!0,u=0,c=void 0;;){u++;var l=e(s),v=void 0;if(i=e(t),a=e(r),i!==l&&a!==l){var h=i-l,d=i-a,f=a-l;v=((t*a*f-r*i*h)*l+s*i*d*a)/(d*h*f)}else v=r-a*((r-t)/(a-i));var p=void 0,m=(3*t+r)/4,g=Math.abs(r-s),y=Math.abs(v-r),b=Math.abs(s-p);!(v>m&&v<r||v<m&&v>r)||o&&(y>=g/2||g<n)||!o&&(y>=b/2||b<n)?(v=(t+r)/2,o=!0):o=!1;var j=e(v);if(p=s,s=r,i*j<0?r=v:t=v,Math.abs(i)<Math.abs(a)){var x=t;t=r,r=x}if(0===a)return r;if(0===j)return v;var _=Math.abs(t-r);if(_/t+_/r<S||0===_||c<=_)return r;c=_}}var P=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),N=(e("../utils.js"),e("./functions/find-cubic-roots.js")),z={findQuadraticRoots01:I,findCubicRoots01:N,brent:M,positiveRootLowerBound:j,positiveRootUpperBound:g,zeroRoots:x,numRootsWithin:p,allRoots01:_,newton:m,rootsWithin:w,multiplyByConst:i,negate:a,minus:s,multiply:o,differentiate:n,sturmChain:f,degree:u,evaluate:c,evaluateAt0:l,signChanges:v,invert:y,changeVariables:b,deflate:d,remainder:h},S=1e-15;t.exports=z},{"../utils.js":42,"./functions/find-cubic-roots.js":38}],40:[function(e,t,r){"use strict";function n(){SVGPathElement.prototype.getPathData&&SVGPathElement.prototype.setPathData||i()}function i(){var e={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},t=function(e){this._string=e,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()},r=window.navigator.userAgent.indexOf("MSIE ")!==-1;t.prototype={parseSegment:function(){var t=this._string[this._currentIndex],r=e[t]?e[t]:null;if(null===r){if(null===this._prevCommand)return null;if(r=("+"===t||"-"===t||"."===t||t>="0"&&t<="9")&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null,null===r)return null}else this._currentIndex++;this._prevCommand=r;var n=null,i=r.toUpperCase();return"H"===i||"V"===i?n=[this._parseNumber()]:"M"===i||"L"===i||"T"===i?n=[this._parseNumber(),this._parseNumber()]:"S"===i||"Q"===i?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"C"===i?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"A"===i?n=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:"Z"===i&&(this._skipOptionalSpaces(),n=[]),null===n||n.indexOf(null)>=0?null:{type:r,values:n}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var t=this._string[this._currentIndex];return e[t]?e[t]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var e=this.peekSegmentType();return"M"===e||"m"===e},_isCurrentSpace:function(){var e=this._string[this._currentIndex];return e<=" "&&(" "===e||"\n"===e||"\t"===e||"\r"===e||"\f"===e)},_skipOptionalSpaces:function(){
for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex])&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var e=0,t=0,r=1,n=0,i=1,a=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string[this._currentIndex]?this._currentIndex+=1:this._currentIndex<this._endIndex&&"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,i=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")&&"."!==this._string[this._currentIndex])return null;for(var o=this._currentIndex;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==o)for(var u=this._currentIndex-1,c=1;u>=o;)t+=c*(this._string[u]-"0"),u-=1,c*=10;if(this._currentIndex<this._endIndex&&"."===this._string[this._currentIndex]){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)n+=(this._string[this._currentIndex]-"0")*(r*=.1),this._currentIndex+=1}if(this._currentIndex!==s&&this._currentIndex+1<this._endIndex&&("e"===this._string[this._currentIndex]||"E"===this._string[this._currentIndex])&&"x"!==this._string[this._currentIndex+1]&&"m"!==this._string[this._currentIndex+1]){if(this._currentIndex+=1,"+"===this._string[this._currentIndex]?this._currentIndex+=1:"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,a=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||this._string[this._currentIndex]>"9")return null;for(;this._currentIndex<this._endIndex&&this._string[this._currentIndex]>="0"&&this._string[this._currentIndex]<="9";)e*=10,e+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var l=t+n;return l*=i,e&&(l*=Math.pow(10,a*e)),s===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),l)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var e=null,t=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===t)e=0;else{if("1"!==t)return null;e=1}return this._skipOptionalSpacesOrDelimiter(),e}};var n,i=function(e){if(!e||0===e.length)return[];var r=new t(e),n=[];if(r.initialCommandIsMoveTo())for(;r.hasMoreData();){var i=r.parseSegment();if(null===i)break;n.push(i)}return n},a=SVGPathElement.prototype.setAttribute,s=SVGPathElement.prototype.removeAttribute;n=window.Symbol?{cachedPathData:Symbol(),cachedNormalizedPathData:Symbol()}:{cachedPathData:"__cachedPathData",cachedNormalizedPathData:"__cachedNormalizedPathData"};var o=function e(t,r,n,i,a,s,o,u,c,l){var v,h,d,f,p=function(e){return Math.PI*e/180},m=function(e,t,r){var n=e*Math.cos(r)-t*Math.sin(r),i=e*Math.sin(r)+t*Math.cos(r);return{x:n,y:i}},g=p(o),y=[];if(l)v=l[0],h=l[1],d=l[2],f=l[3];else{var b=m(t,r,-g);t=b.x,r=b.y;var j=m(n,i,-g);n=j.x,i=j.y;var x=(t-n)/2,_=(r-i)/2,w=x*x/(a*a)+_*_/(s*s);w>1&&(w=Math.sqrt(w),a=w*a,s=w*s);var I;I=u===c?-1:1;var M=a*a,P=s*s,N=M*P-M*_*_-P*x*x,z=M*_*_+P*x*x,S=I*Math.sqrt(Math.abs(N/z));d=S*a*_/s+(t+n)/2,f=S*-s*x/a+(r+i)/2,v=Math.asin(((r-f)/s).toFixed(9)),h=Math.asin(((i-f)/s).toFixed(9)),t<d&&(v=Math.PI-v),n<d&&(h=Math.PI-h),v<0&&(v=2*Math.PI+v),h<0&&(h=2*Math.PI+h),c&&v>h&&(v-=2*Math.PI),!c&&h>v&&(h-=2*Math.PI)}var C=h-v;if(Math.abs(C)>120*Math.PI/180){var T=h,O=n,B=i;h=c&&h>v?v+120*Math.PI/180*1:v+120*Math.PI/180*-1,n=d+a*Math.cos(h),i=f+s*Math.sin(h),y=e(n,i,O,B,a,s,o,0,c,[h,T,d,f])}C=h-v;var A=Math.cos(v),L=Math.sin(v),D=Math.cos(h),k=Math.sin(h),q=Math.tan(C/4),E=4/3*a*q,R=4/3*s*q,V=[t,r],F=[t+E*L,r-R*A],H=[n+E*k,i-R*D],U=[n,i];if(F[0]=2*V[0]-F[0],F[1]=2*V[1]-F[1],l)return[F,H,U].concat(y);y=[F,H,U].concat(y).join().split(",");var Y=[],G=[];return y.forEach(function(e,t){t%2?G.push(m(y[t-1],y[t],g).y):G.push(m(y[t],y[t+1],g).x),6===G.length&&(Y.push(G),G=[])}),Y},u=function(e){return e.map(function(e){return{type:e.type,values:Array.prototype.slice.call(e.values)}})},c=function(e){var t=[],r=null,n=null,i=null,a=null;return e.forEach(function(e){var s=e.type;if("M"===s){var o=e.values[0],u=e.values[1];t.push({type:"M",values:[o,u]}),i=o,a=u,r=o,n=u}else if("m"===s){var o=r+e.values[0],u=n+e.values[1];t.push({type:"M",values:[o,u]}),i=o,a=u,r=o,n=u}else if("L"===s){var o=e.values[0],u=e.values[1];t.push({type:"L",values:[o,u]}),r=o,n=u}else if("l"===s){var o=r+e.values[0],u=n+e.values[1];t.push({type:"L",values:[o,u]}),r=o,n=u}else if("C"===s){var c=e.values[0],l=e.values[1],v=e.values[2],h=e.values[3],o=e.values[4],u=e.values[5];t.push({type:"C",values:[c,l,v,h,o,u]}),r=o,n=u}else if("c"===s){var c=r+e.values[0],l=n+e.values[1],v=r+e.values[2],h=n+e.values[3],o=r+e.values[4],u=n+e.values[5];t.push({type:"C",values:[c,l,v,h,o,u]}),r=o,n=u}else if("Q"===s){var c=e.values[0],l=e.values[1],o=e.values[2],u=e.values[3];t.push({type:"Q",values:[c,l,o,u]}),r=o,n=u}else if("q"===s){var c=r+e.values[0],l=n+e.values[1],o=r+e.values[2],u=n+e.values[3];t.push({type:"Q",values:[c,l,o,u]}),r=o,n=u}else if("A"===s){var o=e.values[5],u=e.values[6];t.push({type:"A",values:[e.values[0],e.values[1],e.values[2],e.values[3],e.values[4],o,u]}),r=o,n=u}else if("a"===s){var o=r+e.values[5],u=n+e.values[6];t.push({type:"A",values:[e.values[0],e.values[1],e.values[2],e.values[3],e.values[4],o,u]}),r=o,n=u}else if("H"===s){var o=e.values[0];t.push({type:"H",values:[o]}),r=o}else if("h"===s){var o=r+e.values[0];t.push({type:"H",values:[o]}),r=o}else if("V"===s){var u=e.values[0];t.push({type:"V",values:[u]}),n=u}else if("v"===s){var u=n+e.values[0];t.push({type:"V",values:[u]}),n=u}else if("S"===s){var v=e.values[0],h=e.values[1],o=e.values[2],u=e.values[3];t.push({type:"S",values:[v,h,o,u]}),r=o,n=u}else if("s"===s){var v=r+e.values[0],h=n+e.values[1],o=r+e.values[2],u=n+e.values[3];t.push({type:"S",values:[v,h,o,u]}),r=o,n=u}else if("T"===s){var o=e.values[0],u=e.values[1];t.push({type:"T",values:[o,u]}),r=o,n=u}else if("t"===s){var o=r+e.values[0],u=n+e.values[1];t.push({type:"T",values:[o,u]}),r=o,n=u}else"Z"!==s&&"z"!==s||(t.push({type:"Z",values:[]}),r=i,n=a)}),t},l=function(e){var t=[],r=null,n=null,i=null,a=null,s=null,u=null,c=null;return e.forEach(function(e){if("M"===e.type){var l=e.values[0],v=e.values[1];t.push({type:"M",values:[l,v]}),u=l,c=v,a=l,s=v}else if("C"===e.type){var h=e.values[0],d=e.values[1],f=e.values[2],p=e.values[3],l=e.values[4],v=e.values[5];t.push({type:"C",values:[h,d,f,p,l,v]}),n=f,i=p,a=l,s=v}else if("L"===e.type){var l=e.values[0],v=e.values[1];t.push({type:"L",values:[l,v]}),a=l,s=v}else if("H"===e.type){var l=e.values[0];t.push({type:"L",values:[l,s]}),a=l}else if("V"===e.type){var v=e.values[0];t.push({type:"L",values:[a,v]}),s=v}else if("S"===e.type){var m,g,f=e.values[0],p=e.values[1],l=e.values[2],v=e.values[3];"C"===r||"S"===r?(m=a+(a-n),g=s+(s-i)):(m=a,g=s),t.push({type:"C",values:[m,g,f,p,l,v]}),n=f,i=p,a=l,s=v}else if("T"===e.type){var h,d,l=e.values[0],v=e.values[1];"Q"===r||"T"===r?(h=a+(a-n),d=s+(s-i)):(h=a,d=s);var m=a+2*(h-a)/3,g=s+2*(d-s)/3,y=l+2*(h-l)/3,b=v+2*(d-v)/3;t.push({type:"C",values:[m,g,y,b,l,v]}),n=h,i=d,a=l,s=v}else if("Q"===e.type){var h=e.values[0],d=e.values[1],l=e.values[2],v=e.values[3],m=a+2*(h-a)/3,g=s+2*(d-s)/3,y=l+2*(h-l)/3,b=v+2*(d-v)/3;t.push({type:"C",values:[m,g,y,b,l,v]}),n=h,i=d,a=l,s=v}else if("A"===e.type){var j=e.values[0],x=e.values[1],_=e.values[2],w=e.values[3],I=e.values[4],l=e.values[5],v=e.values[6];if(0===j||0===x)t.push({type:"C",values:[a,s,l,v,l,v]}),a=l,s=v;else if(a!==l||s!==v){var M=o(a,s,l,v,j,x,_,w,I);M.forEach(function(e){t.push({type:"C",values:e}),a=l,s=v})}}else"Z"===e.type&&(t.push(e),a=u,s=c);r=e.type}),t};SVGPathElement.prototype.setAttribute=function(e,t){"d"===e&&(this[n.cachedPathData]=null,this[n.cachedNormalizedPathData]=null),a.call(this,e,t)},SVGPathElement.prototype.removeAttribute=function(e,t){"d"===e&&(this[n.cachedPathData]=null,this[n.cachedNormalizedPathData]=null),s.call(this,e)},SVGPathElement.prototype.getPathData=function(e){if(e&&e.normalize){if(this[n.cachedNormalizedPathData])return u(this[n.cachedNormalizedPathData]);var t;this[n.cachedPathData]?t=u(this[n.cachedPathData]):(t=i(this.getAttribute("d")||""),this[n.cachedPathData]=u(t));var r=l(c(t));return this[n.cachedNormalizedPathData]=u(r),r}if(this[n.cachedPathData])return u(this[n.cachedPathData]);var t=i(this.getAttribute("d")||"");return this[n.cachedPathData]=u(t),t},SVGPathElement.prototype.setPathData=function(e){if(0===e.length)r?this.setAttribute("d",""):this.removeAttribute("d");else{for(var t="",n=0,i=e.length;n<i;n+=1){var a=e[n];n>0&&(t+=" "),t+=a.type,a.values&&(t+=" "+a.values.join(" "))}this.setAttribute("d",t)}}}t.exports=n},{}],41:[function(e,t,r){"use strict";function n(e){return!1}function i(e){return s.manhattanLength(e)<c}var a=e("../geometry/classes/bezier.js"),s=(e("../linked-loop/linked-loop.js"),e("../geometry/geometry.js"),e("../vector/vector.js")),o=e("./path-data-polyfill/path-data-polyfill.js"),u={},c=1e-6;u.getBeziersFromSvgElem=function(e){function t(e,t,r){var n=[[0,s.manhattanDistanceBetween(t[0],t[1]),s.manhattanDistanceBetween(t[0],t[2]),s.manhattanDistanceBetween(t[0],t[3])],[s.manhattanDistanceBetween(t[1],t[0]),0,s.manhattanDistanceBetween(t[1],t[2]),s.manhattanDistanceBetween(t[1],t[3])],[s.manhattanDistanceBetween(t[2],t[0]),s.manhattanDistanceBetween(t[2],t[1]),0,s.manhattanDistanceBetween(t[2],t[3])],[s.manhattanDistanceBetween(t[3],t[0]),s.manhattanDistanceBetween(t[3],t[1]),s.manhattanDistanceBetween(t[3],t[2]),0]],i=t,o=.1;(n[0][1]<c&&n[1][2]<c||n[1][2]<c&&n[2][3]<c)&&(i=[t[0],s.interpolate(t[0],t[3],1/3),s.interpolate(t[0],t[3],2/3),t[3]]),n[0][1]<c&&(i[1]=s.interpolate(t[0],t[2],o)),n[2][3]<c&&(i[2]=s.interpolate(t[1],t[3],1-o)),n[1][2]<c&&(i[1]=s.interpolate(t[0],t[1],1-o),i[2]=s.interpolate(t[2],t[3],o)),e.push(new a(i,r))}var r="Invalid SVG - every new path must start with an M or m.",u="Invalid SVG - command not recognized.";o();var l=e.getPathData();if(l.length<2)return[];for(var v=!1,h=void 0,d=void 0,f=[],p=[],m=void 0,g=void 0,y=void 0,b=void 0,j=void 0,x=0;x<l.length;x++){var _=l[x],w=_.values,I=0,M=0;_.type==_.type.toLowerCase()&&(I=b,M=j);var P=g;g=_.type.toUpperCase();var N=void 0;switch(g){case"M":if(v&&"Z"!==P){var z=(w[0]+I-b)/3,S=(w[1]+M-j)/3;N=[[b,j],[b+1*z,j+1*S],[b+2*z,j+2*S],[b+3*z,j+3*S]],h=void 0,d=void 0,i([z,S])||t(p,N,m++)}p.length&&(f.push(p),p=[]),v=!0,b=w[0],j=w[1],y=[b,j],m=0;break;case"C":if(!v)throw new Error(r);N=[[b,j],[I+w[0],M+w[1]],[I+w[2],M+w[3]],[I+w[4],M+w[5]]],h=N[2],d=void 0,b=N[3][0],j=N[3][1],n(N)||t(p,N,m++);break;case"S":if(!v)throw new Error(r);var C=void 0,T=void 0;h?(C=b-h[0]+b,T=j-h[1]+j):(C=b,T=j),N=[[b,j],[C,T],[I+w[0],M+w[1]],[I+w[2],M+w[3]]],h=N[2],d=void 0,b=N[3][0],j=N[3][1],n(N)||t(p,N,m++);break;case"L":if(!v)throw new Error(r);var O=(w[0]+I-b)/3,B=(w[1]+M-j)/3;N=[[b,j],[b+1*O,j+1*B],[b+2*O,j+2*B],[b+3*O,j+3*B]],h=void 0,d=void 0,b=N[3][0],j=N[3][1],i([O,B])||t(p,N,m++);break;case"H":if(!v)throw new Error(r);var A=(w[0]+I-b)/3;N=[[b,j],[b+1*A,j],[b+2*A,j],[b+3*A,j]],h=void 0,d=void 0,b=N[3][0],j=N[3][1],Math.abs(A)>c&&t(p,N,m++);break;case"V":if(!v)throw new Error(r);var L=(w[1]+M-j)/3;N=[[b,j],[b,j+1*L],[b,j+2*L],[b,j+3*L]],h=void 0,d=void 0,b=N[3][0],j=N[3][1],Math.abs(L)>c&&t(p,N,m++);break;case"Q":if(!v)throw new Error(r);var D=[b,j],k=[I+w[0],M+w[1]],q=[I+w[2],M+w[3]],E=D,R=q,V=[D[0]+2/3*(k[0]-D[0]),D[1]+2/3*(k[1]-D[1])],F=[q[0]+2/3*(k[0]-q[0]),q[1]+2/3*(k[1]-q[1])];N=[E,V,F,R],h=void 0,d=k,b=N[3][0],j=N[3][1],n(N)||t(p,N,m++);break;case"T":if(!v)throw new Error(r);var H=void 0,U=void 0;d?(H=b-d[0]+b,U=j-d[1]+j):(H=b,U=j);var Y=[b,j],G=[H,U],K=[I+w[0],M+w[1]],Q=Y,Z=K,X=[Y[0]+2/3*(G[0]-Y[0]),Y[1]+2/3*(G[1]-Y[1])],W=[K[0]+2/3*(G[0]-K[0]),K[1]+2/3*(G[1]-K[1])];N=[Q,X,W,Z],h=void 0,d=G,b=N[3][0],j=N[3][1],n(N)||t(p,N,m++);break;case"A":if(!v)throw new Error(r);h=void 0,d=void 0,t(p,N,m++);break;case"Z":if(!v)throw new Error(r);var J=(y[0]+I-b)/3,$=(y[1]+M-j)/3;N=[[b,j],[b+1*J,j+1*$],[b+2*J,j+2*$],[b+3*J,j+3*$]],h=void 0,d=void 0,b=N[3][0],j=N[3][1],i([J,$])||t(p,N,m++);break;default:throw new Error(u)}}return p.length&&(f.push(p),p=[]),f},u.getPathStrFromBezierLoop=function(e){var t=10,r=e.head,n=!0,i=void 0,a="";do{var s=r.item.bezierPoints;n&&(n=!1,a="M "+s[0][0].toFixed(t)+" "+s[0][1].toFixed(t)+"\n",i=s[0]),a+="C "+s[1][0].toFixed(t)+" "+s[1][1].toFixed(t)+" "+s[2][0].toFixed(t)+" "+s[2][1].toFixed(t)+" "+s[3][0].toFixed(t)+" "+s[3][1].toFixed(t)+" \n",r=r.next}while(r!==e.head);return a},t.exports=u},{"../geometry/classes/bezier.js":4,"../geometry/geometry.js":12,"../linked-loop/linked-loop.js":13,"../vector/vector.js":43,"./path-data-polyfill/path-data-polyfill.js":40}],42:[function(e,t,r){"use strict";var n={};n.min=function(e){return Math.min.apply(null,e)},n.max=function(e){return Math.max.apply(null,e)},n.acos=function(e){var t=.01;return e>1&&e<1+t?0:e<-1&&e>-1-t?Math.PI:Math.acos(e)},t.exports=n},{}],43:[function(e,t,r){"use strict";function n(e,t,r){return e[0]*(t[1]*r[2]-t[2]*r[1])-e[1]*(t[0]*r[2]-t[2]*r[0])+e[2]*(t[0]*r[1]-t[1]*r[0])}function i(e){return e[0]*e[0]+e[1]*e[1]}var a={};a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},a.cross=function(e,t){return e[0]*t[1]-e[1]*t[0]},a.squaredDistanceBetween=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n},a.scale=function(e,t){return[e[0]*t,e[1]*t]},a.reverse=function(e){return[e[0]*-1,e[1]*-1]},a.toUnitVector=function(e){var t=1/a.length(e);return[e[0]*t,e[1]*t]},a.toLength=function(e,t){var r=t/a.length(e);return[e[0]*r,e[1]*r]},a.fromTo=function(e,t){return[t[0]-e[0],t[1]-e[1]]},a.interpolate=function(e,t,r){return[e[0]+(t[0]-e[0])*r,e[1]+(t[1]-e[1])*r]},a.mean=function(e){var t=e[0],r=e[1];return[(t[0]+r[0])/2,(t[1]+r[1])/2]},a.distanceBetween=function(e,t){return Math.sqrt(a.squaredDistanceBetween(e,t))},a.length=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},a.lengthSquared=function(e){return e[0]*e[0]+e[1]*e[1]},a.manhattanDistanceBetween=function(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])},a.manhattanLength=function(e){return Math.abs(e[0])+Math.abs(e[1])},a.distanceBetweenPointAndLine=function(e,t){var r=e[0],n=e[1],i=t[0][0],a=t[0][1],s=t[1][0],o=t[1][1],u=o-a,c=s-i,l=u*r-c*n+s*a-o*i,v=Math.sqrt(u*u+c*c);return Math.abs(l/v)},a.squaredDistanceBetweenPointAndLineSegment=function(e,t){var r=t[0],n=t[1],i=a.squaredDistanceBetween(r,n);if(0==i)return a.squaredDistanceBetween(e,r);var s=((e[0]-r[0])*(n[0]-r[0])+(e[1]-r[1])*(n[1]-r[1]))/i;s=Math.max(0,Math.min(1,s));var o=a.squaredDistanceBetween(e,[r[0]+s*(n[0]-r[0]),r[1]+s*(n[1]-r[1])]);return o},a.circumCenter=function(e){var t=e[0],r=e[1],a=e[2],s=.5*n([i(t),t[1],1],[i(r),r[1],1],[i(a),a[1],1]),o=.5*n([t[0],i(t),1],[r[0],i(r),1],[a[0],i(a),1]),u=n([t[0],t[1],1],[r[0],r[1],1],[a[0],a[1],1]);n([t[0],t[1],i(t)],[r[0],r[1],i(r)],[a[0],a[1],i(a)]);return[s/u,o/u]},a.inCenter=function(e){var t=e[0],r=e[1],n=e[2],i=a.distanceBetween(r,n),s=a.distanceBetween(t,n),o=a.distanceBetween(t,r),u=i+s+o;return[(i*t[0]+s*r[0]+o*n[0])/u,(i*t[1]+s*r[1]+o*n[1])/u]},a.centroid=function(e){if(3===e.length){var t=e[0],r=e[1],n=e[2],i=t[0]+r[0]+n[0],a=t[1]+r[1]+n[1];return[i/3,a/3]}for(var s=0,o=0;o<e.length;o++){var u=e[o],c=o===e.length-1?e[0]:e[o+1];s+=u[0]*c[1]-c[0]*u[1]}s/=2;for(var l=[0,0],v=0;v<e.length;v++){var h=e[v],d=v===e.length-1?e[0]:e[v+1];l[0]=l[0]+(h[0]+d[0])*(h[0]*d[1]-d[0]*h[1]),l[1]=l[1]+(h[1]+d[1])*(h[0]*d[1]-d[0]*h[1])}return[l[0]/(6*s),l[1]/(6*s)]},a.translate=function(e,t){return[e[0]+t[0],e[1]+t[1]]},a.equal=function(e,t){return e[0]===t[0]&&e[1]===t[1]},a.rotate=function(e,t,r){return[e[0]*r-e[1]*t,e[0]*t+e[1]*r]},a.reverseRotate=function(e,t,r){return[+e[0]*r+e[1]*t,-e[0]*t+e[1]*r]},a.rotateBy90Degrees=function(e){return[-e[1],e[0]]},a.rotateByNeg90Degrees=function(e){return[e[1],-e[0]]},a.transform=function(e,t){return[t(e[0]),t(e[1])]},a.getClosestTo=function(e,t,r){for(var n=r||a.squaredDistanceBetween,i=void 0,s=Number.POSITIVE_INFINITY,o=0;o<t.length;o++){var u=t[o],c=n(e,u);c<s&&(i=u,s=c)}return i},a.translatePoints=function(e,t){for(var r=[],n=0;n<e.length;n++)r.push([e[n][0]+t[0],e[n][1]+t[1]]);return r},a.rotatePoints=function(e,t,r){return e.map(function(e){return a.rotate(e,t,r)})},a.translateThenRotatePoints=function(e,t,r,n){return e.map(function(e){return a.rotate(a.translate(e,t),r,n)})},a.rotateThenTranslatePoints=function(e,t,r,n){return e.map(function(e){return a.translate(a.rotate(e,r,n),t)})},t.exports=a},{}]},{},[17]);
//# sourceMappingURL=mat-lib.min.js.map
